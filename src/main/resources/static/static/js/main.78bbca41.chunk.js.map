{"version":3,"sources":["serviceWorker.ts","contexts/screen-context.tsx","api/axiosCient.ts","contexts/admin-authencation.tsx","api/admin/admin-api.ts","admin-auth.ts","common/Utils.ts","components/wform.tsx","components/winput.tsx","constants.ts","logo-svg/loading.tsx","pages/admin/admin-login.tsx","pages/admin/admin-logout.tsx","contexts/admin-overide-window.tsx","components/wdropdown.tsx","logo-svg/menu.tsx","page-component/admin/admin-header.tsx","page-component/admin/menu-tab.tsx","logo-svg/cancel.tsx","page-component/admin/admin-message-request.tsx","pages/admin/admin-user/add-user.tsx","components/image-error.tsx","logo-svg/edit.tsx","logo-svg/add.tsx","components/wcheckbox.tsx","logo-svg/first.tsx","logo-svg/last.tsx","logo-svg/next.tsx","logo-svg/previous.tsx","logo-svg/reload.tsx","components/wtable.tsx","page-component/admin/table-select.tsx","pages/admin/base/base-view.tsx","page-component/admin/menu-detail.tsx","components/list-select.tsx","pages/admin/admin-user/admin-groups.tsx","pages/admin/admin-user/edit-user.tsx","pages/admin/admin-user/reset-password.tsx","pages/admin/admin-user/update-permissions.tsx","pages/admin/admin-user/detail-user.tsx","pages/admin/admin-user/admin-users-view.tsx","api/admin/author-api.ts","api/admin/book-api.ts","api/admin/category-book-api.ts","api/admin/publisher-api.ts","page-component/admin/admin-message-request-disable-window.tsx","pages/admin/book/add-book.tsx","pages/admin/book/author/add.tsx","pages/admin/book/author/update.tsx","pages/admin/book/author/detail.tsx","pages/admin/book/author/view.tsx","pages/admin/book/category/add.tsx","pages/admin/book/category/update.tsx","pages/admin/book/category/detail.tsx","pages/admin/book/category/view.tsx","pages/admin/book/update-book.tsx","pages/admin/book/detail-book.tsx","pages/admin/book/publisher/add.tsx","pages/admin/book/publisher/update.tsx","pages/admin/book/publisher/detail.tsx","pages/admin/book/publisher/view.tsx","pages/admin/book/view-book.tsx","api/admin/group-api.ts","api/admin/permission-api.ts","pages/admin/group-permission/update-group.tsx","pages/admin/group-permission/update-group-permissions.tsx","pages/admin/group-permission/detail-group-permission.tsx","pages/admin/group-permission/view-group-permission.tsx","pages/admin/permission/add-permission.tsx","pages/admin/permission/update-permission.tsx","pages/admin/permission/detail-permission.tsx","pages/admin/permission/view-permission.tsx","pages/admin/admin-page.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","ScreenContext","React","createContext","undefined","ScreenProvider","props","state","screenInnerWidth","innerWidth","addEventListener","setState","Provider","value","this","children","Component","axiosClient","axios","create","baseURL","process","headers","paramsSerializer","params","queryString","stringify","interceptors","request","use","config","localStorage","token","console","log","response","resp","data","message","code","error","setLoginContext","AdminUserAPI","login","post","logout","get","getAllUser","pageInfo","addUser","deleteUsers","ids","delete","uploadAvatar","formData","FormData","append","id","image","put","editUser","getUser","updateUser","getAdminPermissions","userId","updateAdminPermissions","permissionsIds","permissionIds","resetPasswordUser","password","getAllGroups","updateAdminGroups","AdminAuthentication","AdminAuthenticationProvider","isLogin","authentication","admin","setItem","JSON","a","removeItem","pathname","Utils","formToJson","result","entries","name","hasOwnProperty","Array","push","viewImageFromInputFileE","inputTarget","viewTarget","file","files","reader","FileReader","onload","target","src","readAsDataURL","modelListToObject","list","idField","reduce","acc","cur","lostFocus","$","focus","waitPromise","time","Promise","resolve","setTimeout","preventSetStateWhenComponentUnmount","component","unmount","componentWillUnmount","__isMounted","prototype","args","apply","getPageRequest","pageDefault","page","limit","search","URLSearchParams","Number","parseInt","isInteger","mapValue","mapLowCase","i","String","fromCharCode","filterString","getText","textArray","toLowerCase","split","map","newVal","length","countIndex","nextChar","char","randomString","characters","charactersLength","charAt","Math","floor","random","nextClick","callback","document","evt","removeEventListener","renderRoute","configRoute","childs","path","renderSwitch","replace","createElement","Switch","parentPath","parentRoute","output","routes","__component","__isExact","__children","Route","exact","key","setToArray","size","index","WForm","formRef","createRef","winputInvalidBar","current","parentElement","otherValue","getValue","Object","input","attr","radio","checked","v","checkbox","onSubmit","currentTarget","preventDefault","ref","WInput","otherValid","inputValid","isFocusOut","nextProps","isValidInput","cssConfig","onFocusEvt","onBlurEvt","inputProps","is_invalid","no_title_animation","title_input","style","border","onFocus","Function","onBlur","className","from","reverse","duration","durian","width","left","fontSize","smallLabelSize","top","labelValidLocation","inputFontSize","labelInvalidLocation","WInputOther","SYSTEM_CONSTANTS","ERROR_REQUEST","PERMISSION_NOT_ALLOW","PAGE_OUT_INDEX","FAILED","REGEX","email","numbers","ALERT_STATUS_PROPS","NETWORK_ERROR","REQUEST_INVALID","WAIT_REQUEST","REQUEST_SUCCESS","LoadingSVG","xmlns","xmlnsXlink","version","x","y","viewBox","xmlSpace","d","LoginPage","accountType","statusLogin","accountInput","passwordInput","userInputType","isWattingRequest","inputText","paramName","isSkipTimeout","setCompelete","statusLoginCompelete","Consumer","to","padding","bind","type","required","onChange","userTypeOnChange","disabled","marginRight","height","AdminLogout","redirect","AdminOverrideWindow","AdminOverrideWindowProvider","windows","addWindow","indexOf","removeWindow","indexClear","slice","clear","getWindows","WDropdown","isOpen","Dropdown","toggle","dropdownToggle","dropdownMenu","MenuSVG","AdminHeader","isSmallScreen","toggleClass","userInfo","parse","minScreenResizeMenuTab","removeClass","Button","onClick","toggleMenu","fill","DropdownToggle","color","borderRadius","fontWeight","lineHeight","fullname","boxShadow","onError","DropdownMenu","right","DropdownItem","count","MenuTab","itemMenu","title","content","items","item","renderItem","hrefLink","getAdminHeader","menu","MenuDropDown","isCollapsed","CancelSVG","transform","AdminMessageRequest","isHide","is_hide","isWaitRequest","sendRequest","requestMethod","onBeforeSendRequest","hideWaiting","waitingMessage","hideWhenDone","getFailed","status","onCompleteSendRequest","minWidth","AddAdminUser","messageRequest","avatar","avatarInput","adminCode","phone","identityDocument","dateOfBirth","address","gender","passwordConfirm","passwordConfirmInput","isDisable","fieldChange","otherAction","setDisable","addUserReq","onSubmitForm","alt","click","inputChange","pwConfirm","display","accept","radioInputGender","defaultChecked","marginTop","ImageError","err_src","EditSVG","points","AddSVG","WCheckBox","isChecked","cx","cy","r","FirstSVG","stroke","data-original","LastSVG","NextSVG","PreviousSVG","ReloadSVG","WTable","tableBody","keyTable","pageData","pageValue","limitValue","isWaiting","reloadPage","pageGet","getPage","onPageChangeEvent","pageChange","limitChange","Table","hover","e","inRow","fillData","Container","fluid","Row","Col","md","sm","InputGroup","InputGroupAddon","addonType","Input","maxWidth","textAlign","min","totalPage","offset","totalRecord","ButtonGroup","TableListAdmin","tableRef","idsSelect","isSelectAll","wtable","onPageChange","getId","classNameNotCheckWhenClick","idTable","checkBoxSelectAll","cols","startIndex","getStartIndex","getSelection","toString","closest","find","isSelect","findIndex","splice","BaseCrudView","tableAdmin","requestMessage","configure","addPage","deleteAction","subRender","link","textButton","deleteSelected","unselectClass","history","pushState","replaceState","getPageAPIMethod","resultReq","messageData","codeError","deleteMethod","alertColor","setMessage","DetailAdminPage","adminMessageRequest","viewIndex","isShowMore","maxItem","minWithMenuTab","menuConfig","idMenu","interceptor","btnGoBack","goBackAction","maxItemRender","getMaxItemInScreen","goBackTab","firstChild","isRenderShowMore","closeMessage","menuTab","startRenderIndex","getMenuTab","popupShowMore","getPopupShowMore","body","ListSelect","refComponent","typeSearch","searchValue","valueSelected","isFirstRender","justShowSelected","filter","getData","trim","onComplete","each","valueSelect","updatePermissions","textOnCompleteButton","toggleSelectAll","changeFilter","propertySearch","viewSearch","header","dataExits","getKey","getAllow","viewData","UpdateGroups","selected","adminId","adminInfo","groupIds","keys","groupCode","updateGroups","isAllow","EditAdminUser","wform","setInput","moment","format","isValidInputs","update","messageErrorUploadImage","onUpdate","updateAdminUser","AdminResetPassword","UpdatePermissions","permissions","DetailAdminUser","oldLocation","detailPage","nextUpdate","isNotFoundUser","goBack","url","action","createBy","createDate","calendar","modifiedBy","updateInfo","getAdminMessageReq","ViewAdminUser","urlPage","modifiedDate","editWindow","isUnlimited","AuthorAPI","getAll","deleteAuthors","addAuthor","authors","updateAuthor","getAuthorById","BookAPI","getBooks","addBook","uploadImage","deleteBook","updateBook","book","getBook","CategoryAPI","getAllCategory","deleteCategories","addCategory","category","updateCategory","getCategory","PublisherAPI","deletePublishers","addPublisher","publisher","updatePublisher","getPublisherById","AMRWindow","adminMessage","getMessageRequest","AddBook","form","amrWindow","isShowCategories","imageUpload","publishers","categories","unlimited","then","setData","isbn","pageNumber","price","description","edition","amr","messageReq","values","resultAddBook","bookId","xs","BookCoverImage","onImageChange","AuthorsInputListSelect","CategoriesInputListSelect","rows","valuesSelect","useState","setCategories","readOnly","join","whiteSpace","categoriesView","categoryCode","setAuthors","author","authorView","authorCode","imagePath","imageView","useRef","inputImage","imgView","AddAuthor","insert","UpdatePublisher","categoryInfo","authorInfo","getAdminMessageRequest","onUpdateSuccess","DetailAuthor","goBackURL","isNotFoundResult","href","publisherInfo","viewBook","goBackId","requestId","ViewAuthorBook","AddCategory","UpdateCategory","DetailCategory","ViewCategoryBook","UpdateBook","bookInfo","messageUpdate","DetailBook","quantity","rate","rateCount","AddPublisher","publisherCode","DetailPublisher","ViewPublisherBook","ViewBook","overrideWindow","GroupPermissionAPI","getAllGroup","addGroup","deleteGroups","getGroup","updateGroup","getAllPermissionInGroup","PermissionAPI","getAllPermission","addPermission","deletePermissions","getPermission","updatePermission","UpdateGroupInfo","groupInfo","UpdateGroupPermission","groupId","per","DetailGroupPermission","viewGroup","ViewGroupPermission","permission","AddPermission","permissionCode","setInputOnChange","UpdatePermission","inputValidPermissionCode","permissionInfo","DetailPermission","renderMenu","ViewPermission","view","add","detail","group","routeComponent","AdminPage","isClearWindow","adminHeader","isHideScroll","position","addClass","lastIndex","App","render","NotFound","ReactDOM","StrictMode","getElementById","Date","getTime","removeAllRanges","loginDefault","accs","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.78bbca41.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","\r\nimport React from 'react';\r\n\r\nexport const ScreenContext = React.createContext<IContextState>(undefined as any);\r\n\r\ninterface IContextState {\r\n    screenInnerWidth: number,\r\n\r\n}\r\n\r\nexport default class ScreenProvider extends React.Component<{}, IContextState>{\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            screenInnerWidth: window.innerWidth,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => {\r\n            this.setState(state => { return { screenInnerWidth: window.innerWidth } });\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <ScreenContext.Provider value={this.state}>\r\n                {this.props.children}\r\n            </ScreenContext.Provider>\r\n        )\r\n    }\r\n}","import axios from 'axios';\r\nimport queryString from 'query-string';\r\n\r\nconst axiosClient = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    },\r\n    paramsSerializer: (params) => { return queryString.stringify(params) }\r\n});\r\n\r\naxiosClient.interceptors.request.use((config) => {\r\n    config.headers['Authorization'] = localStorage.token;\r\n    console.log(config);\r\n    return config;\r\n});\r\n\r\naxiosClient.interceptors.response.use((resp) => {\r\n    console.log('result', resp);\r\n    try {\r\n        switch (resp.data.message.code) {\r\n            case 0:\r\n                return resp.data;\r\n            default:\r\n                throw resp.data;\r\n        }\r\n    } catch (error) {\r\n        throw resp.data;\r\n    }\r\n\r\n}, (error) => {\r\n    console.log('error', error);\r\n    throw error;\r\n});\r\n\r\nexport default axiosClient;","\r\nimport React from 'react';\r\nimport authentication from '../admin-auth';\r\n\r\nexport const AdminAuthentication = React.createContext<AdminAuthenticationState>(undefined as any);\r\n\r\ninterface AdminAuthenticationState {\r\n    isLogin: boolean\r\n}\r\n\r\nexport let setLoginContext: (isLogin: boolean) => any;\r\nexport default class AdminAuthenticationProvider extends React.Component<{}, AdminAuthenticationState>{\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            isLogin: authentication.isLogin(),\r\n        }\r\n        setLoginContext = (isLogin) => { this.setState({ isLogin: isLogin }) };\r\n    }\r\n    render() {\r\n        return (\r\n            <AdminAuthentication.Provider value={\r\n                { isLogin: this.state.isLogin }\r\n            }>\r\n                {this.props.children}\r\n            </AdminAuthentication.Provider>\r\n        )\r\n    }\r\n}","import axiosClient from \"../axiosCient\";\r\nimport { APIResult } from \"../declare\";\r\nimport { GroupPermissionAPIResult } from \"./group-api\";\r\n\r\nconst AdminUserAPI = {\r\n    login: (data: { email?: string, username?: string, password: string }) => {\r\n        return axiosClient.post('/admin/login', data);\r\n    },\r\n    logout: () => {\r\n        return axiosClient.get('/admin/logout');\r\n    },\r\n    getAllUser: (pageInfo: { page: number, limit: number, isUnlimited?: boolean }): Promise<APIResult<AdminUserResult, {\r\n        \"offset\": number,\r\n        \"totalPage\": number,\r\n        \"page\": number,\r\n        \"totalRecord\": number\r\n    }>> => {\r\n        return axiosClient.get('/admin/admin-users', { params: pageInfo });\r\n    },\r\n    addUser: (data: AdminDTO) => {\r\n        return axiosClient.post('/admin/admin-user', data);\r\n    },\r\n    deleteUsers: (ids: (number | string)[]) => {\r\n        return axiosClient.delete('/admin/admin-users', { data: { ids: ids } });\r\n    },\r\n    uploadAvatar: (data: { image: File, id: number }) => {\r\n        let formData = new FormData();\r\n        formData.append('id', data.id as any);\r\n        formData.append('image', data.image as any);\r\n        return axiosClient.put('/admin/admin-user/upload-avatar', formData, {\r\n            headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n    },\r\n    editUser: (data: AdminDTO) => {\r\n        return axiosClient.put('/admin/admin-user', data);\r\n    },\r\n    getUser: (data: { id: any, adminCode: string }): Promise<APIResult<AdminUserResult>> => {\r\n        return axiosClient.get('/admin/admin-user', { params: data });\r\n    },\r\n    updateUser: (data: AdminDTO): Promise<APIResult> => {\r\n        return axiosClient.put('/admin/admin-user', data);\r\n    },\r\n    getAdminPermissions: (userId: number): Promise<APIResult<AdminPermissionsResult[]>> => {\r\n        return axiosClient.get('/admin/admin-user/permissions', { params: { id: userId } });\r\n    },\r\n    updateAdminPermissions: (userId: number, permissionsIds: number[]) => {\r\n        return axiosClient.put('/admin/admin-user/permissions', {\r\n            userId: userId,\r\n            permissionIds: permissionsIds\r\n        })\r\n    },\r\n    resetPasswordUser: (userId: number, password: string) => {\r\n        return axiosClient.put('/admin/admin-user/reset-password', {userId: userId, password: password});\r\n    },\r\n    getAllGroups: (userId: number)=>{\r\n        return axiosClient.get('/admin/admin-user/groups', {params: {id: userId}});\r\n    },\r\n    updateAdminGroups: (data: {adminId: number, groupIds: number[]})=>{\r\n        return axiosClient.put('/admin/admin-user/groups', data);\r\n    }\r\n}\r\nexport default AdminUserAPI;\r\n\r\nexport interface AdminUserResult {\r\n    \"adminCode\": string,\r\n    \"fullname\": string,\r\n    \"address\": string,\r\n    \"gender\": number,\r\n    \"createDate\": string\r\n    \"createBy\": string,\r\n    \"dateOfBirth\": string,\r\n    \"phone\": string,\r\n    \"email\": string,\r\n    \"status\": number,\r\n    \"identityDocument\": string,\r\n    \"modifiedDate\": string,\r\n    \"modifiedBy\": string,\r\n    \"id\": number,\r\n}\r\n\r\nexport interface AdminDTO {\r\n    id?: string\r\n    adminCode?: string\r\n    fullname?: string\r\n    identityDocument?: string\r\n    email?: string\r\n    gender?: string\r\n    address?: string\r\n    phone?: string\r\n    dateOfBirth?: string\r\n    password?: string\r\n}\r\nexport interface AdminPermissionsResult {\r\n    \"isAllow\": boolean,\r\n    \"method\": string,\r\n    \"code\": string,\r\n    \"description\": string,\r\n    \"name\": string,\r\n    \"api\": string,\r\n    \"id\": number\r\n}\r\nexport interface AdminGroupAPIResult extends GroupPermissionAPIResult{\r\n    isAllow?: boolean\r\n}","import AdminUserAPI from \"./api/admin/admin-api\";\r\nimport { setLoginContext } from \"./contexts/admin-authencation\";\r\n\r\nconst authentication = {\r\n    login: (token: string, admin: any) => {\r\n        localStorage.setItem('admin', JSON.stringify(admin));\r\n        localStorage.setItem('token', token);\r\n        setLoginContext(true);\r\n    },\r\n    logout: async () => {\r\n        localStorage.removeItem('admin');\r\n        let token = localStorage.token;\r\n        if (token) {\r\n            try{\r\n                await AdminUserAPI.logout();\r\n            }catch(e){}\r\n        }\r\n        localStorage.removeItem('token');\r\n        if(window.location.pathname !== '/admin/logout'){\r\n            setLoginContext(false);\r\n        };\r\n    },\r\n    isLogin: (): boolean => {\r\n        if (!localStorage.token) {\r\n            localStorage.removeItem('admin');\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n\r\n    }\r\n};\r\n\r\nexport default authentication;","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport ViewCategoryBook from \"../pages/admin/book/category/view\";\r\nimport ViewBook from \"../pages/admin/book/view-book\";\r\nimport ViewPermission from \"../pages/admin/permission/view-permission\";\r\nexport class ac extends React.Component { }\r\n\r\nconst Utils = {\r\n    formToJson: (formData: FormData) => {\r\n        let result: any = {};\r\n        for (let [name, value] of (formData.entries() as any)) {\r\n            if (result.hasOwnProperty(name)) {\r\n                if (result[name] instanceof Array) {\r\n                    result[name].push(value);\r\n                } else {\r\n                    result[name] = [result[name], value];\r\n                }\r\n            } else {\r\n                result[name] = value;\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    viewImageFromInputFileE: (inputTarget: HTMLInputElement, viewTarget: HTMLImageElement) => {\r\n        const file = inputTarget.files && inputTarget.files[0]\r\n\r\n        if (!file) return\r\n        let reader = new FileReader();\r\n        reader.onload = ({ target }) => {\r\n            viewTarget.src = target?.result as any;\r\n        };\r\n        reader.readAsDataURL(file);\r\n\r\n        return file\r\n    },\r\n    modelListToObject: (list: any[], idField: string = 'id') => {\r\n        return list.reduce((acc: any, cur: any) => ({ ...acc, [cur[idField]]: cur }), {})\r\n    },\r\n    lostFocus: () => {\r\n        $('#lost-focus').focus();\r\n    },\r\n    waitPromise: (time: number) => new Promise((resolve) => setTimeout(resolve, time)),\r\n    preventSetStateWhenComponentUnmount: (component: any) => {\r\n        const setState = component.setState\r\n        const unmount = component.componentWillUnmount\r\n        component.__isMounted = true\r\n        component.componentWillUnmount = function () {\r\n            this.__isMounted = false\r\n            console.log(this.prototype)\r\n            unmount && unmount()\r\n        }\r\n        component.setState = function (...args: any) {\r\n            if (this.__isMounted) setState.apply(this, args)\r\n        }\r\n    },\r\n    getPageRequest: (pageDefault: { page: number, limit: number } = { page: 1, limit: 10 }) => {\r\n        let search = new window.URLSearchParams(window.location.search as any);\r\n        let page: number = Number.parseInt(search.get('page') as any)\r\n        if (!Number.isInteger(page)) page = pageDefault.page;\r\n        let limit: number = Number.parseInt(search.get('limit') as any)\r\n        if (!Number.isInteger(limit)) limit = pageDefault.limit;\r\n        return { page: page, limit: limit }\r\n    },\r\n    mapValue: (() => {\r\n        let vnMap = { 'á': 'a', 'à': 'a', 'ả': 'a', 'ã': 'a', 'ạ': 'a', 'ă': 'a', 'ắ': 'a', 'ằ': 'a', 'ẳ': 'a', 'ẵ': 'a', 'ặ': 'a', 'â': 'a', 'ấ': 'a', 'ầ': 'a', 'ẩ': 'a', 'ẫ': 'a', 'ậ': 'a', 'é': 'e', 'è': 'e', 'ẻ': 'e', 'ẽ': 'e', 'ẹ': 'e', 'ê': 'e', 'ế': 'e', 'ề': 'e', 'ể': 'e', 'ễ': 'e', 'ệ': 'e', 'í': 'i', 'ì': 'i', 'ỉ': 'i', 'ĩ': 'i', 'ị': 'i', 'ó': 'o', 'ò': 'o', 'ỏ': 'o', 'õ': 'o', 'ọ': 'o', 'ô': 'o', 'ố': 'o', 'ồ': 'o', 'ổ': 'o', 'ỗ': 'o', 'ộ': 'o', 'ú': 'u', 'ù': 'u', 'ủ': 'u', 'ũ': 'u', 'ụ': 'u', 'ư': 'u', 'ứ': 'u', 'ừ': 'u', 'ử': 'u', 'ữ': 'u', 'ự': 'u', 'ý': 'y', 'ỳ': 'y', 'ỷ': 'y', 'ỹ': 'y', 'ỵ': 'y' };\r\n        let mapLowCase: any = {};\r\n        let specialCharacter = { '_': ' ', '-': ' ' };\r\n        for (let i = 97; i < 123; i++) {\r\n            mapLowCase[String.fromCharCode(i - 32)] = String.fromCharCode(i);\r\n        }\r\n        return { ...vnMap, ...mapLowCase, ...specialCharacter };\r\n    })(),\r\n    filterString: (value: string, getText: (value: any) => string) => {\r\n        // Chuyển dữ liệu để không phải so sánh 2 lần\r\n        let textArray = value.toLowerCase().split('').map((value) => {\r\n            let newVal = Utils.mapValue[value];\r\n            if (newVal) { return newVal; }\r\n            return value;\r\n        });\r\n        let length = value.length;\r\n\r\n        return function (data: any) {\r\n            let countIndex = 0;\r\n            let nextChar = textArray[countIndex];\r\n            for (let char of getText(data)) {\r\n                if (countIndex !== length) {\r\n                    if (nextChar === char || Utils.mapValue[char] === nextChar) {\r\n                        nextChar = textArray[++countIndex];\r\n                    }\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            return countIndex === length;\r\n        }\r\n    },\r\n    randomString: (length: number = 10): string => {\r\n        let result = '';\r\n        let characters = 'abcdefghijklmnopqrstuvwxyz';\r\n        let charactersLength = characters.length;\r\n        for (let i = 0; i < length; i++) {\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    },\r\n    nextClick: (callback: () => any) => {\r\n        document.addEventListener('click', getEventClickOneTime())\r\n        function getEventClickOneTime() {\r\n            const evt = () => {\r\n                document.removeEventListener('click', evt)\r\n                callback()\r\n            }\r\n            return evt;\r\n        }\r\n    },\r\n    renderRoute: (configRoute: RouteRender) => {\r\n        const childs = []\r\n        for (let path in configRoute) {\r\n            childs.push(renderSwitch(configRoute[path], '/' + path.replace(/\\./g, '/')))\r\n        }\r\n        return React.createElement(Switch, null, childs)\r\n\r\n        function renderSwitch(config: RouteRender, parentPath: string): any {\r\n            const output = []\r\n            const routes = []\r\n            const getPath = (parent: string, path: string) => `${parent}/${path.replace(/\\./g, '/')}`\r\n            const { __component, __isExact, __children } = config\r\n            let parentRoute\r\n            if (__component || __children) {\r\n                parentRoute = React.createElement(Route, {\r\n                    path: parentPath,\r\n                    component: __component as any,\r\n                    exact: __isExact as any,\r\n                    children: __children,\r\n                    key: parentPath\r\n                })\r\n\r\n                if (__isExact)\r\n                    return parentRoute\r\n            }\r\n\r\n            for (let path in config) {\r\n                if (path === '__component' || path === '__isExact' || path === '__children') continue\r\n                routes.push(renderSwitch(config[path], getPath(parentPath, path)))\r\n            }\r\n\r\n            if (routes.length === 0) {\r\n                if (!parentRoute) return null\r\n                return parentRoute\r\n            }\r\n\r\n            if (parentRoute) routes.push(parentRoute)\r\n\r\n            output.push(\r\n                React.createElement(Route,\r\n                    {\r\n                        path: parentPath,\r\n                        children: React.createElement(Switch, null, routes)\r\n                    }))\r\n            return output\r\n\r\n        }\r\n    },\r\n    setToArray: function <K>(data: Set<K>): K[] {\r\n        let result = new Array(data.size);\r\n        let index = 0;\r\n        for (let value of data as any) {\r\n            result[index++] = value;\r\n        }\r\n        return result;\r\n    },\r\n}\r\nexport default Utils;\r\nexport interface RouteRender {\r\n    [path: string]: RouteRenderChild\r\n}\r\ninterface RouteRenderChild {\r\n    __component?: React.ComponentType<any>\r\n    __children?: JSX.Element\r\n    __isExact?: any\r\n    [path: string]: RouteRender | any\r\n}\r\n\r\n","import React from \"react\";\r\nimport Utils from \"../common/Utils\";\r\ninterface WFormProps extends React.FormHTMLAttributes<HTMLFormElement> {\r\n\r\n}\r\nexport default class WForm extends React.Component<WFormProps> {\r\n    formRef: React.RefObject<HTMLFormElement> = React.createRef();\r\n    isValidInputs() {\r\n        let winputInvalidBar = $('.invalid', (this.formRef.current as any))[0];\r\n        if (winputInvalidBar) {\r\n            $(winputInvalidBar.parentElement as HTMLElement).children('input').focus();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    setData<T>(data: T, otherValue?: { [name: string]: (data: T) => any }) {\r\n        const getValue: any = typeof otherValue === 'object'\r\n            ? (name: string) => { if (otherValue[name]) return otherValue[name](data) }\r\n            : () => undefined\r\n        if (data instanceof Object) {\r\n            for (let key in data) {\r\n                const input: JQuery<HTMLInputElement> = $(`[name=\"${key}\"]`, this.formRef.current as any);\r\n                const value: any = getValue(key) || data[key];\r\n                if (input.length > 0) {\r\n                    switch (input.attr('type')) {\r\n                        case 'radio':\r\n                            for (let radio of (input as any)) {\r\n                                if (radio.value == value) {\r\n                                    radio.checked = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            break;\r\n                        case 'checkbox':\r\n                            if (value instanceof Array) {\r\n                                for (let v of value) {\r\n                                    let checkbox = $(`[name=\"${key}\"][value=\"${v}\"]`, this.formRef.current as any);\r\n                                    checkbox[0] && ((checkbox[0] as any).checked = true)\r\n                                }\r\n                            }\r\n                            break;\r\n                        default:\r\n                            input[0].value = value;\r\n                            input[0].focus();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Utils.lostFocus();\r\n    }\r\n    getData() {\r\n        return Utils.formToJson(new FormData(this.formRef.current as any));\r\n    }\r\n    render() {\r\n        return React.createElement('form', {\r\n            ... this.props, onSubmit: (evt) => {\r\n                let winputInvalidBar = $('.invalid', evt.currentTarget)[0];\r\n                if (winputInvalidBar) {\r\n                    evt.preventDefault();\r\n                    $(winputInvalidBar.parentElement as HTMLElement).children('input').focus();\r\n                } else {\r\n                    this.props.onSubmit && this.props.onSubmit(evt);\r\n                }\r\n            },\r\n            ref: this.formRef\r\n        });\r\n    }\r\n}","import React from \"react\";\r\nimport { Spring } from 'react-spring/renderprops';\r\nimport './winput.scss';\r\n\r\ninterface WInputProps extends React.HTMLProps<HTMLInputElement> {\r\n    title_input: string,\r\n    is_invalid?: boolean,\r\n    no_title_animation?: boolean,\r\n}\r\nexport default class WInput extends React.Component<WInputProps, { inputValid: boolean, isFocusOut: boolean }> {\r\n    static config = {\r\n        durian: 80,\r\n        cssConfig: {\r\n            inputFontSize: 15,\r\n            smallLabelSize: 12,\r\n            labelInvalidLocation: 28,\r\n            labelValidLocation: 28 - 12 - 8 - 6\r\n        }\r\n    }\r\n    otherValid: boolean;\r\n    input: React.RefObject<HTMLInputElement>;\r\n    constructor(props: WInputProps) {\r\n        super(props);\r\n        this.state = {\r\n            inputValid: props.value ? true : false,\r\n            isFocusOut: true\r\n        };\r\n        this.input = React.createRef();\r\n        this.otherValid = false;\r\n    }\r\n    setValid(value: any) {\r\n        this.setState({ inputValid: value ? true : false });\r\n    }\r\n    shouldComponentUpdate(nextProps: any) {\r\n        if (this.props !== nextProps) {\r\n            this.otherValid = nextProps.value ? true : false;\r\n        } else {\r\n            this.otherValid = false;\r\n        }\r\n        return true;\r\n    }\r\n    render() {\r\n        let { inputValid, isFocusOut } = this.state;\r\n        inputValid = inputValid || this.otherValid;\r\n        let isValidInput = this.props[\"is_invalid\"];\r\n        let { config } = WInput;\r\n        let { cssConfig } = config;\r\n        let onFocusEvt = () => {\r\n            this.setState({ inputValid: true, isFocusOut: false });\r\n        }\r\n        let onBlurEvt = (evt: any) => {\r\n            this.setState({ inputValid: evt.currentTarget.value.length !== 0, isFocusOut: true })\r\n        }\r\n\r\n        let inputProps = {\r\n            ... this.props,\r\n            ... { is_invalid: null, no_title_animation: null, title_input: null },\r\n            style: (isValidInput || !isFocusOut) ? { border: 'none' } : null,\r\n            value: this.props.value,\r\n            ref: this.input,\r\n            onFocus: this.props.onFocus instanceof Function\r\n                ? (evt: any) => { onFocusEvt(); (this.props.onFocus as any)(evt); } : onFocusEvt,\r\n            onBlur: this.props.onBlur instanceof Function\r\n                ? (evt: any) => { onBlurEvt(evt); (this.props.onBlur as any)(evt); } : onBlurEvt\r\n        };\r\n        return (\r\n            <div className=\"winput-group\" style={this.props.style}>\r\n                {\r\n                    React.createElement('input', inputProps)\r\n                }\r\n                <Spring from={{ size: isFocusOut ? 0 : 60 }} reverse={true} config={{ duration: config.durian }}>\r\n                    {({ size }) => <div key=\"1\" className={'bar' + (isValidInput ? ' invalid' : '')}\r\n                        style={isValidInput ? { width: '100%' } : { width: isFocusOut ? 0 : `${size + 40}%`, left: `${30 - (size / 2)}%` }}>\r\n                    </div>}\r\n                </Spring>\r\n                <Spring from={inputValid || this.props[\"no_title_animation\"] ?\r\n                    { fontSize: cssConfig.smallLabelSize, top: cssConfig.labelValidLocation }\r\n                    : { fontSize: cssConfig.inputFontSize, top: cssConfig.labelInvalidLocation }\r\n                } reverse={true} config={{ duration: config.durian }}>\r\n                    {(props) => <label key=\"2\" style={props} className={isFocusOut ? '' : 'focus'}>{this.props[\"title_input\"]}</label>}\r\n                </Spring>\r\n\r\n            </div >\r\n\r\n        )\r\n    }\r\n}\r\n\r\ninterface WInputOtherProps {\r\n    title_input: string\r\n}\r\nexport class WInputOther extends React.Component<WInputOtherProps, any>{\r\n    render() {\r\n        return <div className=\"winput-group-other\">\r\n            {this.props.children}\r\n            <label>{this.props.title_input}</label>\r\n            <div className=\"bar\"></div>\r\n        </div>\r\n    }\r\n}","\r\nconst SYSTEM_CONSTANTS = {\r\n    ERROR_REQUEST: {\r\n        PERMISSION_NOT_ALLOW: -2,\r\n        PAGE_OUT_INDEX: 2,\r\n        FAILED: 1\r\n    },\r\n    // eslint-disable-next-line\r\n    REGEX: {\r\n        code: /^[a-zA-Z0-9]+([._]?[a-zA-Z0-9]+)*$/g,\r\n        email: /^[a-z][a-z0-9_\\.]{5,32}@[a-z0-9]{2,}(\\.[a-z0-9]{2,4}){1,2}$/g,\r\n        numbers: /^[0-9]*$/g\r\n    },\r\n    ALERT_STATUS_PROPS: {\r\n        NETWORK_ERROR: {children: 'Kết nối hỏng', className: 'alert alert-danger'},\r\n        REQUEST_INVALID: {children: 'Thông tin gửi không hợp lệ', className: 'alert alert-danger'},\r\n        WAIT_REQUEST: {children: 'Đang xử lí', className: 'alert alert-success loading-text'},\r\n        REQUEST_SUCCESS: {children: 'Đã xong!', className: 'alert alert-success'},\r\n    }\r\n}\r\n\r\nexport default SYSTEM_CONSTANTS;","import React from 'react';\r\n\r\nconst LoadingSVG = (props: any) => {\r\n    return (\r\n        <svg style={props.style} className={props.className} id={props.id} xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 489.711 489.711\" xmlSpace=\"preserve\">\r\n            <g>\r\n                <g>\r\n                    <path d=\"M112.156,97.111c72.3-65.4,180.5-66.4,253.8-6.7l-58.1,2.2c-7.5,0.3-13.3,6.5-13,14c0.3,7.3,6.3,13,13.5,13    c0.2,0,0.3,0,0.5,0l89.2-3.3c7.3-0.3,13-6.2,13-13.5v-1c0-0.2,0-0.3,0-0.5v-0.1l0,0l-3.3-88.2c-0.3-7.5-6.6-13.3-14-13    c-7.5,0.3-13.3,6.5-13,14l2.1,55.3c-36.3-29.7-81-46.9-128.8-49.3c-59.2-3-116.1,17.3-160,57.1c-60.4,54.7-86,137.9-66.8,217.1    c1.5,6.2,7,10.3,13.1,10.3c1.1,0,2.1-0.1,3.2-0.4c7.2-1.8,11.7-9.1,9.9-16.3C36.656,218.211,59.056,145.111,112.156,97.111z\" />\r\n                    <path d=\"M462.456,195.511c-1.8-7.2-9.1-11.7-16.3-9.9c-7.2,1.8-11.7,9.1-9.9,16.3c16.9,69.6-5.6,142.7-58.7,190.7    c-37.3,33.7-84.1,50.3-130.7,50.3c-44.5,0-88.9-15.1-124.7-44.9l58.8-5.3c7.4-0.7,12.9-7.2,12.2-14.7s-7.2-12.9-14.7-12.2l-88.9,8    c-7.4,0.7-12.9,7.2-12.2,14.7l8,88.9c0.6,7,6.5,12.3,13.4,12.3c0.4,0,0.8,0,1.2-0.1c7.4-0.7,12.9-7.2,12.2-14.7l-4.8-54.1    c36.3,29.4,80.8,46.5,128.3,48.9c3.8,0.2,7.6,0.3,11.3,0.3c55.1,0,107.5-20.2,148.7-57.4    C456.056,357.911,481.656,274.811,462.456,195.511z\" />\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default LoadingSVG;","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport authentication from \"../../admin-auth\";\r\nimport AdminUserAPI from \"../../api/admin/admin-api\";\r\nimport WForm from \"../../components/wform\";\r\nimport WInput from \"../../components/winput\";\r\nimport SYSTEM_CONSTANTS from \"../../constants\";\r\nimport AdminAuthenticationProvider, { AdminAuthentication } from \"../../contexts/admin-authencation\";\r\nimport LoadingSVG from \"../../logo-svg/loading\";\r\nimport './admin-login.scss';\r\ninterface LoginPageState {\r\n    statusLogin: string | undefined,\r\n    accountInput: string,\r\n    passwordInput: string,\r\n    userInputType: {\r\n        paramName: 'username' | 'email',\r\n        name: string | undefined\r\n    }\r\n    isWattingRequest: boolean\r\n}\r\n\r\nexport default class LoginPage extends React.Component<any, LoginPageState> {\r\n    accountType: 'username' | 'email' | undefined = undefined;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            statusLogin: undefined,\r\n            accountInput: '',\r\n            passwordInput: '',\r\n            userInputType: {} as any,\r\n            isWattingRequest: false\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        $('#username-input').focus();\r\n    }\r\n    userTypeOnChange(evt: React.FormEvent<HTMLInputElement>) {\r\n        let inputText = evt.currentTarget.value;\r\n        if (inputText.match(SYSTEM_CONSTANTS.REGEX.email)) {\r\n            this.setState({ accountInput: inputText, userInputType: { paramName: 'email', name: 'Email' } });\r\n        } else if (inputText.match(SYSTEM_CONSTANTS.REGEX.code)) {\r\n            this.setState({ accountInput: inputText, userInputType: { paramName: 'username', name: 'Tên đăng nhập' } });\r\n        } else {\r\n            this.setState({ accountInput: inputText, userInputType: {} as any });\r\n        }\r\n    }\r\n    async onSubmit(evt: React.FormEvent<HTMLFormElement>) {\r\n        evt.preventDefault();\r\n        if (this.state.userInputType.paramName) {\r\n            await new Promise(async (resolve) => {\r\n                let statusLoginCompelete: any;\r\n                let isSkipTimeout = false;\r\n                let setCompelete = (statusLogin: string) => {\r\n                    this.setState(() => { return { statusLogin: statusLogin, isWattingRequest: false } });\r\n                }\r\n\r\n                setTimeout(() => {\r\n                    if (statusLoginCompelete) setCompelete(statusLoginCompelete);\r\n                    isSkipTimeout = true;\r\n                }, 1000);\r\n\r\n                this.setState(() => { return { statusLogin: 'wait-login', isWattingRequest: true } });\r\n                try {\r\n                    let resp = await AdminUserAPI.login({\r\n                        [this.state.userInputType.paramName]: this.state.accountInput,\r\n                        password: this.state.passwordInput\r\n                    });\r\n                    authentication.login(resp.data.token, resp.data.data);\r\n                } catch (error) {\r\n                    if (isSkipTimeout)\r\n                        setCompelete('login-failed');\r\n                    else\r\n                        statusLoginCompelete = 'login-failed';\r\n                }\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        let { accountInput, passwordInput, isWattingRequest } = this.state;\r\n        return <AdminAuthenticationProvider>\r\n            <AdminAuthentication.Consumer>\r\n                {({ isLogin }) => {\r\n                    return !isLogin\r\n                        ? (<div style={{ padding: '20px' }}>\r\n                            <WForm id='login-form' className='d-flex flex-column' onSubmit={this.onSubmit.bind(this)}>\r\n                                <h2 className='text-center'>Đăng Nhập</h2>\r\n                                <WInput\r\n                                    type=\"text\" required\r\n                                    title_input={this.state.userInputType.name || 'Tên đăng nhập hoặc Email'}\r\n                                    is_invalid={this.state.userInputType.name === undefined}\r\n                                    value={accountInput}\r\n                                    onChange={this.userTypeOnChange.bind(this)} disabled={isWattingRequest}\r\n                                    id=\"username-input\"\r\n                                ></WInput>\r\n                                <WInput title_input='Mật khẩu' type=\"password\" required\r\n                                    value={passwordInput}\r\n                                    onChange={(evt) => {\r\n                                        this.setState({ passwordInput: evt.currentTarget.value });\r\n                                    }}\r\n                                    disabled={isWattingRequest}\r\n                                ></WInput>\r\n                                <div className='status-login'>\r\n                                    {(() => {\r\n                                        let output;\r\n                                        switch (this.state.statusLogin) {\r\n                                            case 'wait-login':\r\n                                                output = <div className='d-inline-flex align-items-center'><LoadingSVG className='spin' style={{ marginRight: '8px', height: '14px' }} /><span className='loading-text'>Đang đăng nhập</span></div>;\r\n                                                break;\r\n                                            case 'login-failed':\r\n                                                output = <span className='text-danger'>Đăng nhập thất bại</span>;\r\n                                                break;\r\n                                            case 'input-wrong':\r\n                                                output = <span className='text-danger'>Vui lòng nhập thông tin chính xác</span>\r\n                                                break;\r\n                                        }\r\n                                        return output;\r\n                                    })()}\r\n                                </div>\r\n                                <button className='btn btn-success' disabled={isWattingRequest}>Đăng Nhập</button>\r\n                            </WForm>\r\n                        </div>)\r\n                        : <Redirect to=\"/admin\" />\r\n                }}\r\n            </AdminAuthentication.Consumer>\r\n        </AdminAuthenticationProvider>\r\n    }\r\n}","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport authentication from \"../../admin-auth\";\r\n\r\nexport default class AdminLogout extends React.Component<any, any>{\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            redirect: false\r\n        }\r\n    }\r\n    async componentDidMount() {\r\n        await authentication.logout();\r\n        this.setState({redirect: true});\r\n    }\r\n    render() {\r\n        return this.state.redirect ? <Redirect to=\"/admin/login\"></Redirect> : <div>Logout ...</div>;\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport const AdminOverrideWindow = React.createContext<AdminOverrideWindowState>(undefined as any);\r\ninterface AdminOverrideWindowState {\r\n    addWindow: (window: JSX.Element) => JSX.Element,\r\n    removeWindow: (window: JSX.Element) => void,\r\n    clear: () => void,\r\n    getWindows: () => JSX.Element[]\r\n}\r\nexport default class AdminOverrideWindowProvider extends React.Component<{}, AdminOverrideWindowState> {\r\n    windows: JSX.Element[] = [];\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            addWindow: (window) => {\r\n                const index = this.windows.indexOf(window)\r\n                if (index !== -1) return null as any\r\n                this.windows.push(window)\r\n                this.setState({})\r\n                return window;\r\n            },\r\n            removeWindow: (window) => {\r\n                const { windows } = this\r\n                let index = windows.indexOf(window)\r\n                if (index !== -1) windows[index] = null as any\r\n                let indexClear = windows.length\r\n                while (true) {\r\n                    if (windows[--indexClear] !== null as any) break;\r\n                }\r\n                this.windows = windows.slice(0, indexClear + 1)\r\n                this.setState({})\r\n            },\r\n            clear: () => { this.windows = []; this.setState({}) },\r\n            getWindows: () => [... this.windows]\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <AdminOverrideWindow.Provider\r\n                value={{ ... this.state, ...this.windows }}>\r\n                {this.props.children}\r\n            </AdminOverrideWindow.Provider>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport { Dropdown } from \"reactstrap\";\r\n\r\ninterface propsDropdownCustom {\r\n    dropdownToggle: JSX.Element\r\n    dropdownMenu: JSX.Element;\r\n}\r\nexport default class WDropdown extends React.Component<propsDropdownCustom, { isOpen: boolean }>{\r\n    constructor(props: Readonly<propsDropdownCustom>) {\r\n        super(props);\r\n        this.state = { isOpen: false };\r\n    }\r\n    render() {\r\n        return <Dropdown isOpen={this.state.isOpen} toggle={() => { this.setState((state) => { return { isOpen: !this.state.isOpen } }) }}>\r\n            {this.props.dropdownToggle}\r\n            {this.props.dropdownMenu}\r\n        </Dropdown>\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport default function MenuSVG(props: React.SVGProps<SVGSVGElement>) {\r\n    return React.createElement('svg', { ... props, xmlns: 'http://www.w3.org/2000/svg', viewBox: '0 -53 384 384'},\r\n        <g>\r\n            <path d=\"m368 154.667969h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0\" />\r\n            <path d=\"m368 32h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0\" />\r\n            <path d=\"m368 277.332031h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0\" />\r\n        </g>\r\n    );\r\n}","import React from 'react';\r\nimport WDropdown from '../../components/wdropdown';\r\nimport { DropdownToggle, DropdownItem, DropdownMenu, Button } from 'reactstrap';\r\nimport { ScreenContext } from '../../contexts/screen-context';\r\nimport authentication from '../../admin-auth';\r\nimport MenuSVG from '../../logo-svg/menu';\r\nimport MenuTab from './menu-tab';\r\nimport { AdminUserResult } from '../../api/admin/admin-api';\r\n\r\nexport default class AdminHeader extends React.Component<{ minScreenResizeMenuTab: number }> {\r\n    isSmallScreen = true;\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    toggleMenu() {\r\n        $('#menu-tab').toggleClass('is-display');\r\n    }\r\n    render() {\r\n        const size = 30;\r\n        let userInfo = ((): AdminUserResult => {\r\n            try {\r\n                return JSON.parse(window.localStorage['admin']);\r\n            } catch (error) {\r\n                return {} as any;\r\n            }\r\n        })();\r\n        return <header className=\"d-flex align-items-center space-sm\">\r\n            <ScreenContext.Consumer>\r\n                {({ screenInnerWidth }) => {\r\n                    if (screenInnerWidth >= this.props.minScreenResizeMenuTab) {\r\n                        $('#menu-tab').removeClass('is-display');\r\n                        this.isSmallScreen = false;\r\n                    } else {\r\n                        this.isSmallScreen = true;\r\n                    }\r\n                    return null;\r\n                }}\r\n            </ScreenContext.Consumer>\r\n            <Button size=\"sm\" className=\"mr-3\" onClick={this.toggleMenu.bind(this)}\r\n                id=\"show-menu\"><MenuSVG className=\"px-1\" height=\"18px\" fill=\"white\" /></Button>\r\n            <div className=\"mr-auto\">Admin Page</div>\r\n            <WDropdown\r\n                dropdownToggle={\r\n                    <DropdownToggle color=\"primary\" size=\"sm\" className=\"d-flex space-nm\" style={{\r\n                        borderRadius: 0,\r\n                        height: 35,\r\n                        padding: '2px 8px'\r\n                    }}>\r\n                        <span className=\"d-none d-sm-block\" style={{\r\n                            fontSize: 15,\r\n                            fontWeight: 600,\r\n                            color: \"white\",\r\n                            lineHeight: `${size}px`\r\n                        }}>{userInfo.fullname}</span>\r\n                        <img style={{\r\n                            width: size,\r\n                            height: size,\r\n                            borderRadius: 999,\r\n                            boxShadow: '0 0 9px #888'\r\n                        }}\r\n                            src={`${process.env.REACT_APP_ADMIN_USER_IMAGE_PATH}${userInfo.id}.jpg`}\r\n                            onError={() => { return `${process.env.REACT_APP_ADMIN_USER_IMAGE_PATH}default.jpg` }}\r\n                        />\r\n                    </DropdownToggle>\r\n                }\r\n                dropdownMenu={\r\n                    <DropdownMenu right>\r\n                        <DropdownItem>Tài khoản của bạn</DropdownItem>\r\n                        <DropdownItem onClick={() => { authentication.logout() }}>Đăng xuất</DropdownItem>\r\n                    </DropdownMenu>\r\n                }\r\n            ></WDropdown>\r\n        </header>;\r\n    }\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AdminHeader from \"./admin-header\";\r\n\r\ninterface MenuItem {\r\n    content: JSX.Element | string,\r\n    hrefLink?: string\r\n}\r\ninterface MenuType {\r\n    items: (MenuType | MenuItem)[]\r\n    content: JSX.Element | string\r\n}\r\ninterface MenuTabProps {\r\n    menu: (MenuType | MenuItem)[],\r\n    getAdminHeader: () => AdminHeader\r\n}\r\ninterface MenuTabState { }\r\nlet count = 0;\r\n\r\nexport default class MenuTab extends React.Component<MenuTabProps, MenuTabState> {\r\n    renderItem(itemMenu: MenuType | MenuItem): JSX.Element {\r\n        if ((itemMenu as Object).hasOwnProperty('items')) {\r\n            return <li key={++count}>\r\n                <MenuDropDown title={(itemMenu as MenuType).content}>\r\n                    {(itemMenu as MenuType).items.map(item => { return this.renderItem(item) })}\r\n                </MenuDropDown>\r\n            </li >;\r\n        } else {\r\n            return <li key={++count}>\r\n                <Link to={(itemMenu as MenuItem).hrefLink ?? '#'} onClick={() => {\r\n                    if (this.props.getAdminHeader().isSmallScreen) {\r\n                        this.props.getAdminHeader().toggleMenu();\r\n                    }\r\n                    console.log(this.props.getAdminHeader().isSmallScreen);\r\n                }}>\r\n                    <div className=\"item-menu\">\r\n                        {(itemMenu as MenuItem).content}\r\n                    </div>\r\n                </Link>\r\n            </li>\r\n        }\r\n\r\n    }\r\n    render() {\r\n        count = 0;\r\n        return <div id=\"menu-tab\">\r\n            <ul>{this.props.menu.map(item => { return this.renderItem(item); })}</ul>\r\n        </div>\r\n    }\r\n}\r\n\r\nclass MenuDropDown extends React.Component<{ title: JSX.Element | string }, { isCollapsed: boolean }> {\r\n\r\n    constructor(props: Readonly<{ title: string | JSX.Element }>) {\r\n        super(props);\r\n        this.state = {\r\n            isCollapsed: false\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <ul>\r\n            <div className=\"item-menu\" onClick={() => { this.setState(state => { return { isCollapsed: !this.state.isCollapsed } }) }}>{this.props.title}</div>\r\n            {this.state.isCollapsed && this.props.children}\r\n        </ul >\r\n    }\r\n}","import React from 'react';\r\nexport default function CancelSVG(props: any) {\r\n    return <svg style={{ ...props.style, fill: props.color || undefined }} className={props.className} id={props.id} onClick={props.onClick}\r\n        xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 413.348 413.348\">\r\n        <g style={{transform: 'translate(10%, 10%) scale(.8)'}}>\r\n            <path d=\"m413.348 24.354-24.354-24.354-182.32 182.32-182.32-182.32-24.354 24.354 182.32 182.32-182.32 182.32 24.354 24.354 182.32-182.32 182.32 182.32 24.354-24.354-182.32-182.32z\" />\r\n        </g>\r\n    </svg>\r\n}","import React from \"react\";\r\nimport authentication from \"../../admin-auth\";\r\nimport Utils from \"../../common/Utils\";\r\nimport CancelSVG from \"../../logo-svg/cancel\";\r\n\r\ninterface AdminMessageRequestProps extends React.HTMLAttributes<HTMLElement> {\r\n    message?: string,\r\n    is_hide?: boolean,\r\n    onCompleteSendRequest?: () => any,\r\n    onBeforeSendRequest?: () => any,\r\n}\r\ninterface AdminMessageRequestState {\r\n    isHide?: boolean\r\n    message?: string,\r\n    color?: string,\r\n    isWaitRequest?: boolean\r\n}\r\nexport default class AdminMessageRequest extends React.Component<AdminMessageRequestProps, AdminMessageRequestState>{\r\n    __isMounted = true;\r\n    constructor(props: AdminMessageRequestProps) {\r\n        super(props);\r\n        this.state = { isHide: this.props.is_hide ?? true, message: this.props.message ?? '', color: this.props.color ?? '', isWaitRequest: false };\r\n        Utils.preventSetStateWhenComponentUnmount(this);\r\n        this.sendRequest = this.sendRequest.bind(this)\r\n    }\r\n    async sendRequest<K>(requestMethod: ((() => Promise<K>) | Promise<K>),\r\n        config: {\r\n            hideWhenDone?: boolean,\r\n            getFailed?: boolean,\r\n            waitingMessage?: string,\r\n            hideWaiting?: boolean\r\n        } = {}): Promise<K | undefined> {\r\n\r\n        this.props.onBeforeSendRequest && this.props.onBeforeSendRequest();\r\n        !config.hideWaiting && this.setState(() => { return { isWaitRequest: true, isHide: false, message: config?.waitingMessage ?? 'Đang xử lí', color: 'success' } });\r\n        Utils.lostFocus();\r\n        // await Utils.waitPromise(1000)\r\n        let state: AdminMessageRequestState = {};\r\n        let request;\r\n        try {\r\n            if (requestMethod instanceof Function) {\r\n                request = await requestMethod();\r\n            } else {\r\n                request = await requestMethod;\r\n            }\r\n            state = { message: (request as any).message.content, color: 'success', isHide: Boolean(config?.hideWhenDone), isWaitRequest: false };\r\n        } catch (err) {\r\n            state = { color: 'danger', isWaitRequest: false, isHide: false };\r\n            if (config?.getFailed && err.response !== null) request = err;\r\n            try {\r\n                switch (err.message.code) {\r\n                    case undefined:\r\n                        request = undefined;\r\n                        console.log(err.response);\r\n                        if (err.response === undefined) {\r\n                            state.message = 'Kêt nối hỏng';\r\n                        } else if (err.response.status === 403 && err.response.data.error === \"Forbidden\") {\r\n                            setTimeout(() => { authentication.logout() }); break;\r\n                        } else {\r\n                            state.message = \"Lỗi server: \" + err.response.data.message;\r\n                        };\r\n                        break;\r\n                    // case SYSTEM_CONSTANTS.ERROR_REQUEST.PERMISSION_NOT_ALLOW:\r\n                    default:\r\n                        let data = err.data instanceof Object\r\n                            ? '- ' + JSON.stringify(err.data) :\r\n                            err.data ? `- ${err.data}` : '';\r\n                        state.message = `${err.message.content} ${data}`;\r\n                };\r\n            } catch (error) {\r\n                state.message = 'Lỗi nhận request: ' + error;\r\n            }\r\n        }\r\n        await this.setState(() => state);\r\n        this.props.onCompleteSendRequest && this.props.onCompleteSendRequest();\r\n        return request;\r\n    }\r\n    setMessage(message: { color?: string, message?: string, isHide?: boolean }): any {\r\n        this.setState(message as any);\r\n    }\r\n    closeMessage() {\r\n        this.setState({ isHide: true });\r\n    }\r\n    render() {\r\n        return this.state.isHide ? null : <div className={`alert d-flex ${(this.state.color ? `alert-${this.state.color} ` : '')}`}>\r\n            <span key=\"0\" className={\"mr-auto mb-1 \" + (this.state.isWaitRequest ? ' loading-text' : '')}>{this.state.message}</span>,\r\n            <CancelSVG key=\"1\" className=\"icon\" color=\"red\" style={{ minWidth: 16 }} onClick={() => { this.setState({ isHide: true }) }} />\r\n        </div>\r\n\r\n\r\n    }\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport AdminUserAPI, { AdminDTO } from \"../../../api/admin/admin-api\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput from \"../../../components/winput\";\r\nimport SYSTEM_CONSTANTS from \"../../../constants\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface AddAdminUserState {\r\n    input: AdminDTO,\r\n    passwordConfirmInput: string\r\n    isValidInput: {\r\n        passwordConfirm: boolean,\r\n        email: boolean,\r\n        adminCode: boolean,\r\n        phone: boolean,\r\n        identityDocument: boolean\r\n    },\r\n    isDisable: boolean,\r\n}\r\n\r\nexport default class AddAdminUser extends React.Component<{}, AddAdminUserState> {\r\n    messageRequest: React.RefObject<AdminMessageRequest>;\r\n    avatar: React.RefObject<HTMLImageElement>;\r\n    avatarInput: React.RefObject<HTMLInputElement>;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            input: {\r\n                adminCode: 'nvc2',\r\n                email: 'cuong2@gmail.com',\r\n                password: '123',\r\n                fullname: 'Nguyễn Văn Cường 2',\r\n                phone: '12345',\r\n                identityDocument: '0014523',\r\n                dateOfBirth: '2000-02-02',\r\n                address: '123454',\r\n                gender: '0'\r\n            },\r\n            isValidInput: {\r\n                passwordConfirm: true,\r\n                email: true,\r\n                adminCode: true,\r\n                phone: true,\r\n                identityDocument: true\r\n            },\r\n            passwordConfirmInput: '123',\r\n            isDisable: false\r\n        }\r\n        this.messageRequest = React.createRef();\r\n        this.avatar = React.createRef();\r\n        this.avatarInput = React.createRef();\r\n        console.log('add constructor');\r\n    }\r\n    inputChange(fieldChange: string, evt: React.FormEvent<HTMLInputElement>, otherAction?: (evt: React.FormEvent<HTMLInputElement>) => any) {\r\n        (this.state.input as any)[fieldChange] = evt.currentTarget.value;\r\n        otherAction instanceof Function && otherAction(evt);\r\n        this.setState({});\r\n    }\r\n    radioInputGender(evt: React.ChangeEvent<HTMLInputElement>) {\r\n        this.state.input.gender = evt.currentTarget.value;\r\n    }\r\n    setDisable(isDisable: boolean) {\r\n        this.setState({ isDisable: isDisable });\r\n    }\r\n    async onSubmitForm(evt: React.FormEvent<HTMLFormElement>) {\r\n        evt.preventDefault();\r\n        this.setDisable(true);\r\n        let { current } = this.messageRequest;\r\n        let addUserReq = await this.messageRequest.current?.sendRequest(() => { return AdminUserAPI.addUser(this.state.input) });\r\n        let file: any;\r\n        if (addUserReq !== undefined\r\n            && this.avatarInput.current?.files && (file = this.avatarInput.current?.files[0])) {\r\n            let state: any = { ...current?.state };\r\n\r\n            let updateImageReq = await current?.sendRequest(() => {\r\n                return AdminUserAPI.uploadAvatar(\r\n                    {\r\n                        image: file,\r\n                        id: addUserReq?.data\r\n                    })\r\n            }, {\r\n                waitingMessage: 'Đang xử lí ảnh',\r\n                hideWhenDone: true\r\n            });\r\n            if (updateImageReq) {\r\n                current?.setState(state);\r\n            } else {\r\n                state.color = 'warning';\r\n                state.message += ` - ${current?.state.message}`;\r\n                current?.setState(state);\r\n            }\r\n        };\r\n        this.setDisable(false);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"form-container\">\r\n                <AdminMessageRequest ref={this.messageRequest} />\r\n                <WForm id={`form-main`} className={this.state.isDisable ? 'disabled' : ''} onSubmit={this.onSubmitForm.bind(this)}>\r\n                    <div className=\"d-flex justify-content-between\">\r\n                        <h2>Thêm tài khoản</h2>\r\n                        <img className=\"avatar\" title=\"Ảnh đại diện\" src={process.env.REACT_APP_ADMIN_USER_IMAGE_PATH + 'default.jpg'} alt=\"Avatar\" ref={this.avatar}\r\n                            onClick={() => { this.avatarInput.current?.click(); }}\r\n                        ></img>\r\n                    </div>\r\n                    <div className=\"d-flex space-nm\">\r\n                        <WInput title_input=\"Tên tài khoản\" value={this.state.input.adminCode} is_invalid={!this.state.isValidInput.adminCode}\r\n                            onChange={(evt) => {\r\n                                this.inputChange('adminCode', evt,\r\n                                    (evt) => { this.state.isValidInput.adminCode = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.code) != null })\r\n                            }} required />\r\n                        <WInput title_input=\"Email\" value={this.state.input.email}\r\n                            is_invalid={!this.state.isValidInput.email}\r\n                            onChange={(evt) => {\r\n                                this.inputChange('email', evt,\r\n                                    (evt) => { this.state.isValidInput.email = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.email) != null })\r\n                            }} required />\r\n                    </div>\r\n                    <div className=\"d-flex space-nm\">\r\n                        <WInput title_input=\"Mật khẩu\" value={this.state.input.password} type=\"password\"\r\n                            onChange={(evt) => {\r\n                                this.inputChange('password', evt,\r\n                                    (evt) => { this.state.isValidInput.passwordConfirm = this.state.passwordConfirmInput === evt.currentTarget.value }\r\n                                )\r\n                            }} required />\r\n                        <WInput title_input=\"Xác nhận mật khẩu\" value={this.state.passwordConfirmInput} type=\"password\"\r\n                            is_invalid={!this.state.isValidInput.passwordConfirm}\r\n                            onChange={(evt) => {\r\n                                let pwConfirm = evt.currentTarget.value;\r\n                                this.state.isValidInput.passwordConfirm = this.state.input.password === pwConfirm;\r\n                                this.setState({ passwordConfirmInput: pwConfirm });\r\n                            }} required />\r\n                    </div>\r\n                    <div className=\"d-flex space-nm\">\r\n                        <WInput title_input=\"Tên đầy đủ\" value={this.state.input.fullname}\r\n                            onChange={(evt) => { this.inputChange('fullname', evt) }} required />\r\n                        <WInput title_input=\"Ngày sinh\" value={this.state.input.dateOfBirth} no_title_animation={true} type=\"date\"\r\n                            onChange={(evt) => { this.inputChange('dateOfBirth', evt) }} required />\r\n                    </div>\r\n                    <div className=\"d-flex space-nm\">\r\n                        <WInput title_input=\"Số điện thoại\" value={this.state.input.phone} is_invalid={!this.state.isValidInput.phone}\r\n                            onChange={(evt) => {\r\n                                this.inputChange('phone', evt,\r\n                                    (evt) => { this.state.isValidInput.phone = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.numbers) != null }\r\n                                )\r\n                            }} required />\r\n                        <WInput title_input=\"Số chứng minh thư\" value={this.state.input.identityDocument} is_invalid={!this.state.isValidInput.identityDocument}\r\n                            onChange={(evt) => {\r\n                                this.inputChange('identityDocument', evt,\r\n                                    (evt) => { this.state.isValidInput.identityDocument = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.numbers) != null })\r\n                            }} required />\r\n                    </div>\r\n                    <WInput title_input=\"Địa chỉ\" value={this.state.input.address}\r\n                        onChange={(evt) => { this.inputChange('address', evt) }} required />\r\n                    <input type=\"file\" style={{ display: 'none' }} ref={this.avatarInput} accept=\"image/*\" onChange={\r\n                        (evt) => {\r\n                            let { files } = evt.currentTarget;\r\n                            if (files && files[0]) {\r\n                                let image = this.avatar.current;\r\n                                let reader = new FileReader();\r\n                                reader.onload = ({ target }) => {\r\n                                    (image as any).src = target?.result;\r\n                                };\r\n                                reader.readAsDataURL(files[0]);\r\n                            }\r\n                        }\r\n                    } />\r\n                    <div className=\"winput-group-other\">\r\n                        <label>Giới tính</label>\r\n                        <div className=\"d-flex space-nm\">\r\n                            <label><input type=\"radio\" name=\"gender2\" value=\"0\" onChange={this.radioInputGender.bind(this)} defaultChecked />Nam</label>\r\n                            <label><input type=\"radio\" name=\"gender2\" value=\"1\" onChange={this.radioInputGender.bind(this)} />Nữ</label>\r\n                            <label><input type=\"radio\" name=\"gender2\" value=\"2\" onChange={this.radioInputGender.bind(this)} />Khác</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: 16 }} className=\"d-flex space-sm\">\r\n                        <Button color=\"primary\" size=\"sm\">Thêm</Button>\r\n                        <Link to=\"/admin/admin-user/view\"><Button color=\"danger\" type=\"button\" size=\"sm\">Quay về</Button></Link>\r\n                    </div>\r\n                </WForm>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from \"react\";\r\ninterface ImageErrorProps extends React.HTMLAttributes<HTMLImageElement> {\r\n    'err_src': string,\r\n    src: string \r\n}\r\nexport default class ImageError extends React.Component<ImageErrorProps, any>{\r\n    constructor(props: ImageErrorProps) {\r\n        super(props);\r\n        this.state = {\r\n            src: this.props.src,\r\n        }\r\n    }\r\n    onError() {\r\n        if (this.state.src !== this.props['err_src']) {\r\n            this.setState({\r\n                src: this.props.err_src\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        const props = {\r\n            ... this.props,\r\n            onError: () => {\r\n                this.onError();\r\n            },\r\n            src: this.state.src,\r\n            err_src: undefined\r\n        };\r\n        return <img {...props}></img>;\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport default function EditSVG(props: any) {\r\n    return <svg style={{ ...props.style, fill: props.color || undefined }} className={props.className} id={props.id}\r\n        xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n        <g>\r\n            <g>\r\n                <polygon points=\"51.2,353.28 0,512 158.72,460.8   \" />\r\n            </g>\r\n        </g>\r\n        <g>\r\n            <g>\r\n\r\n                <rect x=\"89.73\" y=\"169.097\" transform=\"matrix(0.7071 -0.7071 0.7071 0.7071 -95.8575 260.3719)\" width=\"353.277\" height=\"153.599\" />\r\n            </g>\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <path d=\"M504.32,79.36L432.64,7.68c-10.24-10.24-25.6-10.24-35.84,0l-23.04,23.04l107.52,107.52l23.04-23.04    C514.56,104.96,514.56,89.6,504.32,79.36z\" />\r\n            </g>\r\n        </g>\r\n    </svg>\r\n}","import React from 'react';\r\nexport default function AddSVG(props: any) {\r\n    return <svg style={{ ...props.style, fill: props.color || undefined }} \r\n    className={props.className}\r\n        id={props.id} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\r\n        <path d=\"m437.019531 74.980469c-48.351562-48.351563-112.640625-74.980469-181.019531-74.980469s-132.667969 26.628906-181.019531 74.980469c-48.351563 48.351562-74.980469 112.640625-74.980469 181.019531s26.628906 132.667969 74.980469 181.019531c48.351562 48.351563 112.640625 74.980469 181.019531 74.980469s132.667969-26.628906 181.019531-74.980469c48.351563-48.351562 74.980469-112.640625 74.980469-181.019531s-26.628906-132.667969-74.980469-181.019531zm-181.019531 397.019531c-119.101562 0-216-96.898438-216-216s96.898438-216 216-216 216 96.898438 216 216-96.898438 216-216 216zm20-236.019531h90v40h-90v90h-40v-90h-90v-40h90v-90h40zm0 0\" />\r\n    </svg>\r\n}","import React from \"react\";\r\nimport './wcheckbox.scss';\r\ninterface WCheckBoxProps extends React.HTMLProps<HTMLInputElement> {\r\n    'classname-input'?: any;\r\n}\r\n\r\nexport default class WCheckBox extends React.Component<WCheckBoxProps, { isChecked: boolean }>{\r\n    constructor(props: Readonly<WCheckBoxProps>) {\r\n        super(props);\r\n        this.state = {\r\n            isChecked: this.props.checked as any\r\n        }\r\n    }\r\n    shouldComponentUpdate(nextProps: any) {\r\n        if (nextProps === this.props) {\r\n            return true;\r\n        } else {\r\n            if (nextProps.hasOwnProperty('checked')) this.setState({ isChecked: nextProps.checked });\r\n            return false;\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <label className={'wcheckbox ' +\r\n                (this.state.isChecked ? 'checked ' : '') +\r\n                (this.props.className || '')}\r\n                style={this.props.style}\r\n            >\r\n                {React.createElement('input', {\r\n                    ... this.props, type: \"checkbox\", style: null, className: this.props['classname-input'], checked: this.state.isChecked,\r\n                    onChange: (evt: React.MouseEvent<HTMLInputElement>) => {\r\n                        (this.props.onChange instanceof Function) && this.props.onChange(evt);\r\n                        this.setState({ isChecked: evt.currentTarget.checked });\r\n                    }\r\n                })}\r\n                {\r\n                    this.state.isChecked && (<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"done-svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 128 128\" xmlSpace=\"preserve\">\r\n                        <g><circle fill=\"#31AF91\" cx=\"64\" cy=\"64\" r=\"64\" /></g>\r\n                        <g><path fill=\"#FFF\" d=\"M54.3,97.2L24.8,67.7c-0.4-0.4-0.4-1,0-1.4l8.5-8.5c0.4-0.4,1-0.4,1.4,0L55,78.1l38.2-38.2   c0.4-0.4,1-0.4,1.4,0l8.5,8.5c0.4,0.4,0.4,1,0,1.4L55.7,97.2C55.3,97.6,54.7,97.6,54.3,97.2z\" /></g>\r\n                    </svg>\r\n                    )\r\n                }\r\n            </label>\r\n        )\r\n    }\r\n}","\r\nimport React from 'react';\r\n\r\nexport default function FirstSVG(props: any) {\r\n    return (\r\n        <svg className={props.className} style={{ stroke: props.color, fill: props.color }}\r\n            xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 320.012 320.012\" xmlSpace=\"preserve\">\r\n            <g transform=\"matrix(1 0 0 1 0 0)\">\r\n                <g>\r\n                    <g>\r\n                        <path d=\"M296.07,2.188c-4.864-2.88-10.976-2.912-15.904-0.128L48.006,132.652V16.012c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v288c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16v-116.64l232.16,130.592    c2.432,1.376,5.12,2.048,7.84,2.048c2.784,0,5.6-0.736,8.064-2.176c4.896-2.88,7.936-8.128,7.936-13.824v-288    C304.006,10.316,300.966,5.068,296.07,2.188z M272.006,276.652l-207.36-116.64l207.36-116.64V276.652z\" data-original=\"#000000\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    )\r\n}","import React from \"react\";\r\n\r\nexport default function LastSVG(props: any) {\r\n    return (\r\n        <svg className={props.className} style={{ fill: props.color, stroke: props.color }}\r\n            xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 320.012 320.012\" xmlSpace=\"preserve\" >\r\n            <g transform=\"matrix(-1 3.67394e-16 -3.67394e-16 -1 320.012 320.012)\">\r\n                <g>\r\n                    <g>\r\n                        <path d=\"M296.07,2.188c-4.864-2.88-10.976-2.912-15.904-0.128L48.006,132.652V16.012c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v288c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16v-116.64l232.16,130.592    c2.432,1.376,5.12,2.048,7.84,2.048c2.784,0,5.6-0.736,8.064-2.176c4.896-2.88,7.936-8.128,7.936-13.824v-288    C304.006,10.316,300.966,5.068,296.07,2.188z M272.006,276.652l-207.36-116.64l207.36-116.64V276.652z\" data-original=\"#000000\" />\r\n                    </g>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    )\r\n}","import React from \"react\";\r\n\r\nexport default function NextSVG(props: any) {\r\n    return (\r\n        <svg className={props.className} style={{ fill: props.color }}\r\n            xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 240.823 240.823\" xmlSpace=\"preserve\">\r\n            <g xmlns=\"http://www.w3.org/2000/svg\">\r\n                <g>\r\n                    <path d=\"M183.189,111.816L74.892,3.555c-4.752-4.74-12.451-4.74-17.215,0c-4.752,4.74-4.752,12.439,0,17.179   l99.707,99.671l-99.695,99.671c-4.752,4.74-4.752,12.439,0,17.191c4.752,4.74,12.463,4.74,17.215,0l108.297-108.261   C187.881,124.315,187.881,116.495,183.189,111.816z\" data-original=\"#000000\" />\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    )\r\n} ","import React from \"react\";\r\n\r\nexport default function PreviousSVG(props: any) {\r\n    return (\r\n        <svg className={props.className} style={{ fill: props.color }}\r\n            xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 240.823 240.823\" xmlSpace=\"preserve\">\r\n            <g transform=\"matrix(-1 0 0 -1 240.823 240.823)\">\r\n                <g>\r\n                    <path d=\"M183.189,111.816L74.892,3.555c-4.752-4.74-12.451-4.74-17.215,0c-4.752,4.74-4.752,12.439,0,17.179   l99.707,99.671l-99.695,99.671c-4.752,4.74-4.752,12.439,0,17.191c4.752,4.74,12.463,4.74,17.215,0l108.297-108.261   C187.881,124.315,187.881,116.495,183.189,111.816z\" data-original=\"#000000\" />\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    )\r\n}","import React from 'react';\r\nexport default function ReloadSVG(props: any) {\r\n    return (<svg xmlns=\"http://www.w3.org/2000/svg\" className={props.className} style={{ fill: props.color }} xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\">\r\n        <g>\r\n            <g>\r\n                <path d=\"M493.815,70.629c-11.001-1.003-20.73,7.102-21.733,18.102l-2.65,29.069C424.473,47.194,346.429,0,256,0    C158.719,0,72.988,55.522,30.43,138.854c-5.024,9.837-1.122,21.884,8.715,26.908c9.839,5.024,21.884,1.123,26.908-8.715    C102.07,86.523,174.397,40,256,40c74.377,0,141.499,38.731,179.953,99.408l-28.517-20.367c-8.989-6.419-21.48-4.337-27.899,4.651    c-6.419,8.989-4.337,21.479,4.651,27.899l86.475,61.761c12.674,9.035,30.155,0.764,31.541-14.459l9.711-106.53    C512.919,81.362,504.815,71.632,493.815,70.629z\" />\r\n            </g>\r\n        </g>\r\n        <g>\r\n            <g>\r\n                <path d=\"M472.855,346.238c-9.838-5.023-21.884-1.122-26.908,8.715C409.93,425.477,337.603,472,256,472    c-74.377,0-141.499-38.731-179.953-99.408l28.517,20.367c8.989,6.419,21.479,4.337,27.899-4.651    c6.419-8.989,4.337-21.479-4.651-27.899l-86.475-61.761c-12.519-8.944-30.141-0.921-31.541,14.459l-9.711,106.53    c-1.003,11,7.102,20.73,18.101,21.733c11.014,1.001,20.731-7.112,21.733-18.102l2.65-29.069C87.527,464.806,165.571,512,256,512    c97.281,0,183.012-55.522,225.57-138.854C486.594,363.309,482.692,351.262,472.855,346.238z\" />\r\n            </g>\r\n        </g>\r\n    </svg>)\r\n}","import React from \"react\";\r\nimport { Button, ButtonGroup, Col, Container, Input, InputGroup, InputGroupAddon, Row, Table } from \"reactstrap\";\r\nimport Utils from \"../common/Utils\";\r\nimport '../css-animation.scss';\r\nimport FirstSVG from \"../logo-svg/first\";\r\nimport LastSVG from \"../logo-svg/last\";\r\nimport NextSVG from \"../logo-svg/next\";\r\nimport PreviousSVG from \"../logo-svg/previous\";\r\nimport ReloadSVG from \"../logo-svg/reload\";\r\nimport './wtable.scss';\r\n\r\nexport interface WTablePageInfo {\r\n    data: any[],\r\n    page: number,\r\n    limit: number,\r\n    offset: number,\r\n    totalRecord: number,\r\n    totalPage: number\r\n}\r\n\r\ninterface TableProps extends React.HTMLAttributes<HTMLTableElement> {\r\n    page?: number\r\n    limit?: number\r\n    getPage: (page: number, limit: number) => (WTablePageInfo | undefined | Promise<WTablePageInfo | undefined>),\r\n    fillData: (data: any, index: number) => (JSX.Element),\r\n    onPageChangeEvent?: (event: { pageChange: number, limitChange: number }) => any,\r\n    headers: any[]\r\n}\r\n\r\ninterface TableState {\r\n    pageData: WTablePageInfo,\r\n    limitValue?: number,\r\n    pageValue?: number,\r\n    isWaiting: boolean\r\n}\r\n\r\nexport default class WTable extends React.Component<TableProps, TableState> {\r\n    tableBody: React.RefObject<any>;\r\n    keyTable: string = Utils.randomString(10);\r\n\r\n    constructor(props: TableProps) {\r\n        super(props);\r\n        let page = this.props.page || 1;\r\n        let limit = this.props.limit || 5;\r\n        this.state = { pageData: { data: [] } as any, pageValue: page, limitValue: limit, isWaiting: false };\r\n        this.reloadPage = this.reloadPage.bind(this);\r\n        this.tableBody = React.createRef();\r\n        Utils.preventSetStateWhenComponentUnmount(this)\r\n    }\r\n\r\n    async getPage(page: number, limit: number) {\r\n        this.setState(() => { return { isWaiting: true } });\r\n        if (limit <= 0) limit = 1;\r\n        let pageGet: WTablePageInfo = this.props.getPage(page, limit) as WTablePageInfo;\r\n        if (pageGet instanceof Promise) {\r\n            pageGet = await pageGet;\r\n        }\r\n        if (pageGet !== undefined) {\r\n            this.setState(() => {\r\n                return {\r\n                    pageData: pageGet,\r\n                    limitValue: pageGet.limit,\r\n                    pageValue: pageGet.page,\r\n                    isWaiting: false\r\n                }\r\n            })\r\n            this.props.onPageChangeEvent instanceof Function && this.props.onPageChangeEvent({ pageChange: pageGet.page, limitChange: pageGet.limit });\r\n            return true;\r\n        } else {\r\n            this.setState(() => {\r\n                return {\r\n                    pageData: { data: [] } as any,\r\n                    limitValue: limit,\r\n                    pageValue: page,\r\n                    isWaiting: false\r\n                }\r\n            });\r\n            return false;\r\n        }\r\n    }\r\n    async reloadPage() {\r\n        this.keyTable = Utils.randomString();\r\n        await this.getPage(this.state.pageValue as number, this.state.limitValue as number);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className={\"table-view \" + this.props.className + (this.state.isWaiting ? ' disabled' : '')} id={this.props.id}>\r\n                <Table hover={true}>\r\n                    <thead>\r\n                        <tr>{this.props.headers.map((e, index) => { return <th key={index}>{e}</th> })}</tr>\r\n                    </thead>\r\n                    <tbody ref={this.tableBody} key={this.keyTable}>\r\n                        {\r\n                            this.state.pageData.data.map((inRow: any[], index: number) => {\r\n                                return this.props.fillData(inRow, index);\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </Table >\r\n                <Container fluid={true} className=\"table-control p-0\">\r\n                    <Row>\r\n                        <Col md={'auto'} sm={12} className=\"d-flex mb-2 mx-sm-auto ml-md-0 mr-md-auto\">\r\n                            <div className=\"d-flex mx-auto m-md-0\">\r\n                                <InputGroup size=\"sm\">\r\n                                    <InputGroupAddon addonType=\"prepend\" >Giới hạn</InputGroupAddon>\r\n                                    <Input type=\"number\" style={{ maxWidth: 80, textAlign: \"center\" }} value={this.state.limitValue}\r\n                                        onChange={(e) => { this.setState({ limitValue: (e.target.value) as any }) }}\r\n                                    />\r\n                                </InputGroup>\r\n                                <Button className=\"ml-4\" color=\"primary\" size=\"sm\" onClick={() => {\r\n                                    this.getPage(this.state.pageValue || 1, this.state.limitValue || 1);\r\n                                }} title=\"Reload\"><ReloadSVG className={'icon' + (this.state.isWaiting ? ' spin' : '')} color=\"white\" /></Button>\r\n                            </div>\r\n                        </Col>\r\n                        <Col md={'auto'} sm={12}>\r\n                            <Container fluid={true} className=\"p-0\">\r\n                                <Row>\r\n                                    <Col md={'auto'} sm={12} className=\"d-flex justify-content-center mb-2\">\r\n                                        <InputGroup size=\"sm\" className=\"m-auto\">\r\n                                            <InputGroupAddon addonType=\"prepend\">Trang</InputGroupAddon>\r\n                                            <Input className=\"text-center\" type=\"number\" min=\"1\" style={{ maxWidth: 80 }} value={this.state.pageValue}\r\n                                                onChange={(e) => { this.setState({ pageValue: (e.target.value) as any }) }} />\r\n                                            <InputGroupAddon addonType=\"append\">\r\n                                                <div className=\"input-group-text\">{this.state.pageData.totalPage}</div>\r\n                                                <Button color=\"primary\" onClick={this.reloadPage} >GO</Button>\r\n                                            </InputGroupAddon>\r\n                                        </InputGroup>\r\n                                    </Col>\r\n                                    <Col md={'auto'} sm={12} className=\"d-flex justify-content-center mb-2\">\r\n                                        <span className=\"offset-info\">{this.state.pageData.offset} - {\r\n                                            this.state.pageData.page === this.state.pageData.totalPage ?\r\n                                                this.state.pageData.totalRecord : (this.state.pageData.limit + this.state.pageData.offset)\r\n                                        } trong {this.state.pageData.totalRecord}</span>\r\n                                    </Col>\r\n                                    <Col md={'auto'} sm={12} className=\"d-flex justify-content-center mb-2 align-items-center\">\r\n                                        <ButtonGroup>\r\n                                            <Button color=\"primary\" title=\"Trang Đầu\" size=\"sm\"\r\n                                                onClick={() => {\r\n                                                    this.setState({ pageValue: 1 });\r\n                                                    setTimeout(() => { this.reloadPage() });\r\n                                                }}\r\n                                            ><FirstSVG className=\"icon\" color=\"white\" /></Button>\r\n                                            <Button color=\"primary\" title=\"Trang Trước\" size=\"sm\"\r\n                                                onClick={() => {\r\n                                                    this.setState({ pageValue: (this.state.pageValue as any - 1) || 1 });\r\n                                                    setTimeout(() => { this.reloadPage() });\r\n                                                }}\r\n                                            ><PreviousSVG className=\"icon\" color=\"white\" /></Button>\r\n                                            <Button color=\"primary\" title=\"Trang Sau\" size=\"sm\"\r\n                                                onClick={() => {\r\n                                                    this.setState({ pageValue: (this.state.pageValue as any + 1) });\r\n                                                    setTimeout(() => { this.reloadPage() });\r\n                                                }}\r\n                                            ><NextSVG className=\"icon\" color=\"white\" /></Button>\r\n                                            <Button color=\"primary\" title=\"Trang Cuối\" size=\"sm\"\r\n                                                onClick={() => {\r\n                                                    this.setState({ pageValue: 0 });\r\n                                                    setTimeout(() => { this.reloadPage() });\r\n                                                }}\r\n                                            ><LastSVG className=\"icon\" color=\"white\" /></Button>\r\n                                        </ButtonGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport Utils from \"../../common/Utils\";\r\nimport WCheckBox from \"../../components/wcheckbox\";\r\nimport WTable, { WTablePageInfo } from \"../../components/wtable\";\r\n\r\ninterface TableListAdminProps<V> {\r\n    headers: (JSX.Element | string)[],\r\n    onPageChange?: ((event: {\r\n        pageChange: number;\r\n        limitChange: number;\r\n    }) => any)\r\n    pageInfo: { page: number, limit: number },\r\n    fillData: (data: V, classNameNotCheckWhenClick: string) => JSX.Element,\r\n    getPage: (page: number, limit: number) => (WTablePageInfo | undefined | Promise<WTablePageInfo | undefined>),\r\n    getId: (data: V) => any\r\n}\r\ninterface TableListAdminState {\r\n    isSelectAll: boolean,\r\n}\r\n\r\nexport default class TableListAdmin<K> extends React.Component<TableListAdminProps<K>, TableListAdminState>{\r\n    tableRef = React.createRef<WTable>();\r\n    idsSelect: any[] = [];\r\n    constructor(props: TableListAdminProps<K>) {\r\n        super(props);\r\n        this.state = {\r\n            isSelectAll: false\r\n        }\r\n    }\r\n    reloadPage() {\r\n        return this.tableRef.current?.reloadPage();\r\n    }\r\n    getStartIndex() {\r\n        const wtable = this.tableRef.current;\r\n        if (!wtable) return 1\r\n        return wtable.state.pageData.offset + 1;\r\n    }\r\n    render() {\r\n        const { headers, pageInfo, getPage, onPageChange, getId, fillData } = this.props;\r\n        const { isSelectAll } = this.state\r\n        const classNameNotCheckWhenClick = Utils.randomString(10);\r\n        const idTable = Utils.randomString(10)\r\n\r\n        const checkBoxSelectAll = <WCheckBox\r\n            onChange={(evt) => {\r\n                const isSelectAll = evt.currentTarget.checked\r\n                if (!isSelectAll) this.idsSelect = []\r\n                this.setState({ isSelectAll: isSelectAll })\r\n            }}\r\n            checked={isSelectAll}\r\n        />\r\n\r\n        return <WTable id={idTable}\r\n            ref={this.tableRef}\r\n            getPage={(page, limit) => {\r\n                this.idsSelect = [];\r\n                return getPage(page, limit);\r\n            }}\r\n            fillData={(data: K, index) => {\r\n                const cols = fillData(data, classNameNotCheckWhenClick);\r\n                const id = getId(data);\r\n                const startIndex = this.getStartIndex()\r\n                if (isSelectAll) this.idsSelect.push(id)\r\n\r\n                return <tr key={id} onClick={(evt) => {\r\n                    const textSelect: string = (window.getSelection() as any).toString()\r\n                    if (textSelect.length !== 0) return\r\n                    const shouldToggle = $(evt.target).closest(`.${classNameNotCheckWhenClick}`).length === 0\r\n                    if (!shouldToggle) return\r\n\r\n                    const checkbox = $(evt.target).closest(`tr`).find('> td:nth-child(2) input[type=\"checkbox\"]')[0]\r\n\r\n                    checkbox.click();\r\n                }}>\r\n                    <td>{index + startIndex}</td>\r\n                    <td>\r\n                        <WCheckBox className={classNameNotCheckWhenClick} onChange={(evt) => {\r\n                            const isSelect = evt.currentTarget.checked;\r\n                            const { idsSelect: ids } = this;\r\n                            if (isSelect) {\r\n                                this.idsSelect.push(id)\r\n                            } else {\r\n                                const index = ids.findIndex(item => item === id);\r\n                                if (index === -1) return\r\n                                ids.splice(index, 1)\r\n                            }\r\n                        }} checked={isSelectAll} />\r\n                    </td>\r\n                    {cols}\r\n                </tr>\r\n            }}\r\n            headers={['#', checkBoxSelectAll, ...headers]}\r\n            limit={pageInfo.limit}\r\n            page={pageInfo.page}\r\n            onPageChangeEvent={onPageChange} />\r\n    }\r\n}","import React, { Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from 'reactstrap';\r\nimport { APIResult } from '../../../api/declare';\r\nimport Utils from '../../../common/Utils';\r\nimport SYSTEM_CONSTANTS from '../../../constants';\r\nimport AddSVG from '../../../logo-svg/add';\r\nimport CancelSVG from '../../../logo-svg/cancel';\r\nimport AdminMessageRequest from '../../../page-component/admin/admin-message-request';\r\nimport TableListAdmin from '../../../page-component/admin/table-select';\r\n\r\nexport interface BaseViewConfig<T> {\r\n    urlPage: string,\r\n    headers: (string | JSX.Element)[],\r\n    addPage?: {\r\n        textButton: string,\r\n        link: string,\r\n    };\r\n    deleteAction?: {\r\n        textButton: string,\r\n        deleteMethod: (ids: any[]) => Promise<any>\r\n    };\r\n}\r\nexport default abstract class BaseCrudView<T> extends React.Component {\r\n    tableAdmin = React.createRef<TableListAdmin<T>>();\r\n    requestMessage = React.createRef<AdminMessageRequest>();\r\n    config: BaseViewConfig<T> = {} as any;\r\n    page: number = 0;\r\n    limit: number = 0;\r\n\r\n    abstract getId(data: T): any;\r\n    abstract fillData(data: T, unselectClass: string): JSX.Element;\r\n    abstract getPageAPIMethod(page: number, limit: number): Promise<APIResult>;\r\n    abstract subRender(): JSX.Element | null;\r\n    abstract configure(): BaseViewConfig<T>;\r\n\r\n    render() {\r\n        const { addPage, deleteAction, headers } = this.config\r\n        console.log('base-view rerender')\r\n        return <div id=\"main-view\">\r\n            <div>\r\n                <AdminMessageRequest ref={this.requestMessage} />\r\n                {this.subRender()}\r\n                <div className=\"d-flex f-bar space-sm\">\r\n                    {addPage && <Link to={addPage.link} className=\"btn btn-primary btn-sm\"> <AddSVG className=\"icon\" color=\"white\" /> <span>{addPage.textButton}</span> </Link>}\r\n                    {deleteAction && <Button color=\"danger\" size=\"sm\" onClick={this.deleteSelected.bind(this)}> <CancelSVG className=\"icon\" color=\"white\" /> <span>{deleteAction.textButton}</span> </Button>}\r\n                </div>\r\n                <TableListAdmin<T> ref={this.tableAdmin}\r\n                    fillData={(data, unselectClass) => <Fragment>\r\n                        {this.fillData(data, unselectClass)}\r\n                    </Fragment>\r\n                    }\r\n                    getPage={this.getPage.bind(this)}\r\n                    headers={headers}\r\n                    pageInfo={{\r\n                        limit: this.limit,\r\n                        page: this.page\r\n                    }}\r\n                    onPageChange={(evt) => {\r\n                        if (evt.limitChange !== this.limit || evt.pageChange !== this.page) {\r\n                            this.page = evt.pageChange;\r\n                            this.limit = evt.limitChange;\r\n                            window.history.pushState('', '', `?page=${this.page}&limit=${this.limit}`);\r\n                        } else {\r\n                            window.history.replaceState('', '', `?page=${this.page}&limit=${this.limit}`);\r\n                        }\r\n                    }}\r\n                    getId={this.getId}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n    constructor(props: any, config: {\r\n        headers: (string | JSX.Element)[],\r\n        config: BaseViewConfig<T>,\r\n    }) {\r\n        super(props);\r\n        const { page, limit } = Utils.getPageRequest();\r\n        this.config = this.configure();\r\n        this.page = page;\r\n        this.limit = limit;\r\n    }\r\n    componentDidMount() {\r\n        this.tableAdmin.current?.reloadPage();\r\n        window.history.replaceState('', '', `?page=${this.page}&limit=${this.limit}`);\r\n    }\r\n\r\n    async getPage(page: number, limit: number): Promise<any> {\r\n        const resultReq = await this.requestMessage.current\r\n            ?.sendRequest(\r\n                () => this.getPageAPIMethod(page, limit),\r\n                { hideWhenDone: true, hideWaiting: true, getFailed: true }\r\n            );\r\n        if (resultReq === undefined) return\r\n\r\n        const { message: { data: messageData, code: codeError }, data } = resultReq;\r\n\r\n        if (codeError === 0) {\r\n            return {\r\n                data: data,\r\n                limit: Number(limit),\r\n                offset: messageData.offset,\r\n                page: messageData.page,\r\n                totalPage: messageData.totalPage,\r\n                totalRecord: messageData.totalRecord\r\n            };\r\n        } else if (codeError === SYSTEM_CONSTANTS.ERROR_REQUEST.PAGE_OUT_INDEX) {\r\n            return await (this.getPage(messageData.totalPage, limit));\r\n        }\r\n\r\n    }\r\n\r\n    async deleteSelected() {\r\n        if (!this.config.deleteAction) return\r\n\r\n        const { deleteMethod } = this.config.deleteAction\r\n        const { current: requestMessage } = this.requestMessage;\r\n        const { current: tableAdmin } = this.tableAdmin;\r\n\r\n\r\n        if (!requestMessage) return;\r\n        if (!tableAdmin) return;\r\n\r\n        if (!await requestMessage.sendRequest(() => deleteMethod(tableAdmin.idsSelect))) return;\r\n        const { color: alertColor, message } = requestMessage.state;\r\n        await tableAdmin.reloadPage();\r\n\r\n        requestMessage.setMessage({ color: alertColor, message: message, isHide: false });\r\n    }\r\n}","import React, { Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Utils from \"../../common/Utils\";\r\nimport { ScreenContext } from \"../../contexts/screen-context\";\r\nimport AdminMessageRequest from \"./admin-message-request\";\r\nimport './menu-detail.scss';\r\n\r\ninterface DetailAdminPageProps {\r\n    goBackAction: (\r\n        /*Go back event*/((evt?: React.MouseEvent<any, MouseEvent>) => any)\r\n        | /*Link redirect*/ string\r\n    )\r\n    menuConfig: {\r\n        name: string,\r\n        body: JSX.Element,\r\n        callback?: () => any\r\n    }[],\r\n    interceptor?: (element: JSX.Element) => JSX.Element\r\n}\r\n\r\ninterface DetailAdminPageState {\r\n    viewIndex: number,\r\n    isDisable: boolean,\r\n    isShowMore: boolean,\r\n}\r\n\r\nexport default class DetailAdminPage extends React.Component<DetailAdminPageProps, DetailAdminPageState>{\r\n    adminMessageRequest = React.createRef<AdminMessageRequest>();\r\n    static minWithMenuTab = 180;\r\n    constructor(props: DetailAdminPageProps) {\r\n        super(props);\r\n        this.state = {\r\n            isDisable: false,\r\n            viewIndex: 0,\r\n            isShowMore: false,\r\n        }\r\n    }\r\n    getMaxItemInScreen(size: number) {\r\n        // menu width\r\n        if (size >= 1000) size -= 220;\r\n\r\n        let maxItem: number;\r\n\r\n        maxItem = size / DetailAdminPage.minWithMenuTab;\r\n        let floor = Math.floor(maxItem);\r\n        maxItem = floor + ((maxItem - floor > 0.6) as any);\r\n\r\n        if (maxItem < 1) {\r\n            return 1;\r\n        } else if (maxItem > this.props.menuConfig.length) {\r\n            maxItem = this.props.menuConfig.length + 1;\r\n        }\r\n        return maxItem;\r\n    }\r\n    render() {\r\n        let idMenu = Utils.randomString(10);\r\n        let { menuConfig, interceptor } = this.props;\r\n\r\n        let btnGoBack = this.props.goBackAction instanceof Function\r\n            ? <div children=\"Trở về\" onClick={this.props.goBackAction} />\r\n            : <Link to={this.props.goBackAction as string} className=\"text-white\" children=\"Trở về\" />\r\n        return <div id={idMenu} className={`menu-select-layout m-auto ${this.state.isDisable ? 'disabled' : ''}`} style={{ height: '100%' }}>\r\n\r\n            <ScreenContext.Consumer>{({ screenInnerWidth }) => {\r\n                const { menuTab, startRenderIndex } = getMenuTab.bind(this)();\r\n                const popupShowMore = getPopupShowMore.bind(this)(startRenderIndex);\r\n\r\n                return <Fragment>\r\n                    <div className=\"menu-select\">{menuTab}</div>\r\n                    {\r\n                        popupShowMore !== null\r\n                        && popupShowMore.length > 0\r\n                        && <div className=\"popup-show-more\">{popupShowMore}</div>\r\n                    }\r\n                </Fragment>\r\n                \r\n                function getPopupShowMore(this: DetailAdminPage, startRenderIndex: number) {\r\n                    if (!this.state.isShowMore) return null;\r\n                    if (startRenderIndex >= this.props.menuConfig.length) return [];\r\n\r\n                    const result: JSX.Element[] = [] as any[];\r\n                    if (startRenderIndex < 0) {\r\n                        startRenderIndex = 1;\r\n                        result.push(<div key={-2}>{btnGoBack}</div>);\r\n                    }\r\n                    for (let i = startRenderIndex; i < menuConfig.length; i++) {\r\n                        result.push(<div key={i}\r\n                            className={this.state.viewIndex === i ? 'active' : ''}\r\n                            onClick={() => this.setState({ isShowMore: false, viewIndex: i })}\r\n                        >{menuConfig[i].name}</div>)\r\n                    }\r\n\r\n                    return result;\r\n                }\r\n\r\n                function getMenuTab(this: DetailAdminPage) {\r\n                    let maxItemRender = this.getMaxItemInScreen(screenInnerWidth);\r\n                    const result: JSX.Element[] = [];\r\n                    const goBackTab = <div key={-2} className=\"bg-danger text-white dbox-item\" onClick={(evt) => {\r\n                        let firstChild = evt.currentTarget.firstChild;\r\n                        firstChild && (firstChild as any).click();\r\n                    }}\r\n                        children={btnGoBack}\r\n                    />\r\n\r\n                    if (menuConfig.length !== 0) {\r\n                        let isRenderShowMore: boolean = true;\r\n                        if (maxItemRender > 1) {\r\n                            result.push(goBackTab);\r\n                            if (maxItemRender > menuConfig.length) {\r\n                                isRenderShowMore = false;\r\n                                --maxItemRender; // 1 Tab quay về\r\n                            } else {\r\n                                // 1 của tab xem thêm và 1 của tab bị chiếm vị trí 1 tab trờ về\r\n                                maxItemRender -= 3;\r\n                            }\r\n\r\n                            for (let i = 0; i < maxItemRender; i++) {\r\n                                result.push(<div\r\n                                    key={i}\r\n                                    className={`dbox-item ${this.state.viewIndex === i ? 'active' : ''}`}\r\n                                    onClick={() => {\r\n                                        this.setState({ viewIndex: i, isShowMore: false });\r\n                                        this.adminMessageRequest.current?.closeMessage();\r\n                                    }}\r\n                                    children={menuConfig[i].name}\r\n                                    title={menuConfig[i].name}\r\n                                />)\r\n                            }\r\n                        } else {\r\n                            maxItemRender = -1;\r\n                            isRenderShowMore = false;\r\n                        }\r\n\r\n                        if (isRenderShowMore) {\r\n                            result.push(<div\r\n                                key={-9}\r\n                                className={`dbox-item ${this.state.viewIndex >= maxItemRender ? 'active' : ''}`}\r\n                                onClick={() => {\r\n                                    const { isShowMore } = this.state;\r\n                                    this.setState({ isShowMore: !isShowMore });\r\n                                    if (!isShowMore) Utils.nextClick(() => this.setState({ isShowMore: false }));\r\n                                }}\r\n                                children={'Xem thêm'}\r\n                                title={'Xem thêm'}\r\n                            />)\r\n                        }\r\n                    } else {\r\n                        result.push(btnGoBack)\r\n                    }\r\n                    return { menuTab: result, startRenderIndex: maxItemRender }\r\n                }\r\n            }}</ScreenContext.Consumer>\r\n            <div className=\"child-content\">\r\n                <div className={`form-container`}>\r\n                    <AdminMessageRequest ref={this.adminMessageRequest}\r\n                        onBeforeSendRequest={() => this.setState(() => { return { isDisable: true } })}\r\n                        onCompleteSendRequest={() => this.setState(() => { return { isDisable: false } })}\r\n                    />\r\n                    {(() => {\r\n                        let menu = menuConfig[this.state.viewIndex];\r\n                        if (menu !== undefined) {\r\n                            if (menu.callback instanceof Function) setTimeout(() => { (menu.callback as Function)() })\r\n                            return interceptor instanceof Function ? interceptor(menu.body) : menu.body;\r\n                        }\r\n                        return null;\r\n\r\n                    })()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","\r\nimport React, { Fragment } from \"react\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport { JsxFragment } from \"typescript\";\r\nimport Utils from \"../common/Utils\";\r\nimport ReloadSVG from \"../logo-svg/reload\";\r\nimport './list-select.scss';\r\nimport WCheckBox from \"./wcheckbox\";\r\nimport WInput, { WInputOther } from \"./winput\";\r\n\r\ninterface ListSelectProps {\r\n    getData: () => any,\r\n    viewData: (data: any) => (JSX.Element),\r\n    header: JSX.Element,\r\n    filter?: any,\r\n    typeSearch: { propertySearch: string, viewSearch: string }[],\r\n    getKey: (data: any) => any,\r\n    getAllow?: (data: any) => boolean,\r\n    onComplete: (data: any) => any\r\n    valueSelected?: any,\r\n    textOnCompleteButton?: string\r\n}\r\ninterface ListSelectState {\r\n    justShowSelected: boolean,\r\n    isWaiting: boolean,\r\n    data: any[],\r\n    filter: any,\r\n}\r\nexport default class ListSelect extends React.Component<ListSelectProps, ListSelectState>{\r\n    refComponent = {\r\n        typeSearch: React.createRef<HTMLSelectElement>(),\r\n        searchValue: React.createRef<HTMLInputElement>(),\r\n    }\r\n    searchValue: string = '';\r\n    valueSelected: any = {};\r\n    isFirstRender = false;\r\n\r\n    private isSelectAll = false;\r\n    private tableRef = React.createRef<HTMLTableSectionElement>();\r\n\r\n    constructor(props: ListSelectProps) {\r\n        super(props);\r\n        this.state = {\r\n            justShowSelected: false,\r\n            isWaiting: false,\r\n            data: undefined as any,\r\n            filter: undefined\r\n        }\r\n        if (typeof this.props.valueSelected === 'object') {\r\n            if (this.props.valueSelected instanceof Array) {\r\n                this.valueSelected = {};\r\n            } else {\r\n                this.valueSelected = this.props.valueSelected;\r\n            }\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n    changeFilter() {\r\n        this.searchValue = (this.refComponent.searchValue.current as any).input.current.value.trim();\r\n        let typeSearch = this.refComponent.typeSearch.current?.value;\r\n        if (this.searchValue) {\r\n            let filter;\r\n            if (this.props.filter && (filter = this.props.filter[typeSearch as any])) {\r\n\r\n            } else {\r\n                filter = Utils.filterString(this.searchValue, (data) => { return data[typeSearch as string] || '' });\r\n            }\r\n            this.setState({ filter: filter })\r\n        } else {\r\n            this.setState({ filter: undefined });\r\n        }\r\n    }\r\n    async getData() {\r\n        await this.setState({ isWaiting: true });\r\n        Utils.lostFocus();\r\n        let result = await this.props.getData();\r\n        if (result !== undefined) {\r\n            this.isFirstRender = true;\r\n            await this.setState({ data: result as any, isWaiting: false });\r\n        } else {\r\n            await this.setState({ isWaiting: false })\r\n        }\r\n    }\r\n    async updatePermissions() {\r\n        this.props.onComplete && this.props.onComplete(this.valueSelected);\r\n    }\r\n    toggleSelectAll() {\r\n        $<HTMLInputElement>('> tr > td:nth-child(2) > .select > input[type=checkbox]', this.tableRef.current as any).each((index, e) => {\r\n            if (e.checked === this.isSelectAll) e.click();\r\n        });\r\n        this.isSelectAll = !this.isSelectAll;\r\n        this.setState({});\r\n    }\r\n    render() {\r\n        let { isWaiting, filter } = this.state;\r\n        let valueSelect: any = {}; // lọc ra các phần tử không tồn tại\r\n\r\n        return <div className={`list-select ${this.state.isWaiting ? 'disabled' : ''}`} >\r\n            <Container fluid={true} className=\"my-2 px-0\">\r\n                <Row>\r\n                    <Col sm={12} md={6} className=\"d-flex align-items-center mr-auto\">\r\n                        <div className=\"d-flex space-sm\">\r\n                            <Button color=\"primary\" onClick={this.getData.bind(this)} title=\"reload\" size=\"sm\">\r\n                                <ReloadSVG color=\"white\" className={'icon ' + (isWaiting ? 'spin' : '')} />\r\n                            </Button>\r\n                            <Button onClick={this.updatePermissions.bind(this)} color=\"primary\" size=\"sm\" children={this.props.textOnCompleteButton || 'OK'} />\r\n                            <Button onClick={this.toggleSelectAll.bind(this)} color={this.isSelectAll ? 'danger' : 'primary'} size=\"sm\" children={this.isSelectAll ? 'Hủy chọn tất cả' : 'Chọn tất cả'} />\r\n                        </div>\r\n                    </Col>\r\n                    <Col sm={12} md={5}>\r\n                        <div className=\"d-flex space-sm \">\r\n                            <WInput title_input=\"Tìm kiếm\" onChange={this.changeFilter.bind(this)} ref={this.refComponent.searchValue as any} />\r\n                            <WInputOther title_input=\"Loại\">\r\n                                <select ref={this.refComponent.typeSearch} onChange={this.changeFilter.bind(this)}>\r\n                                    {this.props.typeSearch.map((type, index) => {\r\n                                        return <option key={index} value={type.propertySearch}>{type.viewSearch}</option>\r\n                                    })}\r\n                                </select>\r\n                            </WInputOther>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            <table className=\"table table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>\r\n                            <WCheckBox className=\"select\" checked={this.state.justShowSelected} onChange={(evt) => { this.setState({ justShowSelected: evt.currentTarget.checked }) }} />\r\n                        </th>\r\n                        {this.props.header}\r\n                    </tr>\r\n                </thead>\r\n                <tbody ref={this.tableRef}>\r\n                    {\r\n                        this.state.data !== undefined && this.state.data.map((data, index) => {\r\n                            let dataExits: boolean = false;\r\n                            let key = this.props.getKey(data);\r\n\r\n                            if ((this.isFirstRender && this.props.getAllow && this.props.getAllow(data)) || this.valueSelected.hasOwnProperty(key)) {\r\n                                valueSelect[key] = data;\r\n                                dataExits = true;\r\n                            }\r\n\r\n                            if (\r\n                                (!this.state.justShowSelected || dataExits)\r\n                                && (filter instanceof Function ? filter(data) : true)\r\n                            ) {\r\n                                return <tr key={key} onClick={(evt) => {\r\n                                    if ($(evt.target).closest('.select-btn').length > 0) return\r\n                                    const checkbox = $(evt.target).closest(`tr`).find('> td:nth-child(2) input[type=\"checkbox\"]')[0]\r\n                                    checkbox.click();\r\n                                }}>\r\n                                    <td>{index + 1}</td>\r\n                                    <td>\r\n                                        <WCheckBox className=\"select select-btn\" onChange={(evt) => {\r\n                                            let checked = evt.currentTarget.checked;\r\n                                            if (checked) {\r\n                                                this.valueSelected[key] = data;\r\n                                            } else {\r\n                                                delete this.valueSelected[key];\r\n                                            }\r\n                                        }} checked={dataExits} />\r\n                                    </td>\r\n                                    {this.props.viewData(data)}\r\n                                </tr>\r\n                            }\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n            {(() => {\r\n                this.isFirstRender = false;\r\n                if (this.state.data !== undefined) this.valueSelected = valueSelect;\r\n            })()}\r\n        </div>\r\n    }\r\n} ","import React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport AdminUserAPI, { AdminGroupAPIResult, AdminUserResult } from \"../../../api/admin/admin-api\";\r\nimport { GroupPermissionAPIResult } from \"../../../api/admin/group-api\";\r\nimport Utils from \"../../../common/Utils\";\r\nimport ListSelect from \"../../../components/list-select\";\r\nimport WCheckBox from \"../../../components/wcheckbox\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdateGroupsProps {\r\n    adminInfo: AdminUserResult,\r\n    adminMessageRequest: () => AdminMessageRequest\r\n}\r\nexport default class UpdateGroups extends React.Component<UpdateGroupsProps>{\r\n    refComponent = {\r\n        typeSearch: React.createRef<HTMLSelectElement>(),\r\n        searchValue: React.createRef<HTMLInputElement>(),\r\n    }\r\n    async updateGroups(selected: any) {\r\n        this.props.adminMessageRequest().sendRequest(() => {\r\n            return AdminUserAPI.updateAdminGroups({ adminId: this.props.adminInfo.id, groupIds: Object.keys(selected) as any });\r\n        })\r\n    }\r\n    render() {\r\n        return <ListSelect\r\n            getData={async () => {\r\n                let result = await this.props.adminMessageRequest().sendRequest(() => {\r\n                    return AdminUserAPI.getAllGroups(this.props.adminInfo.id as number);\r\n                }, { hideWhenDone: true });\r\n\r\n                if (result !== undefined) return result.data\r\n                return [];\r\n            }}\r\n            typeSearch={[\r\n                { propertySearch: 'groupCode', viewSearch: 'Mã Chức năng' },\r\n                { propertySearch: 'name', viewSearch: 'Tên Chức năng' }\r\n            ]}\r\n            viewData={(data: GroupPermissionAPIResult & { isAllow: Boolean }) => {\r\n                return <Fragment>\r\n                    <td>{data.groupCode}</td>\r\n                    <td>{data.name}</td>\r\n                </Fragment>\r\n            }}\r\n            header={<Fragment><th>Mã CN</th><th>Tên CN</th></Fragment>}\r\n            getKey={(data: GroupPermissionAPIResult) => { return data.id }}\r\n            onComplete={this.updateGroups.bind(this)}\r\n            getAllow={({ isAllow }: any) => isAllow}\r\n            textOnCompleteButton=\"Cập nhật\"\r\n        />\r\n    }\r\n}","import React from \"react\";\r\nimport AdminUserAPI, { AdminUserResult, AdminDTO } from \"../../../api/admin/admin-api\";\r\nimport moment from \"moment\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\nimport WForm from \"../../../components/wform\";\r\nimport SYSTEM_CONSTANTS from \"../../../constants\";\r\nimport WInput from \"../../../components/winput\";\r\nimport { Button } from \"reactstrap\";\r\n\r\ninterface EditAdminUserProps {\r\n    adminInfo: AdminUserResult,\r\n    adminMessageRequest: () => AdminMessageRequest,\r\n    onUpdate?: () => any\r\n}\r\ninterface EditAdminUserState {\r\n    input: AdminDTO,\r\n    isValidInput: {\r\n        email: boolean,\r\n        phone: boolean,\r\n        identityDocument: boolean\r\n    }\r\n}\r\nexport default class EditAdminUser extends React.Component<EditAdminUserProps, EditAdminUserState>{\r\n    avatar: React.RefObject<HTMLImageElement> = React.createRef();\r\n    avatarInput: React.RefObject<HTMLInputElement> = React.createRef();\r\n    wform: React.RefObject<WForm> = React.createRef();\r\n    constructor(props: EditAdminUserProps) {\r\n        super(props);\r\n        this.state = {\r\n            input: {},\r\n            isValidInput: { email: true, phone: true, identityDocument: true },\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.setInput();\r\n    }\r\n    setInput() {\r\n        let { adminInfo } = this.props;\r\n        let input: AdminDTO = {\r\n            id: adminInfo.id as any,\r\n            address: adminInfo.address,\r\n            adminCode: adminInfo.adminCode,\r\n            dateOfBirth: moment(adminInfo.dateOfBirth).format('YYYY-MM-DD'),\r\n            email: adminInfo.email,\r\n            fullname: adminInfo.fullname,\r\n            gender: adminInfo.gender as any,\r\n            identityDocument: adminInfo.identityDocument,\r\n            phone: adminInfo.phone\r\n        };\r\n        (this.avatar.current as any).src = `${process.env.REACT_APP_ADMIN_USER_IMAGE_PATH}${adminInfo.id}.jpg`;\r\n        (this.avatarInput as any).current.files = undefined;\r\n        this.setState(() => { return { input: input, isValidInput: { email: true, phone: true, identityDocument: true } } });\r\n    }\r\n    inputChange(fieldChange: string, evt: React.FormEvent<HTMLInputElement>, otherAction?: (evt: React.FormEvent<HTMLInputElement>) => any) {\r\n        (this.state.input as any)[fieldChange] = evt.currentTarget.value;\r\n        otherAction instanceof Function && otherAction(evt);\r\n        this.setState({});\r\n    }\r\n    radioInputGender(evt: React.ChangeEvent<HTMLInputElement>) {\r\n        this.state.input.gender = evt.currentTarget.value;\r\n    }\r\n    async updateAdminUser(evt: any) {\r\n        evt.preventDefault();\r\n        if (this.wform.current?.isValidInputs()) {\r\n            let update = await this.props.adminMessageRequest().sendRequest(() => {\r\n                return AdminUserAPI.updateUser(this.state.input);\r\n            })\r\n            if (update) {\r\n                let file: any = (this.avatarInput.current as any).files[0];\r\n                if (file) {\r\n                    let messageErrorUploadImage = update.message.content;\r\n                    let uploadImage: any = await this.props.adminMessageRequest().sendRequest(() => {\r\n                        return AdminUserAPI.uploadAvatar({ image: file, id: this.props.adminInfo.id });\r\n                    }, { getFailed: true });\r\n                    if (uploadImage.message.code !== 0) {\r\n                        messageErrorUploadImage += ` - ${this.props.adminMessageRequest().state.message}`;\r\n                        this.props.adminMessageRequest().setState({ color: 'warning', message: messageErrorUploadImage, isHide: false });\r\n                    }\r\n                }\r\n                this.props.onUpdate && await this.props.onUpdate();\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        let { input, isValidInput } = this.state;\r\n        return (\r\n            <WForm id={`form-main`} onSubmit={this.updateAdminUser.bind(this)} ref={this.wform as any} >\r\n                <div className=\"d-flex justify-content-between\">\r\n                    <h2>Cập nhật tài khoản {this.props.adminInfo.fullname}</h2>\r\n                    <img className=\"avatar\" title=\"Ảnh đại diện\" src={process.env.REACT_APP_ADMIN_USER_IMAGE_PATH + 'default.jpg'} alt=\"Avatar\"\r\n                        onError={(evt) => {\r\n                            evt.currentTarget.src = process.env.REACT_APP_ADMIN_USER_IMAGE_PATH + 'default.jpg';\r\n                        }}\r\n                        ref={this.avatar}\r\n                        onClick={() => { (this.avatarInput.current as any).click() }}\r\n                    ></img>\r\n                </div>\r\n                <div className=\"d-flex space-nm\">\r\n                    <WInput title_input=\"Email\" value={this.state.input.email}\r\n                        is_invalid={!isValidInput.email}\r\n                        onChange={(evt) => {\r\n                            this.inputChange('email', evt,\r\n                                (evt) => { this.state.isValidInput.email = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.email) !== null })\r\n                        }} required />\r\n                </div>\r\n                <div className=\"d-flex space-nm\">\r\n                    <WInput title_input=\"Tên đầy đủ\" value={input.fullname}\r\n                        onChange={(evt) => { this.inputChange('fullname', evt) }} required />\r\n                    <WInput title_input=\"Ngày sinh\" value={input.dateOfBirth} no_title_animation={true} type=\"date\"\r\n                        onChange={(evt) => { this.inputChange('dateOfBirth', evt) }} required />\r\n                </div>\r\n                <div className=\"d-flex space-nm\">\r\n                    <WInput title_input=\"Số điện thoại\" value={input.phone} is_invalid={!this.state.isValidInput.phone}\r\n                        onChange={(evt) => {\r\n                            this.inputChange('phone', evt,\r\n                                (evt) => { this.state.isValidInput.phone = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.numbers) != null }\r\n                            )\r\n                        }} required />\r\n                    <WInput title_input=\"Số chứng minh thư\" value={input.identityDocument} is_invalid={!isValidInput.identityDocument}\r\n                        onChange={(evt) => {\r\n                            this.inputChange('identityDocument', evt,\r\n                                (evt) => { this.state.isValidInput.identityDocument = evt.currentTarget.value.match(SYSTEM_CONSTANTS.REGEX.numbers) != null })\r\n                        }} required />\r\n                </div>\r\n                <input type=\"file\" style={{ display: 'none' }} ref={this.avatarInput} accept=\"image/*\" onChange={\r\n                    (evt) => {\r\n                        let { files } = evt.currentTarget;\r\n                        if (files && files[0]) {\r\n                            let image = this.avatar.current;\r\n                            let reader = new FileReader();\r\n                            reader.onload = ({ target }) => {\r\n                                (image as any).src = target?.result;\r\n                            };\r\n                            reader.readAsDataURL(files[0]);\r\n                        }\r\n                    }\r\n                } />\r\n                <WInput title_input=\"Địa chỉ\" value={input.address}\r\n                    onChange={(evt) => { this.inputChange('address', evt) }} required />\r\n                <div className=\"winput-group-other\">\r\n                    <label>Giới tính</label>\r\n                    <div className=\"d-flex space-nm\">\r\n                        <label><input type=\"radio\" name=\"gender\" value=\"0\" onChange={this.radioInputGender.bind(this)} defaultChecked />Nam</label>\r\n                        <label><input type=\"radio\" name=\"gender\" value=\"1\" onChange={this.radioInputGender.bind(this)} />Nữ</label>\r\n                        <label><input type=\"radio\" name=\"gender\" value=\"2\" onChange={this.radioInputGender.bind(this)} />Khác</label>\r\n                    </div>\r\n                </div>\r\n                <br></br>\r\n                <div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\">Cập nhật</Button>\r\n                    <Button color=\"danger\" size=\"sm\" onClick={this.setInput.bind(this)}>Xóa</Button>\r\n                </div>\r\n            </WForm>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport AdminUserAPI, { AdminUserResult } from \"../../../api/admin/admin-api\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput from \"../../../components/winput\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface AdminResetPasswordProps {\r\n    adminInfo: AdminUserResult,\r\n    adminMessageRequest: ()=>AdminMessageRequest\r\n}\r\ninterface AdminResetPasswordState {\r\n    passwordInput: string,\r\n    passwordConfirmInput: string\r\n}\r\nexport default class AdminResetPassword extends React.Component<AdminResetPasswordProps, AdminResetPasswordState> {\r\n    constructor(props: AdminResetPasswordProps) {\r\n        super(props);\r\n        this.state = {\r\n            passwordInput: '',\r\n            passwordConfirmInput: ''\r\n        }\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        this.props.adminMessageRequest().sendRequest(() => {\r\n            return AdminUserAPI.resetPasswordUser(this.props.adminInfo.id, this.state.passwordInput);\r\n        })\r\n    }\r\n    render() {\r\n        let { adminInfo } = this.props;\r\n        return <div className=\"form-container\">\r\n            <WForm onSubmit={this.update.bind(this)}>\r\n                <h2>Thay đổi mật khẩu {adminInfo.fullname}</h2>\r\n                <WInput title_input=\"Mật khẩu mới\" type=\"password\"\r\n                    onChange={(evt) => { this.setState({ passwordInput: evt.currentTarget.value }) }} />\r\n                <WInput title_input=\"Xác nhận mật khẩu mới\" type=\"password\"\r\n                    is_invalid={this.state.passwordConfirmInput !== this.state.passwordInput}\r\n                    onChange={(evt) => { this.setState({ passwordConfirmInput: evt.currentTarget.value }) }} />\r\n                <br />\r\n                <Button color=\"primary\" size=\"sm\" children=\"Cập nhật mật khẩu\" />\r\n            </WForm>\r\n        </div>\r\n    }\r\n}","import React, { Fragment } from \"react\";\r\nimport AdminUserAPI from \"../../../api/admin/admin-api\";\r\nimport { PermissionAPIResult } from \"../../../api/admin/permission-api\";\r\nimport ListSelect from \"../../../components/list-select\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdatePermissionsProps {\r\n    id: number | string,\r\n    adminMessageRequest: () => AdminMessageRequest\r\n}\r\nexport default class UpdatePermissions extends React.Component<UpdatePermissionsProps>{\r\n    async updatePermissions(permissions: any) {\r\n        let permissionIds: any[] = Object.keys(permissions);\r\n        this.props.adminMessageRequest().sendRequest(() => {\r\n            return AdminUserAPI.updateAdminPermissions(this.props.id as number, permissionIds);\r\n        })\r\n    }\r\n    render() {\r\n        return <ListSelect\r\n            getData={async () => {\r\n                let result = await this.props.adminMessageRequest().sendRequest(() => {\r\n                    return AdminUserAPI.getAdminPermissions(this.props.id as number);\r\n                }, { hideWhenDone: true });\r\n\r\n                if (result !== undefined) return result.data\r\n                return [];\r\n            }}\r\n            typeSearch={[\r\n                { propertySearch: 'code', viewSearch: 'Mã Chức năng' },\r\n                { propertySearch: 'name', viewSearch: 'Tên Chức năng' }\r\n            ]}\r\n            viewData={(data: PermissionAPIResult & { isAllow: Boolean }) => {\r\n                return <Fragment>\r\n                    <td key=\"code\">{data.code}</td>\r\n                    <td key=\"name\">{data.name}</td>\r\n                </Fragment>\r\n            }}\r\n            header={<Fragment><th>Mã CN</th><th>Tên CN</th></Fragment>}\r\n            getKey={(data: PermissionAPIResult) => { return data.id }}\r\n            onComplete={this.updatePermissions.bind(this)}\r\n            getAllow={({ isAllow }) => { return isAllow }}\r\n        />\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport AdminUserAPI, { AdminUserResult } from \"../../../api/admin/admin-api\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\nimport DetailAdminPage from \"../../../page-component/admin/menu-detail\";\r\nimport UpdateGroups from \"./admin-groups\";\r\nimport EditAdminUser from \"./edit-user\";\r\nimport AdminResetPassword from \"./reset-password\";\r\nimport UpdatePermissions from \"./update-permissions\";\r\n\r\ninterface DetailAdminUserProps {\r\n    goBack?: {\r\n        action: () => any,\r\n        id?: number | string\r\n        adminCode?: string,\r\n    },\r\n}\r\ninterface DetailAdminUserState {\r\n    adminInfo: AdminUserResult,\r\n    isNotFoundUser: boolean\r\n}\r\n\r\nexport default class DetailAdminUser extends React.Component<DetailAdminUserProps, DetailAdminUserState>{\r\n    avatar: React.RefObject<HTMLImageElement> = React.createRef();\r\n    oldLocation: { url: string, state: any };\r\n    detailPage = React.createRef<DetailAdminPage>();\r\n    nextUpdate = false;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            adminInfo: {} as any,\r\n            isNotFoundUser: false,\r\n        }\r\n        this.oldLocation = {} as any;\r\n    }\r\n    componentDidMount() {\r\n        this.getUser();\r\n    }\r\n    updateInfo() {\r\n        if (this.nextUpdate) {\r\n            this.nextUpdate = false;\r\n            setTimeout(() => {\r\n                this.getUser();\r\n            })\r\n        }\r\n    }\r\n    checkGender() {\r\n        console.log(Number(this.state.adminInfo.gender));\r\n        switch (Number(this.state.adminInfo.gender)) {\r\n            case 0: return 0;\r\n            case 1: return 1;\r\n            default: return undefined;\r\n        }\r\n    }\r\n    getAdminMessageReq(): AdminMessageRequest {\r\n        return this.detailPage.current?.adminMessageRequest.current as any\r\n    }\r\n    render() {\r\n        let { adminInfo } = this.state;\r\n        let goBackAction = this.props.goBack\r\n            ? () => { window.history.replaceState(this.oldLocation.state, '', this.oldLocation.url); this.props.goBack?.action() }\r\n            : '/admin/admin-user/view'\r\n\r\n        return (\r\n            <DetailAdminPage\r\n                ref={this.detailPage}\r\n                goBackAction={goBackAction}\r\n                menuConfig={[\r\n                    {\r\n                        name: \"Xem thông tin\", body: <div>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h2>Thông tin tài khoản {this.state.adminInfo.fullname}</h2>\r\n                                <img className=\"avatar\" src={`${process.env.REACT_APP_ADMIN_USER_IMAGE_PATH as string}${adminInfo.id}.jpg`}\r\n                                    onError={(evt) => { evt.currentTarget.src = `${process.env.REACT_APP_ADMIN_USER_IMAGE_PATH}default.jpg` }}\r\n                                />\r\n                            </div>\r\n                            <br />\r\n                            <table className=\"table wtable-info\">\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>ID</td>\r\n                                        <td>{adminInfo.id}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Tên tài khoản</td>\r\n                                        <td>{adminInfo.adminCode}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Tên đầy đủ</td>\r\n                                        <td>{adminInfo.fullname}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Email</td>\r\n                                        <td>{adminInfo.email}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Giới tính</td>\r\n                                        <td>{adminInfo.gender == 0 ? 'Nam' : adminInfo.gender == 1 ? 'Nữ' : 'Khác'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Địa chỉ</td>\r\n                                        <td>{adminInfo.address}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Số điện thoại</td>\r\n                                        <td>{adminInfo.phone}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Số CMND</td>\r\n                                        <td>{adminInfo.identityDocument}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Người tạo</td>\r\n                                        <td><Link to={\"/admin/admin-user/detail?adminCode=\" + adminInfo.createBy}>{adminInfo.createBy} - {moment(adminInfo.createDate).calendar()}</Link></td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Cập nhật lần cuối</td>\r\n                                        <td><Link to={\"/admin/admin-user/detail?adminCode=\" + adminInfo.modifiedBy}>{adminInfo.modifiedBy} - {moment(adminInfo.createDate).calendar()}</Link></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>,\r\n                        callback: this.updateInfo.bind(this)\r\n                    },\r\n                    {\r\n                        name: \"Cập nhật TK\",\r\n                        body: <EditAdminUser\r\n                            adminInfo={this.state.adminInfo}\r\n                            adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                            onUpdate={() => { this.nextUpdate = true }}\r\n                        />\r\n                    },\r\n                    {\r\n                        name: 'Cập nhật CN',\r\n                        body: <UpdatePermissions\r\n                            adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                            id={adminInfo.id}\r\n                        />\r\n                    },\r\n                    {\r\n                        name: 'Thay đổi mật khẩu',\r\n                        body: <AdminResetPassword\r\n                            adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                            adminInfo={this.state.adminInfo}\r\n                        />\r\n                    },\r\n                    {\r\n                        name: 'Cập nhật nhóm CN',\r\n                        body: <UpdateGroups\r\n                            adminInfo={this.state.adminInfo}\r\n                            adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        />\r\n                    }\r\n                ]}\r\n                interceptor={(menu: JSX.Element) =>\r\n                    !this.state.isNotFoundUser\r\n                        ? menu\r\n                        : (<div className=\"d-flex space-sm\">\r\n                            <Button color=\"primary\" size=\"sm\" onClick={this.getUser.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                        </div>)\r\n                }\r\n            />\r\n        )\r\n    }\r\n    async getUser() {\r\n        const getData = () => {\r\n            const { goBack }: any = this.props;\r\n            const search = new URLSearchParams(window.location.search);\r\n            for (let key of ['id', 'adminCode']) {\r\n                let value = (goBack && goBack[key]) || search.get(key);\r\n                if (value) return { key: key, value: value }\r\n            }\r\n        }\r\n        let data: any = getData();\r\n\r\n        if (data !== undefined) {\r\n            window.history.replaceState('', '', `/admin/admin-user/detail?${data.key}=${data.value}`);\r\n\r\n            let resultReq = await this.getAdminMessageReq().sendRequest(() => AdminUserAPI.getUser({ [data.key]: data.value } as any), { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                let adminInfo = resultReq.data;\r\n                await this.setState({ adminInfo: adminInfo });\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({ isNotFoundUser: true });\r\n    }\r\n}","import moment from 'moment';\r\nimport React, { Fragment } from \"react\";\r\nimport AdminUserAPI, { AdminUserResult } from \"../../../api/admin/admin-api\";\r\nimport { APIResult } from '../../../api/declare';\r\nimport ImageError from \"../../../components/image-error\";\r\nimport { AdminOverrideWindow } from '../../../contexts/admin-overide-window';\r\nimport EditSVG from '../../../logo-svg/edit';\r\nimport BaseCrudView, { BaseViewConfig } from '../base/base-view';\r\nimport DetailAdminUser from './detail-user';\r\n\r\nexport default class ViewAdminUser extends BaseCrudView<AdminUserResult> {\r\n    configure(): BaseViewConfig<AdminUserResult> {\r\n        return {\r\n            addPage: { textButton: 'Thêm Tài khoản', link: '/admin/admin-user/add' },\r\n            deleteAction: { textButton: 'Xóa', deleteMethod: (ids) => AdminUserAPI.deleteUsers(ids) },\r\n            urlPage: '/admin/admin-user/view',\r\n            headers: [\r\n                'TK',\r\n                'Tên TK',\r\n                'Tên',\r\n                'Giới tính',\r\n                'Cập nhật',\r\n                'Ngày sinh',\r\n                <div className='text-center'>Chi tiết</div>\r\n            ]\r\n        }\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null;\r\n    }\r\n    getId(data: AdminUserResult) {\r\n        return data.id\r\n    }\r\n    fillData(data: AdminUserResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>\r\n                <ImageError\r\n                    src={(process.env.REACT_APP_ADMIN_USER_IMAGE_PATH || '') + data.id + '.jpg'}\r\n                    err_src={(process.env.REACT_APP_ADMIN_USER_IMAGE_PATH || '') + 'default.jpg'} />\r\n            </td>\r\n            <td>{data.adminCode}</td>\r\n            <td>{data.fullname}</td>\r\n            <td>{data.gender === 0 ? 'Nam' : data.gender === 1 ? 'Nữ' : 'Khác'}</td>\r\n            <td title={`Tạo bởi: ${data.createBy} - ${moment(data.createDate).calendar()}\\nCập nhật: ${data.modifiedBy}-${moment(data.modifiedDate).calendar()}}`}>\r\n                {data.modifiedBy}\r\n            </td>\r\n            <td>{moment(data.dateOfBirth).format('DD-MM-YYYY')}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <button className={`btn btn-primary btn-sm ${unselectClass}`} onClick={() => {\r\n                            const editWindow = addWindow(<DetailAdminUser goBack={{\r\n                                action: () => {\r\n                                    removeWindow(editWindow)\r\n                                    window.history.replaceState('', '', `${this.config.urlPage}?page=${this.page}&limit=${this.limit}`)\r\n                                },\r\n                                id: data.id\r\n                            }} />)\r\n                        }}><EditSVG color=\"white\" className=\"icon\" /></button>\r\n                    }}\r\n                </AdminOverrideWindow.Consumer>\r\n            </td>\r\n        </Fragment >\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return AdminUserAPI.getAllUser({ page: page, limit: limit, isUnlimited: false })\r\n    }\r\n}","import axiosClient from \"../axiosCient\"\r\nimport { APIResult, BaseDataModelAPIResult, PageDTO } from \"../declare\"\r\n\r\nconst AuthorAPI = {\r\n    getAll: (pageInfo: PageDTO): Promise<APIResult<AuthorAPIResult[]>> => axiosClient.get('/admin/book/authors', { params: pageInfo }),\r\n    deleteAuthors: (ids: number[]) => axiosClient.delete('/admin/book/author', { data: { ids: ids } }),\r\n    addAuthor: (authors: AuthorAPIResult) => axiosClient.post('/admin/book/author', authors),\r\n    updateAuthor: (authors: AuthorAPIResult) => axiosClient.put('/admin/book/author', authors),\r\n    getAuthorById: (id: number): Promise<APIResult<AuthorAPIResult>> => axiosClient.get('/admin/book/author', { params: { id: id } })\r\n}\r\n\r\nexport default AuthorAPI\r\n\r\nexport interface AuthorAPIResult extends BaseDataModelAPIResult {\r\n    \"id\": number,\r\n    \"name\": string,\r\n    \"authorCode\": string,\r\n    \"description\": string\r\n}","import { AxiosResponse } from \"axios\";\r\nimport axiosClient from \"../axiosCient\";\r\nimport { APIResult, BaseDataModelAPIResult, PageDTO } from \"../declare\";\r\nimport { AuthorAPIResult } from \"./author-api\";\r\nimport { CategoryAPIResult } from \"./category-book-api\";\r\nimport { PublisherAPIResult } from \"./publisher-api\";\r\n\r\nconst BookAPI = {\r\n    getBooks: (pageInfo: PageDTO)\r\n        : Promise<APIResult<BookAPIResult>> => {\r\n        return axiosClient.get('/admin/books', { params: pageInfo });\r\n    },\r\n    addBook: (data: any): Promise<APIResult<BookAPIResult>> => {\r\n        return axiosClient.post('/admin/book', data);\r\n    },\r\n    uploadImage: (data: { image: File, id: number }) => {\r\n        const formData = new FormData();\r\n        formData.append('id', data.id as any);\r\n        formData.append('image', data.image as any);\r\n        return axiosClient.put('/admin/book/upload-image', formData, {\r\n            headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n    },\r\n    deleteBook: (ids: number[])=> axiosClient.delete('/admin/books', {data: { ids: ids }}),\r\n    updateBook: (book: BookAPIResult) => axiosClient.put('/admin/book', book),\r\n    getBook: (id: number) => axiosClient.get('/admin/book', { params: { id: id }})\r\n}\r\n\r\nexport interface BookAPIResult extends BaseDataModelAPIResult {\r\n    \"title\"?: string,\r\n    \"edition\"?: number,\r\n    \"price\"?: number,\r\n    \"pageNumber\"?: number,\r\n    \"description\"?: string,\r\n    \"rate\"?: number,\r\n    \"rateCount\"?: number,\r\n    \"isbn\"?: number,\r\n    \"quantity\"?: number,\r\n    \"publisher\"?: PublisherAPIResult,\r\n    \"categories\"?: CategoryAPIResult[],\r\n    \"authors\"?: AuthorAPIResult[]\r\n}\r\nexport default BookAPI;","import axiosClient from \"../axiosCient\";\r\nimport { APIResult, PageDTO } from \"../declare\";\r\n\r\nconst CategoryAPI = {\r\n    getAllCategory: (pageInfo: PageDTO): Promise<APIResult<CategoryAPIResult[]>> => axiosClient.get('/admin/book/categories', { params: pageInfo }),\r\n    deleteCategories: (ids: number[]) => axiosClient.delete('/admin/book/categories', { data: { ids: ids } }),\r\n    addCategory: (category: CategoryDTO) => axiosClient.post('/admin/book/category', category),\r\n    updateCategory: (category: CategoryDTO) => axiosClient.put('/admin/book/category', category),\r\n    getCategory: (id: number) => axiosClient.get('/admin/book/category', { params: { id: id } })\r\n}\r\nexport default CategoryAPI;\r\n\r\nexport interface CategoryAPIResult {\r\n    \"id\": number\r\n    \"categoryCode\": string,\r\n    \"category\": string,\r\n    \"createDate\": string,\r\n    \"modifiedDate\": string,\r\n    \"createBy\": string,\r\n    \"modifiedBy\": string,\r\n}\r\nexport interface CategoryDTO extends CategoryAPIResult {\r\n\r\n}","import axiosClient from \"../axiosCient\";\r\nimport { APIResult, PageDTO } from \"../declare\";\r\n\r\nconst PublisherAPI = {\r\n    getAll: (pageInfo: PageDTO): Promise<APIResult<PublisherAPIResult[]>> => axiosClient.get('/admin/book/publishers', { params: pageInfo }),\r\n    deletePublishers: (ids: number[]) => axiosClient.delete('/admin/book/publisher', { data: { ids: ids } }),\r\n    addPublisher: (publisher: PublisherAPIResult) => axiosClient.post('/admin/book/publisher', publisher),\r\n    updatePublisher: (publisher: PublisherAPIResult) => axiosClient.put('/admin/book/publisher', publisher),\r\n    getPublisherById: (id: number) => axiosClient.get('/admin/book/publisher', { params: { id: id } })\r\n}\r\nexport default PublisherAPI;\r\n\r\nexport interface PublisherAPIResult {\r\n    \"id\": number,\r\n    \"publisherCode\": string,\r\n    \"name\": string,\r\n    \"createDate\": string,\r\n    \"modifiedDate\": string,\r\n    \"createBy\": string,\r\n    \"modifiedBy\": string,\r\n    \"deleteStatus\": number\r\n}","import React from \"react\";\r\nimport Utils from \"../../common/Utils\";\r\nimport AdminMessageRequest from \"./admin-message-request\";\r\n\r\ninterface AMRWindowState {\r\n    isDisable: boolean\r\n}\r\nexport default class AMRWindow extends React.Component<React.HTMLAttributes<HTMLElement>, AMRWindowState> {\r\n    private adminMessage = React.createRef<AdminMessageRequest>()\r\n    constructor(props: React.HTMLAttributes<HTMLElement>) {\r\n        super(props)\r\n        this.state = {\r\n            isDisable: false\r\n        }\r\n        Utils.preventSetStateWhenComponentUnmount(this)\r\n        this.getMessageRequest = this.getMessageRequest.bind(this)\r\n    }\r\n    getMessageRequest(): AdminMessageRequest {\r\n        return this.adminMessage.current as AdminMessageRequest;\r\n    }\r\n    render() {\r\n        return <div {...this.props}>\r\n            <AdminMessageRequest\r\n                ref={this.adminMessage}\r\n                onBeforeSendRequest={() => this.setState({ isDisable: true })}\r\n                onCompleteSendRequest={() => this.setState({ isDisable: false })}\r\n            />\r\n            <div className={this.state.isDisable ? 'disabled' : ''}>\r\n                {this.props.children}\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React, { useRef, useState } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport AuthorAPI, { AuthorAPIResult } from \"../../../api/admin/author-api\";\r\nimport BookAPI, { BookAPIResult } from \"../../../api/admin/book-api\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../api/admin/category-book-api\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../api/admin/publisher-api\";\r\nimport Utils from \"../../../common/Utils\";\r\nimport ListSelect from \"../../../components/list-select\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport { AdminOverrideWindow } from \"../../../contexts/admin-overide-window\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\nimport AMRWindow from \"../../../page-component/admin/admin-message-request-disable-window\";\r\n\r\ninterface AddBookState {\r\n    isDisable: boolean,\r\n    publishers: PublisherAPIResult[],\r\n    categories: any,\r\n    authors: any,\r\n}\r\n\r\nexport interface ModelObjectList<K> {\r\n    [modelId: number]: K\r\n}\r\n\r\nexport default class AddBook extends React.Component<{}, AddBookState> {\r\n    form = React.createRef<WForm>();\r\n    amrWindow = React.createRef<AMRWindow>();\r\n    isShowCategories = false;\r\n    imageUpload: File | undefined = undefined;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            isDisable: false,\r\n            publishers: [],\r\n            categories: {},\r\n            authors: {}\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        PublisherAPI.getAll({ unlimited: true }).then((resp) => {\r\n            this.setState({ publishers: resp.data });\r\n        })\r\n        this.form.current?.setData({\r\n            title: 'Tôi thấy bà hàng xóm',\r\n            isbn: 12,\r\n            pageNumber: 12,\r\n            price: 12,\r\n            description: 'Hello',\r\n            edition: 14\r\n        } as BookAPIResult)\r\n    }\r\n    async onSubmit(evt: any) {\r\n        evt.preventDefault();\r\n        const {\r\n            amrWindow: { current: amr },\r\n            form: { current: form },\r\n            imageUpload: file\r\n        } = this\r\n        if (!amr || !form) return\r\n        const messageReq = amr.getMessageRequest()\r\n\r\n        //upload book\r\n        const book = { ...form.getData(), categories: Object.values(this.state.categories), authors: Object.values(this.state.authors) }\r\n        book.publisher = { id: book.publisher };\r\n        const resultAddBook = await messageReq.sendRequest(() => BookAPI.addBook(book));\r\n        if (!resultAddBook) return\r\n\r\n        //uploadImage\r\n        const message = { ...messageReq.state }\r\n        const bookId = resultAddBook.data.id as number\r\n\r\n        if (!file) return\r\n        const resultUploadImage = await messageReq.sendRequest(() => BookAPI.uploadImage({\r\n            image: file, id: bookId\r\n        }))\r\n\r\n        if (!resultUploadImage) {\r\n            message.color = 'warning'\r\n            message.message = `${messageReq.state.message} - ${message.message}`\r\n        }\r\n        messageReq.setState(message)\r\n    }\r\n    render() {\r\n        return <AMRWindow className=\"form-container\" ref={this.amrWindow}>\r\n            <WForm className={this.state.isDisable ? 'disabled' : ''} onSubmit={this.onSubmit.bind(this)} ref={this.form as any}>\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h2>Thêm Sách</h2>\r\n                                <BookCoverImage onImageChange={(file) => this.imageUpload = file} />\r\n                            </div>\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInput name=\"title\" title_input=\"Tên sách\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput title_input=\"isbn\" name=\"isbn\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"pageNumber\" title_input=\"Số trang\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"edition\" title_input=\"Tái bản\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"price\" title_input=\"Giá\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInputOther title_input=\"Nhà xuất bản\">\r\n                                <select name=\"publisher\">\r\n                                    {this.state.publishers.map((publisher, index) => {\r\n                                        return <option key={index} value={publisher.id}>{publisher.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </WInputOther>\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <AuthorsInputListSelect\r\n                                onComplete={authors => this.setState({ authors: authors })}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <CategoriesInputListSelect\r\n                                onComplete={(categories) => this.setState({ categories: categories })} />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInputOther title_input=\"Mô tả\">\r\n                                <textarea name=\"description\" rows={4} required></textarea>\r\n                            </WInputOther>\r\n                        </Col>\r\n                        <Col>\r\n                            <div className=\"d-flex space-sm\">\r\n                                <Button color=\"primary\" size=\"sm\">Thêm Sách</Button>\r\n                                <Link to=\"/admin/book/view\" className=\"btn btn-danger btn-sm\">Quay về</Link>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </WForm>\r\n        </AMRWindow>\r\n    }\r\n}\r\n\r\n\r\nexport function CategoriesInputListSelect<MODEL_LIST_OBJ extends ModelObjectList<API_RESULT>, API_RESULT extends CategoryAPIResult>({ onComplete, valuesSelect }: {\r\n    onComplete: (categories: MODEL_LIST_OBJ) => any,\r\n    valuesSelect?: MODEL_LIST_OBJ\r\n}) {\r\n    if (typeof valuesSelect !== 'object') valuesSelect = {} as MODEL_LIST_OBJ\r\n    const [categories, setCategories] = useState(valuesSelect)\r\n    return (\r\n        < div className=\"d-flex space-nm align-items-end\" >\r\n            <WInput title_input=\"Thể loại\" readOnly required is_invalid={Object.keys(categories).length === 0}\r\n                value={Object.values(categories)\r\n                    .map(category => category.category).join(', ')} />\r\n            <AdminOverrideWindow.Consumer>\r\n                {({ addWindow, removeWindow }) => {\r\n                    return <Button color=\"primary\" size=\"sm\"\r\n                        className=\"mb-2\"\r\n                        style={{ whiteSpace: 'nowrap' }}\r\n                        onClick={() => {\r\n                            const categoriesView = addWindow(\r\n                                <div className=\"default-view\">\r\n                                    <Link to=\"/admin/category/add\" className='btn btn-primary btn-sm' children='Thêm thể loại' />\r\n                                    <ListSelect\r\n                                        getData={async () => (await CategoryAPI.getAllCategory({ unlimited: true })).data}\r\n                                        viewData={(data: API_RESULT) => {\r\n                                            return <Fragment>\r\n                                                <td key=\"categoryCode\">{data.categoryCode}</td>\r\n                                                <td key=\"category\">{data.category}</td>\r\n                                            </Fragment>\r\n                                        }}\r\n                                        typeSearch={[\r\n                                            { propertySearch: 'categoryCode', viewSearch: 'Mã thể loại' },\r\n                                            { propertySearch: 'category', viewSearch: 'Thể loại' }\r\n                                        ]}\r\n                                        header={<Fragment>\r\n                                            <th key=\"categoryCode\">Mã thể loại</th>\r\n                                            <th key=\"category\">Thể loại</th>\r\n                                        </Fragment>}\r\n                                        getKey={(data: API_RESULT) => { return data.id }}\r\n                                        onComplete={(categories) => {\r\n                                            removeWindow(categoriesView as any);\r\n                                            setCategories(categories)\r\n                                            onComplete(categories)\r\n                                        }}\r\n                                        valueSelected={categories}\r\n                                    />\r\n                                </div>)\r\n                        }} >Thể loại</Button>\r\n                }}\r\n            </AdminOverrideWindow.Consumer>\r\n        </ div>\r\n    )\r\n}\r\n\r\nexport function AuthorsInputListSelect<MODEL_LIST_OBJ extends ModelObjectList<API_RESULT>, API_RESULT extends AuthorAPIResult>({ onComplete, valuesSelect }: {\r\n    onComplete: (authors: MODEL_LIST_OBJ) => any,\r\n    valuesSelect?: MODEL_LIST_OBJ\r\n}) {\r\n    if (!valuesSelect || typeof valuesSelect !== 'object') valuesSelect = {} as MODEL_LIST_OBJ\r\n    const [authors, setAuthors] = useState<MODEL_LIST_OBJ>(valuesSelect)\r\n    return (\r\n        <div className=\"d-flex space-nm align-items-end\">\r\n            <WInput title_input=\"Tác giả\" readOnly required is_invalid={Object.keys(authors).length === 0}\r\n                value={Object.values(authors)\r\n                    .map((author) => author.name)\r\n                    .join(', ')} />\r\n            <AdminOverrideWindow.Consumer>\r\n                {({ addWindow, removeWindow }) => {\r\n                    return <Button color=\"primary\" size=\"sm\"\r\n                        style={{ whiteSpace: 'nowrap' }}\r\n                        className=\"mb-2\"\r\n                        onClick={() => {\r\n                            let authorView = addWindow(\r\n                                <div className=\"default-view\">\r\n                                    <Link to=\"/admin/author/add\" className='btn btn-primary btn-sm' children='Thêm tác giả' />\r\n                                    <ListSelect\r\n                                        getData={async () => (await AuthorAPI.getAll({ unlimited: true })).data}\r\n                                        viewData={(data: API_RESULT) => {\r\n                                            return <Fragment>\r\n                                                <td>{data.authorCode}</td>\r\n                                                <td>{data.name}</td>\r\n                                            </Fragment>\r\n                                        }}\r\n                                        typeSearch={[\r\n                                            { propertySearch: 'authorCode', viewSearch: 'Mã Tác giả' },\r\n                                            { propertySearch: 'name', viewSearch: 'Tên Tác giả' }\r\n                                        ]}\r\n                                        header={<Fragment>\r\n                                            <th>Mã tác giả</th>\r\n                                            <th>Tên tác giả</th>\r\n                                        </Fragment>}\r\n                                        getKey={(data: API_RESULT) => { return data.id }}\r\n                                        onComplete={(authors: MODEL_LIST_OBJ) => {\r\n                                            removeWindow(authorView as any);\r\n                                            setAuthors(authors)\r\n                                            onComplete(authors)\r\n                                        }}\r\n                                        valueSelected={authors}\r\n                                    />\r\n                                </div>)\r\n                        }} >Tác giả</Button>\r\n                }}\r\n            </AdminOverrideWindow.Consumer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function BookCoverImage({ onImageChange, imagePath = \"default\" }: { onImageChange?: (file: File) => void, imagePath?: string }) {\r\n    const imageView = useRef<HTMLImageElement>(null);\r\n    const inputImage = useRef<HTMLInputElement>(null);\r\n\r\n    return <div>\r\n        <img className=\"avatar\" title=\"Ảnh bìa sách\"\r\n            style={{ borderRadius: 0 }}\r\n            src={process.env.REACT_APP_BOOK_IMAGE_PATH + `${imagePath}.jpg`}\r\n            alt=\"default\" ref={imageView}\r\n            onClick={() => { inputImage.current?.click() }}\r\n        ></img>\r\n        <input type=\"file\" className=\"d-none\" ref={inputImage} onChange={(evt) => {\r\n            const imgView = imageView.current\r\n            if (!imgView) return\r\n            const file = Utils.viewImageFromInputFileE(evt.currentTarget, imgView) as File\r\n            onImageChange && onImageChange(file)\r\n        }} />\r\n    </div >\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport AuthorAPI, { AuthorAPIResult } from \"../../../../api/admin/author-api\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../../api/admin/category-book-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../../components/winput\";\r\nimport AMRWindow from \"../../../../page-component/admin/admin-message-request-disable-window\";\r\n\r\nconst goBackURL = \"/admin/book/author/view\"\r\nconst mainURL = \"/admin/book/author/add\"\r\n\r\nexport default class AddAuthor extends React.Component {\r\n    amr = React.createRef<AMRWindow>();\r\n    form = React.createRef<WForm>();\r\n    componentDidMount() {\r\n        const form = this.form.current\r\n        if (!form) return\r\n        form.setData({\r\n            authorCode: \"NGOC_CAM\",\r\n            name: \"Ngọc Cam\",\r\n            description: \"My name is Ngoc Cam\"\r\n        } as AuthorAPIResult)\r\n    }\r\n    insert(evt: any) {\r\n        evt.preventDefault()\r\n        const { form: { current: form }, amr: { current: amr } } = this\r\n        if (!form || !amr) return\r\n        const sendRequest = amr.getMessageRequest().sendRequest\r\n\r\n        const data: AuthorAPIResult = form.getData()\r\n        sendRequest(\r\n            AuthorAPI.addAuthor(data))\r\n    }\r\n    render() {\r\n        return <AMRWindow ref={this.amr} className=\"form-container\">\r\n            <WForm ref={this.form} onSubmit={this.insert.bind(this)} >\r\n                <h3>Thêm tác giả</h3>\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Mã tác giả\" name=\"authorCode\" />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên tác giả\" name=\"name\" />\r\n                        </Col>\r\n                        <Col>\r\n                            <WInputOther title_input=\"Mô tả\">\r\n                                <textarea rows={4} name=\"description\" />\r\n                            </WInputOther>\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-sm mt-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Thêm</Button>\r\n                        <Link to={goBackURL} className=\"btn btn-sm btn-danger\">Quay về</Link>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        </AMRWindow>\r\n    }\r\n}","import React from \"react\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport AuthorAPI, { AuthorAPIResult } from \"../../../../api/admin/author-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../../components/winput\";\r\nimport AdminMessageRequest from \"../../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdateAuthorProps {\r\n    authorInfo: AuthorAPIResult\r\n    getAdminMessageRequest: () => AdminMessageRequest\r\n    onUpdateSuccess: () => void\r\n}\r\n\r\nexport default class UpdatePublisher extends React.Component<UpdateAuthorProps> {\r\n    form = React.createRef<WForm>();\r\n\r\n    async componentDidMount() {\r\n        const { authorInfo: categoryInfo } = this.props\r\n        this.form.current?.setData(categoryInfo)\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        const {\r\n            props: { getAdminMessageRequest, onUpdateSuccess },\r\n            form: { current: form }\r\n        } = this\r\n\r\n        const amr = getAdminMessageRequest()\r\n        if (!form || !amr) return\r\n\r\n        const data: AuthorAPIResult = form.getData();\r\n        const resultUpdate = amr.sendRequest(AuthorAPI.updateAuthor(data))\r\n\r\n        if (!resultUpdate) return\r\n        onUpdateSuccess && onUpdateSuccess()\r\n\r\n    }\r\n    render() {\r\n        const { authorInfo } = this.props\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)} className=\"form-container\">\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h3><strong>{authorInfo.authorCode}</strong></h3>\r\n                            </div>\r\n                        </Col>\r\n                        <input type=\"hidden\" name=\"id\" readOnly={true} value={authorInfo.id}></input>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên tác giả\" name=\"name\" />\r\n                        </Col>\r\n                        <Col>\r\n                            <WInputOther title_input=\"Mô tả\">\r\n                                <textarea name=\"description\"></textarea>\r\n                            </WInputOther>\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-nm mb-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Cập nhật</Button>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        )\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport AuthorAPI, { AuthorAPIResult } from \"../../../../api/admin/author-api\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../../api/admin/publisher-api\";\r\nimport ReloadSVG from \"../../../../logo-svg/reload\";\r\nimport DetailAdminPage from \"../../../../page-component/admin/menu-detail\";\r\nimport UpdatePublisher from \"./update\";\r\n\r\nconst goBackURL = \"/admin/book/author/view\"\r\nconst mainURL = \"/admin/book/author/detail\"\r\n\r\ninterface DetailAuthorProps {\r\n    goBack?: {\r\n        action: () => void,\r\n        id: number,\r\n    }\r\n}\r\ninterface DetailAuthorState {\r\n    authorInfo: AuthorAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailAuthor extends React.Component<DetailAuthorProps, DetailAuthorState> {\r\n    detailPage: React.RefObject<DetailAdminPage> = React.createRef();\r\n    nextUpdate = false;\r\n    goBackURL: string;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            authorInfo: {} as any,\r\n            isNotFoundResult: false,\r\n        }\r\n        this.goBackURL = window.location.href\r\n    }\r\n    componentDidMount() {\r\n        this.getCategory();\r\n    }\r\n    getAdminMessageReq() {\r\n        return this.detailPage.current?.adminMessageRequest.current as any;\r\n    }\r\n    render() {\r\n        const { authorInfo: publisherInfo } = this.state;\r\n        const goBackAction = this.props.goBack\r\n            ? () => {\r\n                window.history.pushState('', '', this.goBackURL)\r\n                this.props.goBack?.action();\r\n            }\r\n            : goBackURL\r\n\r\n        const viewBook = (<div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h3><strong>{this.state.authorInfo.name}</strong></h3>\r\n            </div>\r\n            <br />\r\n            <table className=\"table wtable-info\">\r\n                <tbody>\r\n                    <tr><td>ID</td><td>{publisherInfo.id}</td></tr>\r\n                    <tr><td>Mã Tác giả</td><td>{publisherInfo.authorCode}</td></tr>\r\n                    <tr><td>Tên Tác giả</td><td>{publisherInfo.name}</td></tr>\r\n                    <tr><td>Mô tả</td><td>{publisherInfo.description}</td></tr>\r\n                    <tr>\r\n                        <td>Cập nhật</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${publisherInfo.modifiedBy}`}>{publisherInfo.modifiedBy}</Link> - {moment(publisherInfo.modifiedDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Tạo bởi</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${publisherInfo.createBy}`}>{publisherInfo.createBy}</Link> - {moment(publisherInfo.createDate).calendar()}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>)\r\n        return <DetailAdminPage ref={this.detailPage}\r\n            interceptor={(menu) => !this.state.isNotFoundResult\r\n                ? menu\r\n                : (<div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\" onClick={this.getCategory.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                </div>)\r\n            }\r\n            goBackAction={goBackAction}\r\n            menuConfig={[\r\n                {\r\n                    name: 'Xem thông tin',\r\n                    body: viewBook,\r\n                    callback: () => {\r\n                        if (this.nextUpdate) {\r\n                            this.nextUpdate = false;\r\n                            this.getCategory();\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: 'Cập nhật',\r\n                    body: <UpdatePublisher\r\n                        authorInfo={this.state.authorInfo}\r\n                        getAdminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        onUpdateSuccess={() => this.nextUpdate = true}\r\n                    />\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getCategory() {\r\n        const goBackId = this.props.goBack && this.props.goBack.id\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const id = goBackId || requestId;\r\n        const adminMessageRequest = this.getAdminMessageReq();\r\n\r\n        if (id) {\r\n            if (this.props.goBack) window.history.pushState('', '', `${mainURL}?id=${id}`)\r\n\r\n            const resultReq = await adminMessageRequest.sendRequest(() => {\r\n                return AuthorAPI.getAuthorById(id as number)\r\n            }, { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                this.setState({ authorInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport AuthorAPI, { AuthorAPIResult } from \"../../../../api/admin/author-api\";\r\nimport { APIResult } from \"../../../../api/declare\";\r\nimport { AdminOverrideWindow } from \"../../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../../logo-svg/edit\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../../base/base-view\";\r\nimport DetailAuthor from \"./detail\";\r\n\r\nexport default class ViewAuthorBook extends BaseCrudView<AuthorAPIResult>{\r\n    getId(author: AuthorAPIResult) {\r\n        return author.id\r\n    }\r\n    fillData(author: AuthorAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>{author.authorCode}</td>\r\n            <td>{author.name}</td>\r\n            <td className='text-center'>\r\n                <AdminOverrideWindow.Consumer\r\n                    children={({ addWindow, removeWindow }) => <Button size='sm' color='primary' className={unselectClass} onClick={() => {\r\n                        const detailPage = addWindow(<DetailAuthor\r\n                            goBack={{\r\n                                action: () => removeWindow(detailPage),\r\n                                id: author.id\r\n                            }}\r\n                        />)\r\n                    }}>\r\n                        <EditSVG color=\"white\" className=\"icon\" />\r\n                    </Button>}\r\n                />\r\n            </td>\r\n        </Fragment>\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return AuthorAPI.getAll({ page: page, limit: limit, unlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n    configure(): BaseViewConfig<any> {\r\n        return {\r\n            headers: [\r\n                'Mã tác giả',\r\n                'Tên tác giả',\r\n                <div className=\"text-center\">Chi tiết</div>\r\n            ],\r\n            urlPage: '/admin/book/author/view',\r\n            addPage: {\r\n                link: '/admin/book/author/add',\r\n                textButton: 'Thêm tác giả',\r\n            },\r\n            deleteAction: {\r\n                deleteMethod: AuthorAPI.deleteAuthors,\r\n                textButton: 'Xóa'\r\n            }\r\n        }\r\n    }\r\n\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../../api/admin/category-book-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput from \"../../../../components/winput\";\r\nimport AMRWindow from \"../../../../page-component/admin/admin-message-request-disable-window\";\r\n\r\nconst goBackURL = \"/admin/book/category/view\"\r\nconst mainURL = \"/admin/book/category/add\"\r\n\r\nexport default class AddCategory extends React.Component {\r\n    amr = React.createRef<AMRWindow>();\r\n    form = React.createRef<WForm>();\r\n    componentDidMount() {\r\n        const form = this.form.current\r\n        if (!form) return\r\n        form.setData({\r\n            categoryCode: \"TRINH_THAM\",\r\n            category: \"Trinh thám\",\r\n        } as CategoryAPIResult)\r\n    }\r\n    insert(evt: any) {\r\n        evt.preventDefault()\r\n        const { form: { current: form }, amr: { current: amr } } = this\r\n        if (!form || !amr) return\r\n        const sendRequest = amr.getMessageRequest().sendRequest\r\n\r\n        const data: CategoryAPIResult = form.getData()\r\n        sendRequest(\r\n            CategoryAPI.addCategory(data))\r\n    }\r\n    render() {\r\n        return <AMRWindow ref={this.amr} className=\"form-container\">\r\n            <WForm ref={this.form} onSubmit={this.insert.bind(this)} >\r\n                <h3>Thêm thể loại</h3>\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Mã thể loại\" name=\"categoryCode\" />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên thể loại\" name=\"category\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-sm mt-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Thêm</Button>\r\n                        <Link to={goBackURL} className=\"btn btn-sm btn-danger\">Quay về</Link>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        </AMRWindow>\r\n    }\r\n}","import React from \"react\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../../api/admin/category-book-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput from \"../../../../components/winput\";\r\nimport AdminMessageRequest from \"../../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdateCategoryProps {\r\n    categoryInfo: CategoryAPIResult\r\n    getAdminMessageRequest: () => AdminMessageRequest\r\n    onUpdateSuccess: () => void\r\n}\r\n\r\nexport default class UpdateCategory extends React.Component<UpdateCategoryProps> {\r\n    form = React.createRef<WForm>();\r\n\r\n    async componentDidMount() {\r\n        const { categoryInfo } = this.props\r\n        this.form.current?.setData(categoryInfo)\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        const {\r\n            props: { getAdminMessageRequest, onUpdateSuccess },\r\n            form: { current: form }\r\n        } = this\r\n\r\n        const amr = getAdminMessageRequest()\r\n        if (!form || !amr) return\r\n\r\n        const data: CategoryAPIResult = form.getData();\r\n        const resultUpdate = amr.sendRequest(CategoryAPI.updateCategory(data))\r\n\r\n        if (!resultUpdate) return\r\n        onUpdateSuccess && onUpdateSuccess()\r\n\r\n    }\r\n    render() {\r\n        const { categoryInfo } = this.props\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)} className=\"form-container\">\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h3><strong>{categoryInfo.category}</strong></h3>\r\n                            </div>\r\n                        </Col>\r\n                        <input type=\"hidden\" name=\"id\" readOnly={true} value={categoryInfo.id}></input>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên thể loại\" name=\"category\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-nm mb-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Cập nhật</Button>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        )\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../../api/admin/category-book-api\";\r\nimport ReloadSVG from \"../../../../logo-svg/reload\";\r\nimport DetailAdminPage from \"../../../../page-component/admin/menu-detail\";\r\nimport UpdateCategory from \"./update\";\r\n\r\nconst goBackURL = \"/admin/book/category/view\"\r\nconst mainURL = \"/admin/book/category/detail\"\r\n\r\ninterface DetailCategoryProps {\r\n    goBack?: {\r\n        action: () => void,\r\n        id: number,\r\n    }\r\n}\r\ninterface DetailCategoryState {\r\n    categoryInfo: CategoryAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailCategory extends React.Component<DetailCategoryProps, DetailCategoryState> {\r\n    detailPage: React.RefObject<DetailAdminPage> = React.createRef();\r\n    nextUpdate = false;\r\n    goBackURL: string;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            categoryInfo: {} as any,\r\n            isNotFoundResult: false,\r\n        }\r\n        this.goBackURL = window.location.href\r\n    }\r\n    componentDidMount() {\r\n        this.getCategory();\r\n    }\r\n    getAdminMessageReq() {\r\n        return this.detailPage.current?.adminMessageRequest.current as any;\r\n    }\r\n    render() {\r\n        const { categoryInfo } = this.state;\r\n        const goBackAction = this.props.goBack\r\n            ? () => {\r\n                window.history.pushState('', '', this.goBackURL)\r\n                this.props.goBack?.action();\r\n            }\r\n            : goBackURL\r\n\r\n        const viewBook = (<div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h3><strong>{this.state.categoryInfo.category}</strong></h3>\r\n            </div>\r\n            <br />\r\n            <table className=\"table wtable-info\">\r\n                <tbody>\r\n                    <tr><td>ID</td><td>{categoryInfo.id}</td></tr>\r\n                    <tr><td>Mã thể loại</td><td>{categoryInfo.categoryCode}</td></tr>\r\n                    <tr><td>Tên thể loại</td><td>{categoryInfo.category}</td></tr>\r\n                    <tr>\r\n                        <td>Cập nhật</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${categoryInfo.modifiedBy}`}>{categoryInfo.modifiedBy}</Link> - {moment(categoryInfo.modifiedDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Tạo bởi</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${categoryInfo.createBy}`}>{categoryInfo.createBy}</Link> - {moment(categoryInfo.createDate).calendar()}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>)\r\n        return <DetailAdminPage ref={this.detailPage}\r\n            interceptor={(menu) => !this.state.isNotFoundResult\r\n                ? menu\r\n                : (<div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\" onClick={this.getCategory.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                </div>)\r\n            }\r\n            goBackAction={goBackAction}\r\n            menuConfig={[\r\n                {\r\n                    name: 'Xem thông tin',\r\n                    body: viewBook,\r\n                    callback: () => {\r\n                        if (this.nextUpdate) {\r\n                            this.nextUpdate = false;\r\n                            this.getCategory();\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: 'Cập nhật',\r\n                    body: <UpdateCategory\r\n                        categoryInfo={this.state.categoryInfo}\r\n                        getAdminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        onUpdateSuccess={() => this.nextUpdate = true}\r\n                    />\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getCategory() {\r\n        const goBackId = this.props.goBack && this.props.goBack.id\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const id = goBackId || requestId;\r\n        const adminMessageRequest = this.getAdminMessageReq();\r\n\r\n        if (id) {\r\n            if (this.props.goBack) window.history.pushState('', '', `${mainURL}?id=${id}`)\r\n\r\n            const resultReq = await adminMessageRequest.sendRequest(() => {\r\n                return CategoryAPI.getCategory(id as number)\r\n            }, { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                this.setState({ categoryInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../../api/admin/category-book-api\";\r\nimport { APIResult } from \"../../../../api/declare\";\r\nimport { AdminOverrideWindow } from \"../../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../../logo-svg/edit\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../../base/base-view\";\r\nimport DetailCategory from \"./detail\";\r\n\r\nexport default class ViewCategoryBook extends BaseCrudView<CategoryAPIResult>{\r\n    getId(data: CategoryAPIResult) {\r\n        return data.id\r\n    }\r\n    fillData(data: CategoryAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>{data.categoryCode}</td>\r\n            <td>{data.category}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <Button size='sm' color='primary' className={unselectClass}\r\n                            onClick={() => {\r\n                                const detailPage = addWindow(<DetailCategory\r\n                                    goBack={{\r\n                                        action: () => removeWindow(detailPage),\r\n                                        id: data.id\r\n                                    }}\r\n                                />)\r\n                            }}\r\n                            children={<EditSVG className=\"icon\" color=\"white\" />}\r\n                        />\r\n                    }}\r\n                </AdminOverrideWindow.Consumer>\r\n            </td>\r\n        </Fragment>\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return CategoryAPI.getAllCategory({ page: page, limit: limit, unlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n    configure(): BaseViewConfig<CategoryAPIResult> {\r\n        return {\r\n            headers: [\r\n                'Mã thể loại',\r\n                'Tên thể loại',\r\n                <div className=\"text-center\">Chi tiết</div>\r\n            ],\r\n            urlPage: '/admin/book/category/list',\r\n            addPage: {\r\n                textButton: 'Thêm thể loại',\r\n                link: '/admin/book/category/add'\r\n            },\r\n            deleteAction: {\r\n                deleteMethod: CategoryAPI.deleteCategories,\r\n                textButton: 'Xóa'\r\n            }\r\n        }\r\n    }\r\n\r\n}","import React, { Fragment, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport { AuthorAPIResult } from \"../../../api/admin/author-api\";\r\nimport BookAPI, { BookAPIResult } from \"../../../api/admin/book-api\";\r\nimport CategoryAPI, { CategoryAPIResult } from \"../../../api/admin/category-book-api\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../api/admin/publisher-api\";\r\nimport Utils from \"../../../common/Utils\";\r\nimport ListSelect from \"../../../components/list-select\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport { AdminOverrideWindow } from \"../../../contexts/admin-overide-window\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\nimport { AuthorsInputListSelect, BookCoverImage, CategoriesInputListSelect, ModelObjectList } from \"./add-book\";\r\n\r\ninterface UpdateBookProps {\r\n    bookInfo: BookAPIResult\r\n    getAdminMessageRequest: () => AdminMessageRequest\r\n    onUpdateSuccess: () => void\r\n}\r\ninterface UpdateBookState {\r\n    publishers: PublisherAPIResult[]\r\n    categories: ModelObjectList<CategoryAPIResult>,\r\n    authors: ModelObjectList<AuthorAPIResult>,\r\n}\r\n\r\nexport default class UpdateBook extends React.Component<UpdateBookProps, UpdateBookState> {\r\n    form = React.createRef<WForm>();\r\n    imageUpload: File | undefined = undefined;\r\n\r\n    constructor(props: UpdateBookProps) {\r\n        super(props);\r\n        const { bookInfo } = props\r\n        this.state = {\r\n            publishers: [],\r\n            categories: Utils.modelListToObject(bookInfo.categories || []),\r\n            authors: Utils.modelListToObject(bookInfo.authors || [])\r\n        }\r\n    }\r\n    async componentDidMount() {\r\n        const { bookInfo } = this.props\r\n        const publishers = (await PublisherAPI.getAll({ unlimited: true })).data\r\n        this.setState({ publishers: publishers })\r\n        setTimeout(() => this.form.current?.setData({ ...bookInfo, publisher: bookInfo.publisher?.id }))\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        const data: BookAPIResult = this.form.current?.getData();\r\n        data.publisher = { id: data.publisher as any } as any\r\n\r\n        const {\r\n            state: { categories, authors },\r\n            props: { getAdminMessageRequest, onUpdateSuccess },\r\n            imageUpload\r\n        } = this\r\n        const amr = getAdminMessageRequest()\r\n\r\n        data.categories = Object.values(categories)\r\n        data.authors = Object.values(authors)\r\n        const resultUpdate = amr.sendRequest(() => BookAPI.updateBook(data))\r\n\r\n        if (!resultUpdate) return\r\n        onUpdateSuccess && onUpdateSuccess()\r\n\r\n        if (!imageUpload) return\r\n\r\n        // uploadImage\r\n        const messageUpdate = amr.state.message;\r\n\r\n        const resultUpdateImageBookCover = amr.sendRequest(() => BookAPI.uploadImage({ id: data.id as any, image: imageUpload }))\r\n        if (resultUpdateImageBookCover) amr.setState({ message: messageUpdate })\r\n        else amr.setState({ message: `${messageUpdate} => ${amr.state.message}`, color: \"warning\" })\r\n\r\n    }\r\n    render() {\r\n        const { bookInfo } = this.props\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)} className=\"form-container\">\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h3><strong>{bookInfo.title}</strong></h3>\r\n                                <BookCoverImage onImageChange={(file) => this.imageUpload = file} />\r\n                            </div>\r\n                        </Col>\r\n                        <input type=\"hidden\" name=\"id\" readOnly={true} value={bookInfo.id}></input>\r\n                        <input type=\"hidden\" name=\"isbn\" readOnly={true} value={bookInfo.isbn}></input>\r\n                        <Col xs={12}>\r\n                            <WInput name=\"title\" title_input=\"Tên sách\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInputOther title_input=\"Nhà xuất bản\">\r\n                                <select name=\"publisher\">\r\n                                    {this.state.publishers.map((publisher, index) => {\r\n                                        return <option key={index} value={publisher.id}>{publisher.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </WInputOther>\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"pageNumber\" title_input=\"Số trang\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"edition\" title_input=\"Tái bản\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col md={6} sm={12}>\r\n                            <WInput name=\"price\" title_input=\"Giá\" type=\"number\" required />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <AuthorsInputListSelect\r\n                                valuesSelect={Utils.modelListToObject(bookInfo.authors || [])}\r\n                                onComplete={authors => this.setState({ authors: authors })}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <CategoriesInputListSelect\r\n                                valuesSelect={Utils.modelListToObject(bookInfo.categories || [])}\r\n                                onComplete={categories => this.setState({ categories: categories })}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInputOther title_input=\"Mô tả\">\r\n                                <textarea name=\"description\" rows={4} required></textarea>\r\n                            </WInputOther>\r\n                        </Col>\r\n                        <Col>\r\n                            <div className=\"d-flex space-sm\">\r\n                                <Button color=\"primary\" size=\"sm\">Cập nhật</Button>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </WForm>\r\n        )\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport BookAPI, { BookAPIResult } from \"../../../api/admin/book-api\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport DetailAdminPage from \"../../../page-component/admin/menu-detail\";\r\nimport UpdateBook from \"./update-book\";\r\ninterface DetailBookProps {\r\n    goBack?: {\r\n        action: () => void,\r\n        bookId: number,\r\n    }\r\n}\r\ninterface DetailBookState {\r\n    bookInfo: BookAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailBook extends React.Component<DetailBookProps, DetailBookState> {\r\n    detailPage: React.RefObject<DetailAdminPage> = React.createRef();\r\n    nextUpdate = false;\r\n    goBackURL: string;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            bookInfo: {},\r\n            isNotFoundResult: false,\r\n        }\r\n        this.goBackURL = window.location.href\r\n    }\r\n    componentDidMount() {\r\n        this.getBook();\r\n    }\r\n    getAdminMessageReq() {\r\n        return this.detailPage.current?.adminMessageRequest.current as any;\r\n    }\r\n    render() {\r\n        const { bookInfo } = this.state;\r\n        const goBackAction = this.props.goBack\r\n            ? () => {\r\n                window.history.pushState('', '', this.goBackURL)\r\n                this.props.goBack?.action();\r\n            }\r\n            : \"/admin/book/view\"\r\n\r\n        const viewBook = (<div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h3><strong>{this.state.bookInfo.title}</strong></h3>\r\n            </div>\r\n            <br />\r\n            <table className=\"table wtable-info\">\r\n                <tbody>\r\n                    <tr><td>ID</td><td>{bookInfo.id}</td></tr>\r\n                    <tr><td>Tên sách</td><td>{bookInfo.title}</td></tr>\r\n                    <tr>\r\n                        <td>Tác giả</td>\r\n                        <td className=\"split-string\">{bookInfo.authors?.map((author) => <Link\r\n                            to={`/admin/author/detail?id=${author.id}`}\r\n                            children={author.name}\r\n                            key={author.authorCode} />)}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Thể loại</td>\r\n                        <td className=\"split-string\">{bookInfo.categories?.map((category) => <Link\r\n                            to={`/admin/category/detail?id=${category.id}`}\r\n                            children={category.category}\r\n                            key={category.categoryCode} />)}</td>\r\n                    </tr>\r\n                    <tr><td>Nhà xuất bản</td><td><Link to={`/admin/publisher/detail?id=${bookInfo.id}`} children={bookInfo.publisher?.name} /></td></tr>\r\n                    <tr><td>Số lượng</td><td>{bookInfo.quantity}</td></tr>\r\n                    <tr><td>Tái bản</td><td>{bookInfo.edition}</td></tr>\r\n                    <tr><td>Số trang</td><td>{bookInfo.pageNumber}</td></tr>\r\n                    <tr><td>Điểm đánh giá</td><td>{bookInfo.rate}</td></tr>\r\n                    <tr><td>Số lượt đánh giá</td><td>{bookInfo.rateCount}</td></tr>\r\n                    <tr><td>Mô tả</td><td>{bookInfo.description}</td></tr>\r\n                    <tr>\r\n                        <td>Cập nhật</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${bookInfo.modifiedBy}`}>{bookInfo.modifiedBy}</Link> - {moment(bookInfo.modifiedDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Tạo bởi</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${bookInfo.createBy}`}>{bookInfo.createBy}</Link> - {moment(bookInfo.createDate).calendar()}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>)\r\n        return <DetailAdminPage ref={this.detailPage}\r\n            interceptor={(menu) => !this.state.isNotFoundResult\r\n                ? menu\r\n                : (<div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\" onClick={this.getBook.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                </div>)\r\n            }\r\n            goBackAction={goBackAction}\r\n            menuConfig={[\r\n                {\r\n                    name: 'Xem thông tin',\r\n                    body: viewBook,\r\n                    callback: () => {\r\n                        if (this.nextUpdate) {\r\n                            this.nextUpdate = false;\r\n                            this.getBook();\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: 'Cập nhật',\r\n                    body: <UpdateBook\r\n                        bookInfo={this.state.bookInfo}\r\n                        getAdminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        onUpdateSuccess={() => this.nextUpdate = true}\r\n                    />\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getBook() {\r\n        const goBackId = this.props.goBack && this.props.goBack.bookId\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const id = goBackId || requestId;\r\n        const adminMessageRequest = this.getAdminMessageReq();\r\n        console.log('get book again')\r\n        if (id) {\r\n            if (this.props.goBack) window.history.pushState('', '', `/admin/book/detail?id=${id}`)\r\n\r\n            const resultReq = await adminMessageRequest.sendRequest(() => {\r\n                return BookAPI.getBook(id as number)\r\n            }, { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                this.setState({ bookInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, ButtonGroup, Col, Container, Row } from \"reactstrap\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../../api/admin/publisher-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput from \"../../../../components/winput\";\r\nimport AMRWindow from \"../../../../page-component/admin/admin-message-request-disable-window\";\r\n\r\nconst goBackURL = \"/admin/book/publisher/view\"\r\n\r\nexport default class AddPublisher extends React.Component {\r\n    amr = React.createRef<AMRWindow>();\r\n    form = React.createRef<WForm>();\r\n    componentDidMount() {\r\n        const form = this.form.current\r\n        if (!form) return\r\n        form.setData({\r\n            name: \"Bình Định\",\r\n            publisherCode: \"BINH_DINH\"\r\n        } as PublisherAPIResult)\r\n    }\r\n    insert(evt: any) {\r\n        evt.preventDefault()\r\n        const { form: { current: form }, amr: { current: amr } } = this\r\n        if (!form || !amr) return\r\n        const sendRequest = amr.getMessageRequest().sendRequest\r\n\r\n        const data: PublisherAPIResult = form.getData()\r\n        sendRequest(PublisherAPI.addPublisher(data))\r\n    }\r\n    render() {\r\n        return <AMRWindow ref={this.amr} className=\"form-container\">\r\n            <WForm ref={this.form} onSubmit={this.insert.bind(this)} >\r\n                <h3>Thêm nhà xuất bản</h3>\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Mã nhà xuất bản\" name=\"publisherCode\" />\r\n                        </Col>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên nhà xuất bản\" name=\"name\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-sm mt-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Thêm</Button>\r\n                        <Link to={goBackURL} className=\"btn btn-sm btn-danger\">Quay về</Link>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        </AMRWindow>\r\n    }\r\n}","import React from \"react\";\r\nimport { Button, Col, Container, Row } from \"reactstrap\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../../api/admin/publisher-api\";\r\nimport WForm from \"../../../../components/wform\";\r\nimport WInput from \"../../../../components/winput\";\r\nimport AdminMessageRequest from \"../../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdatePublisherProps {\r\n    categoryInfo: PublisherAPIResult\r\n    getAdminMessageRequest: () => AdminMessageRequest\r\n    onUpdateSuccess: () => void\r\n}\r\n\r\nexport default class UpdatePublisher extends React.Component<UpdatePublisherProps> {\r\n    form = React.createRef<WForm>();\r\n\r\n    async componentDidMount() {\r\n        const { categoryInfo } = this.props\r\n        this.form.current?.setData(categoryInfo)\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        const {\r\n            props: { getAdminMessageRequest, onUpdateSuccess },\r\n            form: { current: form }\r\n        } = this\r\n\r\n        const amr = getAdminMessageRequest()\r\n        if (!form || !amr) return\r\n\r\n        const data: PublisherAPIResult = form.getData();\r\n        const resultUpdate = amr.sendRequest(PublisherAPI.updatePublisher(data))\r\n\r\n        if (!resultUpdate) return\r\n        onUpdateSuccess && onUpdateSuccess()\r\n\r\n    }\r\n    render() {\r\n        const { categoryInfo } = this.props\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)} className=\"form-container\">\r\n                <Container fluid={true} className=\"p-0\">\r\n                    <Row>\r\n                        <Col xs={12}>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <h3><strong>{categoryInfo.publisherCode}</strong></h3>\r\n                            </div>\r\n                        </Col>\r\n                        <input type=\"hidden\" name=\"id\" readOnly={true} value={categoryInfo.id}></input>\r\n                        <Col xs={12}>\r\n                            <WInput title_input=\"Tên nhà xuất bản\" name=\"name\" />\r\n                        </Col>\r\n                    </Row>\r\n                    <div className=\"d-flex space-nm mb-2\">\r\n                        <Button size=\"sm\" color=\"primary\">Cập nhật</Button>\r\n                    </div>\r\n                </Container>\r\n            </WForm>\r\n        )\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../../api/admin/publisher-api\";\r\nimport ReloadSVG from \"../../../../logo-svg/reload\";\r\nimport DetailAdminPage from \"../../../../page-component/admin/menu-detail\";\r\nimport UpdatePublisher from \"./update\";\r\n\r\nconst goBackURL = \"/admin/book/publisher/view\"\r\nconst mainURL = \"/admin/book/publisher/detail\"\r\n\r\ninterface DetailPublisherProps {\r\n    goBack?: {\r\n        action: () => void,\r\n        id: number,\r\n    }\r\n}\r\ninterface DetailPublisherState {\r\n    publisherInfo: PublisherAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailPublisher extends React.Component<DetailPublisherProps, DetailPublisherState> {\r\n    detailPage: React.RefObject<DetailAdminPage> = React.createRef();\r\n    nextUpdate = false;\r\n    goBackURL: string;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            publisherInfo: {} as any,\r\n            isNotFoundResult: false,\r\n        }\r\n        this.goBackURL = window.location.href\r\n    }\r\n    componentDidMount() {\r\n        this.getCategory();\r\n    }\r\n    getAdminMessageReq() {\r\n        return this.detailPage.current?.adminMessageRequest.current as any;\r\n    }\r\n    render() {\r\n        const { publisherInfo } = this.state;\r\n        const goBackAction = this.props.goBack\r\n            ? () => {\r\n                window.history.pushState('', '', this.goBackURL)\r\n                this.props.goBack?.action();\r\n            }\r\n            : goBackURL\r\n\r\n        const viewBook = (<div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h3><strong>{this.state.publisherInfo.name}</strong></h3>\r\n            </div>\r\n            <br />\r\n            <table className=\"table wtable-info\">\r\n                <tbody>\r\n                    <tr><td>ID</td><td>{publisherInfo.id}</td></tr>\r\n                    <tr><td>Mã NBX</td><td>{publisherInfo.publisherCode}</td></tr>\r\n                    <tr><td>Tên NBX</td><td>{publisherInfo.name}</td></tr>\r\n                    <tr>\r\n                        <td>Cập nhật</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${publisherInfo.modifiedBy}`}>{publisherInfo.modifiedBy}</Link> - {moment(publisherInfo.modifiedDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Tạo bởi</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${publisherInfo.createBy}`}>{publisherInfo.createBy}</Link> - {moment(publisherInfo.createDate).calendar()}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>)\r\n        return <DetailAdminPage ref={this.detailPage}\r\n            interceptor={(menu) => !this.state.isNotFoundResult\r\n                ? menu\r\n                : (<div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\" onClick={this.getCategory.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                </div>)\r\n            }\r\n            goBackAction={goBackAction}\r\n            menuConfig={[\r\n                {\r\n                    name: 'Xem thông tin',\r\n                    body: viewBook,\r\n                    callback: () => {\r\n                        if (this.nextUpdate) {\r\n                            this.nextUpdate = false;\r\n                            this.getCategory();\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: 'Cập nhật',\r\n                    body: <UpdatePublisher\r\n                        categoryInfo={this.state.publisherInfo}\r\n                        getAdminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        onUpdateSuccess={() => this.nextUpdate = true}\r\n                    />\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getCategory() {\r\n        const goBackId = this.props.goBack && this.props.goBack.id\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const id = goBackId || requestId;\r\n        const adminMessageRequest = this.getAdminMessageReq();\r\n\r\n        if (id) {\r\n            if (this.props.goBack) window.history.pushState('', '', `${mainURL}?id=${id}`)\r\n\r\n            const resultReq = await adminMessageRequest.sendRequest(() => {\r\n                return PublisherAPI.getPublisherById(id as number)\r\n            }, { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                this.setState({ publisherInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import moment from \"moment\";\r\nimport React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport PublisherAPI, { PublisherAPIResult } from \"../../../../api/admin/publisher-api\";\r\nimport { APIResult } from \"../../../../api/declare\";\r\nimport { AdminOverrideWindow } from \"../../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../../logo-svg/edit\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../../base/base-view\";\r\nimport DetailPublisher from \"./detail\";\r\n\r\nexport default class ViewPublisherBook extends BaseCrudView<PublisherAPIResult>{\r\n    getId(data: PublisherAPIResult) {\r\n        return data.id\r\n    }\r\n    fillData(data: PublisherAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>{data.name}</td>\r\n            <td>{data.publisherCode}</td>\r\n            <td title={`Cập nhât: ${data.modifiedBy} - ${moment(data.modifiedDate).calendar()}\\nKhởi tạo: ${data.createBy} - ${moment(data.createDate).calendar()}`\r\n            }>{data.modifiedBy}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <Button color=\"primary\" size=\"sm\" className={unselectClass} onClick={() => {\r\n                            const detailPage = addWindow(<DetailPublisher\r\n                                goBack={{\r\n                                    action: () => removeWindow(detailPage),\r\n                                    id: data.id\r\n                                }}\r\n                            />)\r\n                        }}>\r\n                            <EditSVG color=\"white\" className=\"icon\" />\r\n                        </Button>\r\n                    }}\r\n                </AdminOverrideWindow.Consumer></td>\r\n        </Fragment >\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return PublisherAPI.getAll({ page: page, limit: limit, unlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n    configure(): BaseViewConfig<PublisherAPIResult> {\r\n        return {\r\n            headers: [\r\n                'Mã nhà xuất bản',\r\n                'Tên nhà xuất bản',\r\n                'Cập nhật',\r\n                <div className=\"text-center\">Chi tiết</div>\r\n            ],\r\n            urlPage: '/admin/book/publisher/view',\r\n            addPage: {\r\n                textButton: 'Thêm nhà xuất bản',\r\n                link: '/admin/book/publisher/add',\r\n            },\r\n            deleteAction: {\r\n                textButton: 'Xóa', deleteMethod: PublisherAPI.deletePublishers\r\n            }\r\n        }\r\n    }\r\n\r\n}","import moment from \"moment\";\r\nimport React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport BookAPI, { BookAPIResult } from \"../../../api/admin/book-api\";\r\nimport { APIResult } from \"../../../api/declare\";\r\nimport ImageError from \"../../../components/image-error\";\r\nimport { AdminOverrideWindow } from \"../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../logo-svg/edit\";\r\nimport DetailAdminUser from \"../admin-user/detail-user\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../base/base-view\";\r\nimport DetailBook from \"./detail-book\";\r\n\r\nexport default class ViewBook extends BaseCrudView<BookAPIResult>{\r\n    configure(): BaseViewConfig<BookAPIResult> {\r\n        return {\r\n            urlPage: '/admin/book',\r\n            addPage: { link: '/admin/book/add', textButton: 'Thêm sách' },\r\n            deleteAction: { textButton: 'Xóa', deleteMethod: BookAPI.deleteBook },\r\n            headers: [\r\n                'Sách',\r\n                'Tên sách',\r\n                'ISBN',\r\n                'Tác giả',\r\n                'Thể loại',\r\n                'Cập nhật',\r\n                'Số lượng',\r\n                'Hành động'\r\n            ]\r\n        }\r\n    }\r\n\r\n    getId(data: BookAPIResult) {\r\n        return data.id\r\n    }\r\n    fillData(book: BookAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td><ImageError className=\"no-round\"\r\n                src={`${process.env.REACT_APP_BOOK_IMAGE_PATH}${book.id}.jpg`}\r\n                err_src={`${process.env.REACT_APP_BOOK_IMAGE_PATH}default.jpg`} /></td>\r\n            <td>{book.title}</td>\r\n            <td>{book.isbn}</td>\r\n            <td>{book.authors?.map((item) => { return item.name }).join(', ')}</td>\r\n            <td>{book.categories?.map((item) => { return item.category }).join(', ')}</td>\r\n            <td title={`Cập nhât: ${book.modifiedBy} - ${moment(book.modifiedDate).calendar()}\\nKhởi tạo: ${book.createBy} - ${moment(book.createDate).calendar()}`\r\n            }>{book.modifiedBy}</td>\r\n            <td>{book.quantity}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <Button color=\"primary\" size=\"sm\" onClick={() => {\r\n                            const overrideWindow = addWindow(<DetailBook\r\n                                goBack={{\r\n                                    action: () => removeWindow(overrideWindow),\r\n                                    bookId: book.id as number\r\n                                }} />)\r\n                        }}>\r\n                            <EditSVG color=\"white\" className=\"icon\" />\r\n                        </Button>\r\n                    }}\r\n                </AdminOverrideWindow.Consumer>\r\n            </td>\r\n        </Fragment >\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return BookAPI.getBooks({ page: page, limit: limit, unlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n}","import axiosClient from \"../axiosCient\";\r\nimport { APIResult } from \"../declare\";\r\n\r\nconst GroupPermissionAPI = {\r\n    getAllGroup: (pageInfo: { page: number, limit: number, isUnlimited: boolean }): Promise<APIResult<GroupPermissionAPIResult>> => {\r\n        return axiosClient.get('/admin/groups', { params: pageInfo });\r\n    },\r\n    addGroup: (data: GroupPermissionDTO) => {\r\n        return axiosClient.post('/admin/group', data);\r\n    },\r\n    deleteGroups: (ids: number[]) => {\r\n        return axiosClient.delete('/admin/groups', { data: { ids: ids } });\r\n    },\r\n    getGroup: (id: number): Promise<APIResult<GroupPermissionAPIResult>> => {\r\n        return axiosClient.get('/admin/group', { params: { id: id } });\r\n    },\r\n    updateGroup: (data: GroupPermissionDTO) => {\r\n        console.log(data);\r\n        return axiosClient.put('/admin/group', data);\r\n    },\r\n    updateAdminPermissions: (data: {groupId: number, permissionIds: number[]}) => {\r\n        return axiosClient.put('/admin/group/permissions', data);\r\n    },\r\n    getAllPermissionInGroup(id: number) {\r\n        return axiosClient.get('/admin/group/permissions', { params: { id: id } });\r\n    }\r\n}\r\nexport default GroupPermissionAPI;\r\n\r\nexport interface GroupPermissionAPIResult {\r\n    createBy: string,\r\n    name: string,\r\n    modifiedDate: string,\r\n    description: string,\r\n    modifiedBy: string,\r\n    id: number,\r\n    groupCode: string,\r\n    createDate: string,\r\n}\r\n\r\nexport interface GroupPermissionDTO {\r\n    id: number,\r\n    groupCode: string,\r\n    description: string,\r\n    name: string,\r\n}","import axiosClient from \"../axiosCient\";\r\nimport { APIResult } from \"../declare\";\r\n\r\nconst PermissionAPI = {\r\n    getAllPermission: (data: { page?: number, limit?: number, isUnlimited?: boolean }): Promise<APIResult<PermissionAPIResult>> => {\r\n        return axiosClient.get('/admin/permissions', { params: data });\r\n    },\r\n    addPermission: (data: PermissionDTO): Promise<APIResult> => {\r\n        return axiosClient.post('/admin/permission', data);\r\n    },\r\n    deletePermissions: (ids: (string | number)[]): Promise<APIResult> => {\r\n        console.log(ids)\r\n        return axiosClient.delete('/admin/permissions', { data: { ids: ids } });\r\n    },\r\n    getPermission: (id: number | string): Promise<APIResult<PermissionAPIResult>> => {\r\n        return axiosClient.get('/admin/permission', { params: { id: id } });\r\n    },\r\n    updatePermission: (data: PermissionDTO)=>{\r\n        return axiosClient.put('/admin/permission', data);\r\n    }\r\n}\r\n\r\nexport default PermissionAPI;\r\n\r\nexport interface PermissionAPIResult {\r\n    createBy: string | undefined,\r\n    code: string | undefined,\r\n    name: string | undefined,\r\n    modifiedDate: string | undefined,\r\n    description: string | undefined,\r\n    modifiedBy: string | undefined,\r\n    id: string & number & undefined,\r\n    createDate: string | undefined,\r\n}\r\n\r\nexport interface PermissionDTO {\r\n    id?: string | undefined,\r\n    permissionCode?: string | undefined,\r\n    description?: string | undefined,\r\n    name?: string | undefined,\r\n}","import React from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport GroupPermissionAPI, { GroupPermissionAPIResult } from \"../../../api/admin/group-api\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport SYSTEM_CONSTANTS from \"../../../constants\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdateGroupInfoProps {\r\n    groupInfo: GroupPermissionAPIResult,\r\n    adminMessageRequest: () => AdminMessageRequest,\r\n    onUpdateSuccess?: () => any\r\n}\r\ninterface UpdateGroupInfoState {\r\n    isValidInput: any\r\n}\r\nexport default class UpdateGroupInfo extends React.Component<UpdateGroupInfoProps, UpdateGroupInfoState>{\r\n    private form: React.RefObject<WForm> = React.createRef();\r\n\r\n    constructor(props: UpdateGroupInfoProps) {\r\n        super(props);\r\n    }\r\n    componentDidMount() {\r\n        this.form.current?.setData({ ... this.props.groupInfo });\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        let data = this.form.current?.getData();\r\n        this.props.adminMessageRequest().sendRequest(() => { return GroupPermissionAPI.updateGroup(data) })\r\n            .then((result) => { result !== undefined && this.props.onUpdateSuccess && this.props.onUpdateSuccess() });\r\n    }\r\n    render() {\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)}>\r\n                <h2>Cập nhật nhóm CN {this.props.groupInfo.name}</h2>\r\n                <input type=\"hidden\" value={this.props.groupInfo.id} name=\"id\" />\r\n                <WInput title_input=\"Tên nhóm\" name=\"name\" required />\r\n                <WInputOther title_input=\"Mô tả\" >\r\n                    <textarea name=\"description\" rows={4}></textarea>\r\n                </WInputOther>\r\n                <br />\r\n                <div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\">Cập nhật</Button>\r\n                    <Button color=\"danger\" size=\"sm\" onClick={\r\n                        () => {\r\n                            this.form.current?.setData(this.props.groupInfo);\r\n                        }\r\n                    }>Xóa</Button>\r\n                </div>\r\n            </WForm >\r\n        )\r\n    }\r\n} ","import React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport { AdminPermissionsResult } from \"../../../api/admin/admin-api\";\r\nimport GroupPermissionAPI from \"../../../api/admin/group-api\";\r\nimport PermissionAPI, { PermissionAPIResult } from \"../../../api/admin/permission-api\";\r\nimport Utils from \"../../../common/Utils\";\r\nimport ListSelect from \"../../../components/list-select\";\r\nimport WCheckBox from \"../../../components/wcheckbox\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdateGroupPermissionProps {\r\n    id: number | string,\r\n    adminMessageRequest: () => AdminMessageRequest\r\n}\r\nexport default class UpdateGroupPermission extends React.Component<UpdateGroupPermissionProps> {\r\n    async updatePermissions(permissions: any) {\r\n        let permissionIds: any[] = Object.keys(permissions);\r\n        this.props.adminMessageRequest().sendRequest(() => {\r\n            return GroupPermissionAPI.updateAdminPermissions({ groupId: this.props.id as number, permissionIds: permissionIds });\r\n        })\r\n    }\r\n    render() {\r\n        return <ListSelect\r\n            getData={async () => {\r\n                let result = await this.props.adminMessageRequest().sendRequest(() => {\r\n                    return GroupPermissionAPI.getAllPermissionInGroup(this.props.id as number);\r\n                }, { hideWhenDone: true });\r\n                if (result !== undefined) {\r\n                    return result.data;\r\n                } else {\r\n                    return [];\r\n                }\r\n            }}\r\n            getKey={({ id }) => id}\r\n            getAllow={({ isAllow }) => isAllow}\r\n            header={<Fragment>\r\n                <th key=\"code\">Mã CN</th>\r\n                <th key=\"name\">Tên CN</th>\r\n            </Fragment>}\r\n            typeSearch={[\r\n                { propertySearch: 'code', viewSearch: 'Mã chức năng' },\r\n                { propertySearch: 'name', viewSearch: 'Tên chức năng' }\r\n            ]}\r\n            viewData={(per: PermissionAPIResult) => <Fragment>\r\n                <td key=\"code\">{per.code}</td>\r\n                <td key=\"name\">{per.name}</td>\r\n            </Fragment>}\r\n            onComplete={this.updatePermissions.bind(this)}\r\n            textOnCompleteButton=\"Cập nhật\"\r\n        />\r\n    }\r\n}","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport GroupPermissionAPI, { GroupPermissionAPIResult } from \"../../../api/admin/group-api\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport DetailAdminPage from \"../../../page-component/admin/menu-detail\";\r\nimport UpdateGroupInfo from \"./update-group\";\r\nimport UpdateGroupPermission from \"./update-group-permissions\";\r\n\r\ninterface DetailGroupPermissionProps {\r\n    goBack?: {\r\n        action: () => any,\r\n        id: number | string,\r\n        oldLocation: string\r\n    },\r\n}\r\ninterface DetailGroupPermissionState {\r\n    groupInfo: GroupPermissionAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailGroupPermission extends React.Component<DetailGroupPermissionProps, DetailGroupPermissionState>{\r\n    detailPage: React.RefObject<DetailAdminPage> = React.createRef();\r\n    nextUpdate = false;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            groupInfo: {} as any,\r\n            isNotFoundResult: false,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getGroup();\r\n    }\r\n    getAdminMessageReq() {\r\n        return this.detailPage.current?.adminMessageRequest.current as any;\r\n    }\r\n    render() {\r\n        const { groupInfo } = this.state;\r\n        const goBackAction = this.props.goBack\r\n            ? () => {\r\n                window.history.replaceState('', '', this.props.goBack?.oldLocation);\r\n                this.props.goBack?.action();\r\n            }\r\n            : \"/admin/group/view\"\r\n\r\n        const viewGroup = (<div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h2>Thông tin nhóm năng {this.state.groupInfo.name}</h2>\r\n            </div>\r\n            <br />\r\n            <table className=\"table wtable-info\">\r\n                <tbody>\r\n                    <tr>\r\n                        <td>ID</td>\r\n                        <td>{groupInfo.id}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Mã Nhóm</td>\r\n                        <td>{groupInfo.groupCode}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Tên nhóm</td>\r\n                        <td>{groupInfo.name}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Khởi tạo</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${groupInfo.modifiedBy}`}>{groupInfo.modifiedBy}</Link> - {moment(groupInfo.modifiedDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Cập nhật</td>\r\n                        <td><Link to={`/admin/admin-user/detail?adminCode=${groupInfo.createBy}`}>{groupInfo.createBy}</Link> - {moment(groupInfo.createDate).calendar()}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Mô tả</td>\r\n                        <td>{groupInfo.description}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>)\r\n        return <DetailAdminPage ref={this.detailPage}\r\n            interceptor={(menu) => !this.state.isNotFoundResult\r\n                ? menu\r\n                : (<div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\" onClick={this.getGroup.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n                </div>)\r\n            }\r\n            goBackAction={goBackAction}\r\n            menuConfig={[\r\n                {\r\n                    name: 'Xem thông tin nhóm',\r\n                    body: viewGroup,\r\n                    callback: () => {\r\n                        if (this.nextUpdate) {\r\n                            this.nextUpdate = false;\r\n                            this.getGroup();\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: 'Cập nhật thông tin',\r\n                    body: <UpdateGroupInfo\r\n                        adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        groupInfo={this.state.groupInfo}\r\n                        onUpdateSuccess={() => { this.nextUpdate = true }}\r\n                    />\r\n                },\r\n                {\r\n                    name: 'Cập nhật CN cho nhóm',\r\n                    body: <UpdateGroupPermission\r\n                        id={this.state.groupInfo.id}\r\n                        adminMessageRequest={this.getAdminMessageReq.bind(this)} />\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getGroup() {\r\n        const goBackId = this.props.goBack && this.props.goBack.id\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const id = goBackId || requestId;\r\n        const adminMessageRequest = this.getAdminMessageReq();\r\n\r\n        if (id) {\r\n            window.history.replaceState('', '', `/admin/group/detail?id=${id}`);\r\n\r\n            const resultReq = await adminMessageRequest.sendRequest(() => {\r\n                return GroupPermissionAPI.getGroup(id as any)\r\n            }, { hideWhenDone: true });\r\n\r\n            if (resultReq) {\r\n                await this.setState({ groupInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import moment from \"moment\";\r\nimport React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport GroupPermissionAPI, { GroupPermissionAPIResult } from \"../../../api/admin/group-api\";\r\nimport PermissionAPI from \"../../../api/admin/permission-api\";\r\nimport { APIResult } from \"../../../api/declare\";\r\nimport { AdminOverrideWindow } from \"../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../logo-svg/edit\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../base/base-view\";\r\nimport DetailGroupPermission from \"./detail-group-permission\";\r\n\r\n\r\nexport default class ViewGroupPermission extends BaseCrudView<GroupPermissionAPIResult>{\r\n    configure(): BaseViewConfig<GroupPermissionAPIResult> {\r\n        return {\r\n            headers: ['Tên Nhóm',\r\n                'Mã nhóm',\r\n                'Cập nhật',\r\n                <div className=\"text-center\">Chi tiết</div>\r\n            ],\r\n            urlPage: '/admin/permission/view',\r\n            addPage: {\r\n                textButton: 'Thêm nhóm',\r\n                link: '/admin/permission/add'\r\n            },\r\n            deleteAction: {\r\n                textButton: 'Xóa',\r\n                deleteMethod: PermissionAPI.deletePermissions\r\n            }\r\n        }\r\n    }\r\n    getId(permission: GroupPermissionAPIResult) {\r\n        return permission.id\r\n    }\r\n    fillData(permission: GroupPermissionAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>{permission.name}</td>\r\n            <td>{permission.groupCode}</td>\r\n            <td title={`Cập nhât: ${permission.modifiedBy} - ${moment(permission.modifiedDate).calendar()}\\nKhởi tạo: ${permission.createBy} - ${moment(permission.createDate).calendar()}`\r\n            }>{permission.modifiedBy}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <Button color=\"primary\" size=\"sm\" className={unselectClass} onClick={() => {\r\n                            const detailPage = addWindow(<DetailGroupPermission\r\n                                goBack={{\r\n                                    action: () => {\r\n                                        removeWindow(detailPage)\r\n                                        window.history.replaceState('', '', `${this.config.urlPage}?page=${this.page}&limit=${this.limit}`)\r\n                                    },\r\n                                    id: permission.id,\r\n                                    oldLocation: `${this.config.urlPage}?page=${this.page}&limit=${this.limit}`\r\n                                }}\r\n                            />)\r\n                        }}>\r\n                            <EditSVG color=\"white\" className=\"icon\" />\r\n                        </Button>\r\n                    }}\r\n                </AdminOverrideWindow.Consumer>\r\n            </td>\r\n        </Fragment >\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return GroupPermissionAPI.getAllGroup({ page: page, limit: limit, isUnlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport PermissionAPI, { PermissionDTO } from \"../../../api/admin/permission-api\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport SYSTEM_CONSTANTS from \"../../../constants\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface AddPermissionState {\r\n    input: PermissionDTO,\r\n    isValidInput: {\r\n        permissionCode: boolean\r\n    },\r\n    isDisable: boolean,\r\n}\r\n\r\n\r\nexport default class AddPermission extends React.Component<any, AddPermissionState>{\r\n    messageRequest: React.RefObject<AdminMessageRequest> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            isDisable: false,\r\n            input: {\r\n                permissionCode: \"ACTION_0\",\r\n                description: '.',\r\n                name: \"NAME_\"\r\n            },\r\n            isValidInput: {\r\n                permissionCode: true\r\n            }\r\n        }\r\n    }\r\n    static filter = {\r\n        permissionCode: (value: string) => { return value.match(SYSTEM_CONSTANTS.REGEX.code) !== null }\r\n    }\r\n    setInputOnChange(evt: React.FormEvent<any>) {\r\n        let { input, isValidInput } = this.state;\r\n        let { name, value } = evt.currentTarget;\r\n        (input as any)[name] = value;\r\n        let filter = (AddPermission.filter as any)[name];\r\n        if (filter instanceof Function) {\r\n            (isValidInput as any)[name] = filter(value);\r\n        }\r\n        this.setState({});\r\n    }\r\n    onSubmit(evt: any) {\r\n        evt.preventDefault();\r\n        this.messageRequest.current?.sendRequest(() => { return PermissionAPI.addPermission(this.state.input) });\r\n    }\r\n    render() {\r\n        let { isValidInput, input } = this.state;\r\n        return <div className=\"form-container\">\r\n            <AdminMessageRequest ref={this.messageRequest} />\r\n            <WForm className={this.state.isDisable ? 'disabled' : ''} onSubmit={this.onSubmit.bind(this)}>\r\n                <WInput title_input=\"Mã chức năng\" value={input.permissionCode} is_invalid={!isValidInput.permissionCode} name=\"permissionCode\" onChange={this.setInputOnChange.bind(this)}  required/>\r\n                <WInput title_input=\"Tên chức năng\" value={input.name} name=\"name\" onChange={this.setInputOnChange.bind(this)} required/>\r\n                <WInputOther title_input=\"Mô tả\">\r\n                    <textarea rows={4} value={input.description} name=\"description\" onChange={this.setInputOnChange.bind(this)} />\r\n                </WInputOther>\r\n                <div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\">Thêm chức năng</Button>\r\n                    <Link to=\"/admin/permission/view\" className=\"btn btn-danger btn-sm\">Quay về</Link>\r\n                </div>\r\n            </WForm>\r\n        </div>\r\n    }\r\n}","import React from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport PermissionAPI, { PermissionAPIResult } from \"../../../api/admin/permission-api\";\r\nimport WForm from \"../../../components/wform\";\r\nimport WInput, { WInputOther } from \"../../../components/winput\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\n\r\ninterface UpdatePermissionProps {\r\n    permissionInfo: PermissionAPIResult,\r\n    adminMessageRequest: () => AdminMessageRequest,\r\n    onUpdateSuccess?: () => any\r\n}\r\ninterface UpdatePermissionState {\r\n    inputValidPermissionCode: boolean\r\n}\r\nexport default class UpdatePermission extends React.Component<UpdatePermissionProps, UpdatePermissionState>{\r\n    private form: React.RefObject<WForm> = React.createRef();\r\n\r\n    constructor(props: UpdatePermissionProps) {\r\n        super(props);\r\n        this.state = {\r\n            inputValidPermissionCode: true,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.form.current?.setData({ ... this.props.permissionInfo, permissionCode: this.props.permissionInfo.code });\r\n    }\r\n    update(evt: any) {\r\n        evt.preventDefault();\r\n        let data = this.form.current?.getData();\r\n        data.id = this.props.permissionInfo.id;\r\n        this.props.adminMessageRequest().sendRequest(() => { return PermissionAPI.updatePermission(data) })\r\n            .then((result) => { result !== undefined && this.props.onUpdateSuccess && this.props.onUpdateSuccess() });\r\n    }\r\n    render() {\r\n        return (\r\n            <WForm ref={this.form as any} onSubmit={this.update.bind(this)}>\r\n                <h2>Cập nhật chức năng {this.props.permissionInfo.name}</h2>\r\n                <br />\r\n                <WInput title_input=\"Tên chức năng\" name=\"name\" required />\r\n                <WInputOther title_input=\"Mô tả\">\r\n                    <textarea rows={4} name=\"description\" />\r\n                </WInputOther>\r\n                <div className=\"d-flex space-sm\">\r\n                    <Button color=\"primary\" size=\"sm\">Cập nhật</Button>\r\n                    <Button color=\"danger\" size=\"sm\" onClick={\r\n                        () => { this.form.current?.setData(this.props.permissionInfo) }\r\n                    }>Xóa</Button>\r\n                </div>\r\n            </WForm>\r\n        )\r\n    }\r\n} ","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"reactstrap\";\r\nimport PermissionAPI, { PermissionAPIResult } from \"../../../api/admin/permission-api\";\r\nimport ReloadSVG from \"../../../logo-svg/reload\";\r\nimport AdminMessageRequest from \"../../../page-component/admin/admin-message-request\";\r\nimport DetailAdminPage from \"../../../page-component/admin/menu-detail\";\r\nimport UpdatePermission from \"./update-permission\";\r\n\r\ninterface DetailPermissionProps {\r\n    goBack?: {\r\n        action: () => any,\r\n        id: number | string,\r\n        oldLocation: string\r\n    },\r\n}\r\ninterface DetailPermissionState {\r\n    permissionInfo: PermissionAPIResult,\r\n    isNotFoundResult: boolean,\r\n}\r\nexport default class DetailPermission extends React.Component<DetailPermissionProps, DetailPermissionState>{\r\n    detailPage = React.createRef<DetailAdminPage>();\r\n    nextUpdate = false;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            permissionInfo: {} as any,\r\n            isNotFoundResult: false\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getPermission();\r\n    }\r\n    updateInfo() {\r\n        if (this.nextUpdate) {\r\n            this.nextUpdate = false;\r\n            setTimeout(() => {\r\n                this.getPermission();\r\n            })\r\n        }\r\n    }\r\n    renderMenu(menu: JSX.Element) {\r\n        if (!this.state.isNotFoundResult) {\r\n            return menu;\r\n        } else {\r\n            return <div className=\"d-flex space-sm\">\r\n                <Button color=\"primary\" size=\"sm\" onClick={this.getPermission.bind(this)}><ReloadSVG color=\"white\" className=\"icon\" /> Tải lại</Button>\r\n            </div>\r\n        }\r\n    }\r\n    getAdminMessageReq(): AdminMessageRequest {\r\n        return this.detailPage.current?.adminMessageRequest.current as any\r\n    }\r\n    render() {\r\n        let { permissionInfo } = this.state;\r\n        let goBack = this.props.goBack\r\n            ? () => { window.history.replaceState('', '', this.props.goBack?.oldLocation); this.props.goBack?.action(); }\r\n            : '/admin/permission/view';\r\n\r\n        return <DetailAdminPage\r\n            ref={this.detailPage}\r\n            goBackAction={goBack}\r\n            menuConfig={[\r\n                {\r\n                    name: \"Xem thông tin\",\r\n                    callback: this.updateInfo.bind(this),\r\n                    body: this.renderMenu(<div>\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <h2><strong>Chức năng </strong>{this.state.permissionInfo.name}</h2>\r\n                        </div>\r\n                        <br />\r\n                        <table className=\"table wtable-info\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>ID</td>\r\n                                    <td>{permissionInfo.id}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Mã Chức năng</td>\r\n                                    <td>{permissionInfo.code}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Tên chức năng</td>\r\n                                    <td>{permissionInfo.name}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Khởi tạo</td>\r\n                                    <td><Link to={`/admin/admin-user/detail?adminCode=${permissionInfo.modifiedBy}`}>{permissionInfo.modifiedBy}</Link> - {moment(permissionInfo.modifiedDate).calendar()}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Cập nhật</td>\r\n                                    <td><Link to={`/admin/admin-user/detail?adminCode=${permissionInfo.createBy}`}>{permissionInfo.createBy}</Link> - {moment(permissionInfo.createDate).calendar()}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Mô tả</td>\r\n                                    <td>{permissionInfo.description}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>)\r\n                },\r\n                {\r\n                    name: \"Cập nhật CN\",\r\n                    body: this.renderMenu(<UpdatePermission\r\n                        adminMessageRequest={this.getAdminMessageReq.bind(this)}\r\n                        permissionInfo={permissionInfo}\r\n                        onUpdateSuccess={() => { this.nextUpdate = true }}\r\n                    />)\r\n                }\r\n            ]}\r\n        />\r\n    }\r\n    async getPermission() {\r\n        const requestId = new URLSearchParams(window.location.search).get(\"id\");\r\n        const goBackId = (this.props.goBack && this.props.goBack.id)\r\n        const id = goBackId || requestId;\r\n        if (id) {\r\n            window.history.replaceState('', '', `/admin/permission/detail?id=${id}`);\r\n            const resultReq = await this.getAdminMessageReq().sendRequest(() => { return PermissionAPI.getPermission(id as any) }, { hideWhenDone: true });\r\n            if (resultReq) {\r\n                await this.setState({ permissionInfo: resultReq.data });\r\n                return;\r\n            }\r\n        }\r\n        this.setState({ isNotFoundResult: true });\r\n    }\r\n}","import moment from \"moment\";\r\nimport React, { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport PermissionAPI, { PermissionAPIResult } from \"../../../api/admin/permission-api\";\r\nimport { APIResult } from \"../../../api/declare\";\r\nimport { AdminOverrideWindow } from \"../../../contexts/admin-overide-window\";\r\nimport EditSVG from \"../../../logo-svg/edit\";\r\nimport BaseCrudView, { BaseViewConfig } from \"../base/base-view\";\r\nimport DetailPermission from \"./detail-permission\";\r\n\r\nexport default class ViewPermission extends BaseCrudView<PermissionAPIResult>{\r\n    getId(data: PermissionAPIResult) {\r\n        return data.id\r\n    }\r\n    fillData(data: PermissionAPIResult, unselectClass: string): JSX.Element {\r\n        return <Fragment>\r\n            <td>{data.code}</td>\r\n            <td>{data.name}</td>\r\n            <td title={`Cập nhât: ${data.modifiedBy} - ${moment(data.modifiedDate).calendar()}\\nKhởi tạo: ${data.createBy} - ${moment(data.createDate).calendar()}`\r\n            }>{data.modifiedBy}</td>\r\n            <td className=\"text-center\">\r\n                <AdminOverrideWindow.Consumer>\r\n                    {({ addWindow, removeWindow }) => {\r\n                        return <Button color=\"primary\" size=\"sm\" onClick={() => {\r\n                            const detailPage = addWindow(<DetailPermission\r\n                                goBack={{\r\n                                    action: () => removeWindow(detailPage),\r\n                                    id: data.id,\r\n                                    oldLocation: `${this.config.urlPage}?page=${this.page}&limit=${this.limit}`\r\n                                }}\r\n                            />)\r\n                        }}>\r\n                            <EditSVG color=\"white\" className=\"icon\" />\r\n                        </Button>\r\n                    }}\r\n                </AdminOverrideWindow.Consumer>\r\n            </td>\r\n        </Fragment >\r\n    }\r\n    getPageAPIMethod(page: number, limit: number): Promise<APIResult<any, any>> {\r\n        return PermissionAPI.getAllPermission({ page: page, limit: limit, isUnlimited: false })\r\n    }\r\n    subRender(): JSX.Element | null {\r\n        return null\r\n    }\r\n    configure(): BaseViewConfig<PermissionAPIResult> {\r\n        return {\r\n            headers: [\r\n                'Mã CN',\r\n                'Tên CN',\r\n                'Cập nhật',\r\n                <div className=\"text-center\">Chi tiết</div>\r\n            ],\r\n            urlPage: '/admin/permission/view',\r\n            addPage: {\r\n                textButton: 'Thêm chức năng',\r\n                link: '/admin/permission/add'\r\n            },\r\n            deleteAction: {\r\n                textButton: 'Xóa',\r\n                deleteMethod: PermissionAPI.deletePermissions\r\n            }\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Utils from '../../common/Utils';\r\nimport AdminAuthenticationProvider, { AdminAuthentication } from '../../contexts/admin-authencation';\r\nimport AdminOverrideWindowProvider, { AdminOverrideWindow } from '../../contexts/admin-overide-window';\r\nimport AdminHeader from '../../page-component/admin/admin-header';\r\nimport MenuTab from '../../page-component/admin/menu-tab';\r\nimport './admin-page.scss';\r\nimport AddAdminUser from './admin-user/add-user';\r\nimport ViewAdminUser from './admin-user/admin-users-view';\r\nimport DetailAdminUser from './admin-user/detail-user';\r\nimport AddBook from './book/add-book';\r\nimport AddAuthor from './book/author/add';\r\nimport ViewAuthorBook from './book/author/view';\r\nimport AddCategory from './book/category/add';\r\nimport DetailCategory from './book/category/detail';\r\nimport ViewCategoryBook from './book/category/view';\r\nimport DetailBook from './book/detail-book';\r\nimport AddPublisher from './book/publisher/add';\r\nimport DetailPublisher from './book/publisher/detail';\r\nimport ViewPublisherBook from './book/publisher/view';\r\nimport ViewBook from './book/view-book';\r\nimport ViewGroupPermission from './group-permission/view-group-permission';\r\nimport AddPermission from './permission/add-permission';\r\nimport DetailPermission from './permission/detail-permission';\r\nimport ViewPermission from './permission/view-permission';\r\n\r\nconst menu = [\r\n    {\r\n        content: 'Tài khoản quản trị', items: [\r\n            { content: 'Tài khoản', hrefLink: '/admin/admin-user/view' },\r\n            { content: 'Chức năng', hrefLink: '/admin/permission/view' },\r\n            { content: 'Nhóm chức năng', hrefLink: '/admin/group/view' }\r\n        ]\r\n    }, {\r\n        content: 'Quản lí sách', items: [\r\n            { content: 'Sách', hrefLink: '/admin/book/view' },\r\n            { content: 'Nhà xuất bản', hrefLink: '/admin/book/publisher/view' },\r\n            { content: 'Tác giả', hrefLink: '/admin/book/author/view' },\r\n            { content: 'Thê loại', hrefLink: '/admin/book/category/view' },\r\n        ]\r\n    }\r\n]\r\n\r\n\r\nexport const configRoute = {\r\n    admin: {\r\n        __children: <Redirect to=\"/admin/admin-user/view\" />,\r\n        book: {\r\n            view: { __component: ViewBook, __isExact: true },\r\n            add: { __component: AddBook, __isExact: true },\r\n            detail: { __component: DetailBook, __isExact: true },\r\n\r\n            category: {\r\n                view: { __component: ViewCategoryBook, __isExact: true },\r\n                add: { __component: AddCategory, __isExact: true },\r\n                detail: { __component: DetailCategory, __isExact: true },\r\n            },\r\n            publisher: {\r\n                view: { __component: ViewPublisherBook, __isExact: true },\r\n                add: { __component: AddPublisher, __isExact: true },\r\n                detail: { __component: DetailPublisher, __isExact: true },\r\n            },\r\n            author: {\r\n                view: { __component: ViewAuthorBook, __isExact: true },\r\n                add: { __component: AddAuthor, __isExact: true },\r\n            }\r\n        },\r\n        'admin-user': {\r\n            view: { __component: ViewAdminUser, __isExact: true },\r\n            detail: { __component: DetailAdminUser, __isExact: true },\r\n            add: { __component: AddAdminUser, __isExact: true },\r\n        },\r\n        permission: {\r\n            view: { __component: ViewPermission, __isExact: true },\r\n            detail: { __component: DetailPermission, __isExact: true },\r\n            add: { __component: AddPermission, __isExact: true },\r\n        },\r\n        group: {\r\n            view: { __component: ViewGroupPermission, __isExact: true },\r\n            detail: { __component: DetailPermission, __isExact: true },\r\n            add: { __component: AddPermission, __isExact: true },\r\n        }\r\n    }\r\n}\r\n\r\nconst routeComponent = Utils.renderRoute(configRoute)\r\n\r\nexport default class AdminPage extends React.Component<{}, { isHideScroll: boolean }> {\r\n    isClearWindow = true;\r\n    adminHeader = React.createRef<AdminHeader>();\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = { isHideScroll: false };\r\n    }\r\n\r\n    render() {\r\n        this.isClearWindow = true;\r\n        return (\r\n            <AdminAuthenticationProvider>\r\n                <AdminOverrideWindowProvider>\r\n                    <AdminAuthentication.Consumer>\r\n                        {({ isLogin }) => {\r\n                            return isLogin\r\n                                ? <div id=\"parent-layout\">\r\n                                    <style children=\"html{background-color: #eee}\" />\r\n                                    <AdminHeader minScreenResizeMenuTab={500} ref={this.adminHeader} />\r\n                                    <div id='app-body' style={{ height: 'calc(100% - 35px)', width: '100%', position: 'relative' }}\r\n                                        className={`d-inline-flex align-items-start`}>\r\n                                        <MenuTab menu={menu} getAdminHeader={() => { return this.adminHeader.current as any }}></MenuTab>\r\n                                        <div id='app-content'>\r\n                                            {routeComponent}\r\n                                        </div>\r\n                                        <AdminOverrideWindow.Consumer>\r\n                                            {({ getWindows, clear }) => {\r\n                                                const windows = getWindows()\r\n                                                if (this.isClearWindow) {\r\n                                                    if (windows.length > 0) clear();\r\n                                                    this.isClearWindow = false;\r\n                                                    return null;\r\n                                                }\r\n\r\n                                                if (windows.length > 0) {\r\n                                                    $('#app-content').addClass('d-none');\r\n                                                    const lastIndex = windows.length - 1\r\n                                                    return (\r\n                                                        <div className=\"override-content\">\r\n                                                            {windows.map((window, index) => <div key={index} className={index !== lastIndex ? 'd-none' : ''}>{window}</div>)}\r\n                                                        </div>\r\n                                                    )\r\n                                                }\r\n\r\n                                                $('#app-content').removeClass('d-none');\r\n                                            }}\r\n                                        </AdminOverrideWindow.Consumer>\r\n                                    </div>\r\n                                </div >\r\n                                : <Redirect to=\"/admin/login\"></Redirect>\r\n                        }}\r\n                    </AdminAuthentication.Consumer>\r\n                </AdminOverrideWindowProvider>\r\n            </AdminAuthenticationProvider >\r\n        )\r\n    }\r\n}","import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport React from 'react';\r\nimport { BrowserRouter as Router, Link, Route, Switch } from 'react-router-dom';\r\nimport './App.css';\r\nimport ScreenProvider from './contexts/screen-context';\r\nimport LoginPage from './pages/admin/admin-login';\r\nimport AdminLogout from './pages/admin/admin-logout';\r\nimport AdminPage from './pages/admin/admin-page';\r\n\r\nexport function App() {\r\n  return (\r\n    <ScreenProvider>\r\n      <Router>\r\n        <div className=\"App\">\r\n          <input type=\"text\" style={{position: 'fixed', top: -99}} id=\"lost-focus\"></input>\r\n          <Switch>\r\n            <Route exact path=\"/admin/login\" component={LoginPage}></Route>\r\n            <Route exact path=\"/admin/logout\" render={() => {\r\n              return <AdminLogout />;\r\n            }}></Route>\r\n            <Route path=\"/admin\" component={AdminPage} />\r\n            <Route path=\"/\"><NotFound></NotFound></Route>\r\n          </Switch>\r\n        </div>\r\n      </Router >\r\n    </ScreenProvider>\r\n  );\r\n}\r\nfunction NotFound() {\r\n  return (<div>\r\n    <h2>Not Found</h2>\r\n    <h2><Link to=\"/admin\" children=\"Go to Admin Page :)\"/></h2>\r\n  </div>);\r\n}\r\n \r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { App } from './App';\r\nimport moment from 'moment';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode >\r\n  ,\r\n  document.getElementById('root')\r\n);\r\n(() => {\r\n  let time: number;\r\n  (window as any).moment = moment;\r\n  let evtClick = (evt: any) => {\r\n    let timeNow = new Date().getTime();\r\n    if (timeNow - 100 < time) { window.getSelection()?.removeAllRanges(); }\r\n  }\r\n  document.addEventListener('dblclick', evtClick)\r\n  document.addEventListener('mousedown', () => { time = new Date().getTime(); })\r\n})();\r\n\r\n(window as any).loginDefault = () => {\r\n  window.localStorage.token = 'eyJhbGciOiJIUzUxMiJ9.eyJjb2RlIjoiTlZDIiwidG9rZW5JZCI6NDAxOTkwNDQ2NjY3NDcxNCwiaWQiOjU3MTc0NzkzOTM1NjAwNSwiZXhwIjoxOTE3NjA0MzQxLCJpYXQiOjE2MDIyNDQzNDF9.lj8B8Nmt1rkZ7NLc2vRpWDbjz5q0KuK1j7kEuSCied9oFf2I6bXZa-pPrmjQPzyoVu4NN5fpvlZIeEBUj9hBAg';\r\n}\r\n(window as any).accs = function accs(value: string){\r\n  console.log(value);\r\n  console.log(this);\r\n}\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}